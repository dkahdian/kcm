import{d as qa,a as jt,b as Pa,r as Qa,c as za,C as Ba,T as Ua,Q as Va,e as ce,i as ge,p as Ha,f as Ka,g as Ut,h as wt,M as Pe,j as qt,k as la,l as da,s as sa,m as Ga,n as Xa,o as Vt,q as Ja,t as Wa}from"../chunks/CDvTZHxs.js";import"../chunks/DsnmJJEf.js";import{s as k,o as Ya}from"../chunks/BVtKIfkr.js";import{a$ as Za,aT as $a,u as er,r as tr,h as ar,k as pt,be as rr,ba as lt,K as Ke,X as I,y as ke,a4 as qe,z as r,v as e,Z as Xe,_ as ze,Q as b,R as Ge,M as p,V as i,Y as a,al as ot,T as o,bf as gt,O as D,aW as O,aX as nr,a0 as ir,bg as ua,N as or,bh as lr,$ as dr}from"../chunks/B_N74zmh.js";import{p as me,i as j}from"../chunks/DOwogY83.js";import{r as Ze,s as Te,b as ct,a as Qe,c as sr}from"../chunks/CxGUFWFB.js";function Ce(n,t,d=t){var v=new WeakSet;Za(n,"input",async c=>{var u=c?n.defaultValue:n.value;if(u=Pt(n)?Qt(u):u,d(u),pt!==null&&v.add(pt),await $a(),u!==(u=t())){var g=n.selectionStart,h=n.selectionEnd;n.value=u??"",h!==null&&(n.selectionStart=g,n.selectionEnd=Math.min(h,n.value.length))}}),(ar&&n.defaultValue!==n.value||er(t)==null&&n.value)&&(d(Pt(n)?Qt(n.value):n.value),pt!==null&&v.add(pt)),tr(()=>{var c=t();if(n===document.activeElement){var u=rr??pt;if(v.has(u))return}Pt(n)&&c===Qt(n.value)||n.type==="date"&&!c&&!n.value||c!==n.value&&(n.value=c??"")})}function Pt(n){var t=n.type;return t==="number"||t==="range"}function Qt(n){return n===""?null:+n}const ha={},ur=qa.separatingFunctions;for(const n of ur)ha[n.shortName]=n;const cr=Object.values(ha),gr=()=>{const n=jt.map(u=>u.name),t=Pa.map(u=>({id:u.id,title:u.title,bibtex:u.bibtex})),d=new Map;for(const u of jt)if(u.tags)for(const g of u.tags)d.has(g.label)||d.set(g.label,{label:g.label,color:g.color});const v=Array.from(d.values()),c=cr.map(u=>({shortName:u.shortName,name:u.name,description:u.description}));return{existingLanguageIds:n,existingReferences:t,existingSeparatingFunctions:c,existingTags:v,languages:jt,queries:Va,transformations:Ua,complexityOptions:Ba,adjacencyMatrix:za,relationTypes:Qa}},vr=!1,Si=Object.freeze(Object.defineProperty({__proto__:null,load:gr,prerender:vr},Symbol.toStringTag,{value:"Module"}));async function fr(n,t,d,v,c,u,g,h,x,w,R,y){if(!e(t).trim()||!e(d).trim()||!e(v).trim()){r(c,"Please fill out all required fields.");return}try{const U=await u.onAdd({name:e(t).trim(),fullName:e(d).trim(),description:e(v).trim(),descriptionRefs:e(g),queries:e(h),transformations:e(x),tags:e(w),existingReferences:e(R)}),V=U&&typeof U=="object"&&"success"in U?U:void 0;if(V&&!V.success){r(c,V.error??"Unable to add language. Please review your input.",!0);return}r(c,null),y(),u.onClose?.()}catch(U){r(c,U instanceof Error?U.message:"Unexpected error while adding the language.",!0)}}function ca(n,t,d){t(),d.onClose()}var br=n=>n.stopPropagation(),xr=p('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),mr=(n,t,d)=>t(e(d).id),pr=p('<button type="button"> </button>'),_r=p('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),yr=p("<option> </option>"),hr=(n,t,d,v)=>t(e(d).code,e(v).id),wr=p('<button type="button"> </button>'),Er=p('<div class="mt-2 flex flex-wrap gap-1"></div>'),kr=p('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Rr=p("<option> </option>"),Ir=(n,t,d,v)=>t(e(d).code,e(v).id),Sr=p('<button type="button"> </button>'),Tr=p('<div class="mt-2 flex flex-wrap gap-1"></div>'),Fr=p('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Dr=(n,t,d)=>t(e(d)),Ar=p('<button type="button"> </button>'),Nr=p('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),Lr=p(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function ga(n,t){Ke(t,!0);let d=me(t,"isOpen",11,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"isEdit",3,!1),u=I(""),g=I(""),h=I(""),x=I(ke([])),w=I(ke({})),R=I(ke({})),y=I(ke([])),U=I(ke([])),V=I(null);qe(()=>{d()&&c()&&t.initialData&&(r(u,t.initialData.name,!0),r(g,t.initialData.fullName,!0),r(h,t.initialData.description,!0),r(x,[...t.initialData.descriptionRefs],!0),r(w,{...t.initialData.queries},!0),r(R,{...t.initialData.transformations},!0),r(y,[...t.initialData.tags],!0),r(U,[...t.initialData.existingReferences],!0),r(V,null))});function E(){r(u,""),r(g,""),r(h,""),r(x,[],!0),r(w,{},!0),r(R,{},!0),r(y,[],!0),r(U,[],!0),r(X,!1),r(W,!1),r(V,null)}function F(T){e(x).includes(T)?r(x,e(x).filter(f=>f!==T),!0):r(x,[...e(x),T],!0)}function C(T){e(y).some(f=>f.label===T.label)?r(y,e(y).filter(f=>f.label!==T.label),!0):r(y,[...e(y),T],!0)}function G(T,f){if(!e(w)[T])return;const _=e(w)[T].refs;_.includes(f)?e(w)[T].refs=_.filter(S=>S!==f):e(w)[T].refs=[..._,f],r(w,{...e(w)},!0)}function ae(T,f){if(!e(R)[T])return;const _=e(R)[T].refs;_.includes(f)?e(R)[T].refs=_.filter(S=>S!==f):e(R)[T].refs=[..._,f],r(R,{...e(R)},!0)}let X=I(!1),W=I(!1);qe(()=>{if(t.queries.length>0&&!e(X)){const T={};t.queries.forEach(f=>{if(c()&&t.initialData&&t.initialData.queries[f.code]){const _=t.initialData.queries[f.code];T[f.code]={complexity:_.complexity,note:_.note||"",refs:[..._.refs]}}else T[f.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(w,T,!0),r(X,!0)}}),qe(()=>{if(t.transformations.length>0&&!e(W)){const T={};t.transformations.forEach(f=>{if(c()&&t.initialData){let _=t.initialData.transformations[f.code];if(!_){const S=Object.keys(t.initialData.transformations).find(P=>t.initialData.transformations[P]!==void 0&&(P===f.code||f.code==="∧C"&&P==="AND_C"||f.code==="∧BC"&&P==="AND_BC"||f.code==="∨C"&&P==="OR_C"||f.code==="∨BC"&&P==="OR_BC"||f.code==="¬C"&&P==="NOT_C"));S&&(_=t.initialData.transformations[S])}T[f.code]=_?{complexity:_.complexity,note:_.note||"",refs:[..._.refs]}:{complexity:"unknown-to-us",note:"",refs:[]}}else T[f.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(R,T,!0),r(W,!0)}});var de=Xe(),se=ze(de);{var ne=T=>{var f=Lr();f.__click=[ca,E,t];var _=i(f);_.__click=[br];var S=i(_),P=i(S),q=i(P);a(P),ot(2),a(S);var Q=o(S,2),K=i(Q);{var A=Y=>{var N=xr(),Ie=i(N,!0);a(N),D(()=>k(Ie,e(V))),b(Y,N)};j(K,Y=>{e(V)&&Y(A)})}var z=o(K,2),H=o(i(z),2),J=i(H),$=o(i(J),2);Ze($),a(J);var we=o(J,2),fe=o(i(we),2);Ze(fe),a(we),a(H);var ee=o(H,2),ie=o(i(ee),2);gt(ie),a(ee);var Re=o(ee,2);{var ve=Y=>{var N=_r(),Ie=o(i(N),2);ce(Ie,21,v,ge,(Be,Fe)=>{var pe=pr();pe.__click=[mr,F,Fe];var je=i(pe,!0);a(pe),D(De=>{Qe(pe,1,De),Te(pe,"title",e(Fe).title),k(je,e(Fe).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(Fe).id)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),b(Be,pe)}),a(Ie),a(N),b(Y,N)};j(Re,Y=>{v().length>0&&Y(ve)})}a(z);var be=o(z,2),re=o(i(be),2);ce(re,21,()=>t.queries,ge,(Y,N)=>{var Ie=Xe(),Be=ze(Ie);{var Fe=pe=>{var je=kr(),De=i(je),Ue=i(De),Ve=i(Ue),vt=i(Ve,!0);a(Ve);var He=o(Ve,2);ce(He,21,()=>t.complexityOptions,ge,(Ee,Ae)=>{var Ne=yr(),Me=i(Ne,!0);a(Ne);var he={};D(()=>{k(Me,e(Ae).label),he!==(he=e(Ae).value)&&(Ne.value=(Ne.__value=e(Ae).value)??"")}),b(Ee,Ne)}),a(He),a(Ue);var tt=o(Ue,2),at=i(tt),Je=o(at,2);Ze(Je),a(tt),a(De);var ft=o(De,2);{var dt=Ee=>{var Ae=Er();ce(Ae,21,v,ge,(Ne,Me)=>{var he=wr();he.__click=[hr,G,N,Me];var rt=i(he,!0);a(he),D(st=>{Qe(he,1,st),Te(he,"title",e(Me).title),k(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(w)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Ne,he)}),a(Ae),b(Ee,Ae)};j(ft,Ee=>{v().length>0&&Ee(dt)})}a(je),D(()=>{Te(Ve,"for",`query-${e(N).code??""}-complexity`),k(vt,e(N).name),Te(He,"id",`query-${e(N).code??""}-complexity`),Te(at,"for",`query-${e(N).code??""}-note`),Te(Je,"id",`query-${e(N).code??""}-note`)}),ct(He,()=>e(w)[e(N).code].complexity,Ee=>e(w)[e(N).code].complexity=Ee),Ce(Je,()=>e(w)[e(N).code].note,Ee=>e(w)[e(N).code].note=Ee),b(pe,je)};j(Be,pe=>{e(w)[e(N).code]&&pe(Fe)})}b(Y,Ie)}),a(re),a(be);var ue=o(be,2),Se=o(i(ue),2);ce(Se,21,()=>t.transformations,ge,(Y,N)=>{var Ie=Xe(),Be=ze(Ie);{var Fe=pe=>{var je=Fr(),De=i(je),Ue=i(De),Ve=i(Ue),vt=i(Ve,!0);a(Ve);var He=o(Ve,2);ce(He,21,()=>t.complexityOptions,ge,(Ee,Ae)=>{var Ne=Rr(),Me=i(Ne,!0);a(Ne);var he={};D(()=>{k(Me,e(Ae).label),he!==(he=e(Ae).value)&&(Ne.value=(Ne.__value=e(Ae).value)??"")}),b(Ee,Ne)}),a(He),a(Ue);var tt=o(Ue,2),at=i(tt),Je=o(at,2);Ze(Je),a(tt),a(De);var ft=o(De,2);{var dt=Ee=>{var Ae=Tr();ce(Ae,21,v,ge,(Ne,Me)=>{var he=Sr();he.__click=[Ir,ae,N,Me];var rt=i(he,!0);a(he),D(st=>{Qe(he,1,st),Te(he,"title",e(Me).title),k(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(R)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Ne,he)}),a(Ae),b(Ee,Ae)};j(ft,Ee=>{v().length>0&&Ee(dt)})}a(je),D(()=>{Te(Ve,"for",`transform-${e(N).code??""}-complexity`),k(vt,e(N).name),Te(He,"id",`transform-${e(N).code??""}-complexity`),Te(at,"for",`transform-${e(N).code??""}-note`),Te(Je,"id",`transform-${e(N).code??""}-note`)}),ct(He,()=>e(R)[e(N).code].complexity,Ee=>e(R)[e(N).code].complexity=Ee),Ce(Je,()=>e(R)[e(N).code].note,Ee=>e(R)[e(N).code].note=Ee),b(pe,je)};j(Be,pe=>{e(R)[e(N).code]&&pe(Fe)})}b(Y,Ie)}),a(Se),a(ue);var Z=o(ue,2);{var le=Y=>{var N=Nr(),Ie=o(i(N),2);ce(Ie,21,()=>t.existingTags,ge,(Be,Fe)=>{var pe=Ar();pe.__click=[Dr,C,Fe];var je=i(pe,!0);a(pe),D((De,Ue)=>{Qe(pe,1,De),sr(pe,`background-color: ${e(Fe).color??""}; color: white; ${Ue??""}`),k(je,e(Fe).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(y).some(De=>De.label===e(Fe).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(y).some(De=>De.label===e(Fe).label)?`ring-color: ${e(Fe).color};`:""]),b(Be,pe)}),a(Ie),a(N),b(Y,N)};j(Z,Y=>{t.existingTags.length>0&&Y(le)})}var te=o(Z,2),Oe=i(te);Oe.__click=[ca,E,t];var xe=o(Oe,2);xe.__click=[fr,u,g,h,V,t,x,w,R,y,U,E];var ye=i(xe);a(xe),a(te),a(Q),a(_),a(f),D(Y=>{k(q,`${c()?"Edit":"Add New"} Language`),xe.disabled=Y,k(ye,`${c()?"Update":"Add"} Language`)},[()=>!e(u).trim()||!e(g).trim()||!e(h).trim()]),Ce($,()=>e(u),Y=>r(u,Y)),Ce(fe,()=>e(g),Y=>r(g,Y)),Ce(ie,()=>e(h),Y=>r(h,Y)),b(T,f)};j(se,T=>{d()&&T(ne)})}b(n,de),Ge()}lt(["click"]);function Or(n,t,d,v,c,u,g){!e(t).trim()||!e(d).trim()||(v.onAdd({bibtex:e(t).trim(),title:e(d).trim(),href:e(c).trim()||"#"}),u(),g(!1))}function va(n,t,d,v){t()||d(),v.onClose()}var Mr=n=>n.stopPropagation(),Cr=(n,t)=>r(t,!e(t)),jr=p('<div class="space-y-3"><div><label for="title-input" class="block text-xs font-medium text-gray-600 mb-1">Display Title (IEEE format)</label> <textarea id="title-input" rows="2" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></textarea></div> <div><label for="href-input" class="block text-xs font-medium text-gray-600 mb-1">URL</label> <input id="href-input" type="url" placeholder="https://..." class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"/></div></div>'),qr=p('<a target="_blank" rel="noreferrer noopener" class="text-xs text-blue-600 hover:underline mt-1 block truncate"> </a>'),Pr=p('<p class="text-sm text-gray-800"> </p> <!>',1),Qr=p('<div class="bg-gray-50 border border-gray-200 rounded-lg p-4"><div class="flex items-center justify-between mb-2"><h4 class="text-sm font-semibold text-gray-700">Preview</h4> <button type="button" class="text-xs text-purple-600 hover:text-purple-800 font-medium"> </button></div> <!></div>'),zr=p('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="6" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Br(n,t){Ke(t,!0);let d=me(t,"isOpen",15,!1),v=me(t,"isEditMode",3,!1),c=I(ke(t.initialValue?.bibtex??"")),u=I(ke(t.initialValue?.title??"")),g=I(ke(t.initialValue?.href??"")),h=I(!1);qe(()=>{d()&&t.initialValue&&(r(c,t.initialValue.bibtex,!0),r(u,t.initialValue.title,!0),r(g,t.initialValue.href,!0))});const x=O(()=>{if(!e(c).trim())return null;try{return Ha(e(c))}catch{return null}});qe(()=>{e(x)&&!e(h)&&(r(u,e(x).title,!0),r(g,e(x).href,!0))});const w=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;function R(){r(c,""),r(u,""),r(g,""),r(h,!1)}var y=Xe(),U=ze(y);{var V=E=>{var F=zr();F.__click=[va,v,R,t];var C=i(F);C.__click=[Mr];var G=i(C),ae=i(G),X=i(ae,!0);a(ae);var W=o(ae,2),de=i(W,!0);a(W),a(G);var se=o(G,2),ne=i(se),T=o(i(ne),2);gt(T),Te(T,"placeholder",w),ot(2),a(ne);var f=o(ne,2);{var _=K=>{var A=Qr(),z=i(A),H=o(i(z),2);H.__click=[Cr,h];var J=i(H);a(H),a(z);var $=o(z,2);{var we=ee=>{var ie=jr(),Re=i(ie),ve=o(i(Re),2);gt(ve),a(Re);var be=o(Re,2),re=o(i(be),2);Ze(re),a(be),a(ie),Ce(ve,()=>e(u),ue=>r(u,ue)),Ce(re,()=>e(g),ue=>r(g,ue)),b(ee,ie)},fe=ee=>{var ie=Pr(),Re=ze(ie),ve=i(Re,!0);a(Re);var be=o(Re,2);{var re=ue=>{var Se=qr(),Z=i(Se,!0);a(Se),D(()=>{Te(Se,"href",e(g)),k(Z,e(g))}),b(ue,Se)};j(be,ue=>{e(g)&&e(g)!=="#"&&ue(re)})}D(()=>k(ve,e(u)||e(x).title)),b(ee,ie)};j($,ee=>{e(h)?ee(we):ee(fe,!1)})}a(A),D(()=>k(J,`${e(h)?"Hide":"Edit"} details`)),b(K,A)};j(f,K=>{e(x)&&K(_)})}var S=o(f,2),P=i(S);P.__click=[va,v,R,t];var q=o(P,2);q.__click=[Or,c,u,t,g,R,d];var Q=i(q,!0);a(q),a(S),a(se),a(C),a(F),D(K=>{k(X,v()?"Edit Reference":"Add New Reference"),k(de,v()?"Update citation details":"Paste BibTeX citation"),q.disabled=K,k(Q,v()?"Update Reference":"Add Reference")},[()=>!e(c).trim()||!e(u).trim()]),Ce(T,()=>e(c),K=>r(c,K)),b(E,F)};j(U,E=>{d()&&E(V)})}b(n,y),Ge()}lt(["click"]);function Ur(n,t,d,v,c,u,g,h,x){!e(t).trim()||!e(d).trim()||(v.onAdd({shortName:e(t).trim(),name:e(d).trim(),description:e(c).trim(),refs:e(u)}),g()||h(),x(!1))}function fa(n,t,d,v){t()||d(),v.onClose()}var Vr=n=>n.stopPropagation(),Hr=(n,t,d)=>t(e(d).id),Kr=p('<button type="button"> </button>'),Gr=p('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Xr=p('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-orange-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="sf-shortName" class="block text-sm font-medium text-gray-700 mb-2">Short Name <span class="text-red-500">*</span></label> <input id="sf-shortName" type="text" placeholder="e.g., Clique" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Brief label displayed on edges (e.g., "Clique", "PI")</p></div> <div><label for="sf-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name <span class="text-red-500">*</span></label> <input id="sf-name" type="text" placeholder="e.g., Clique Detection Instances" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Full human-readable name</p></div> <div><label for="sf-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="sf-description" rows="3" placeholder="Describe what this function separates..." class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-y"></textarea></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Jr(n,t){Ke(t,!0);let d=me(t,"isOpen",15,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"isEditMode",3,!1),u=I(""),g=I(""),h=I(""),x=I(ke([]));qe(()=>{d()&&t.initialValue&&(r(u,t.initialValue.shortName,!0),r(g,t.initialValue.name,!0),r(h,t.initialValue.description,!0),r(x,[...t.initialValue.refs],!0))});function w(){r(u,""),r(g,""),r(h,""),r(x,[],!0)}function R(E){e(x).includes(E)?r(x,e(x).filter(F=>F!==E),!0):r(x,[...e(x),E],!0)}var y=Xe(),U=ze(y);{var V=E=>{var F=Xr();F.__click=[fa,c,w,t];var C=i(F);C.__click=[Vr];var G=i(C),ae=i(G),X=i(ae,!0);a(ae);var W=o(ae,2),de=i(W,!0);a(W),a(G);var se=o(G,2),ne=i(se),T=o(i(ne),2);Ze(T),ot(2),a(ne);var f=o(ne,2),_=o(i(f),2);Ze(_),ot(2),a(f);var S=o(f,2),P=o(i(S),2);gt(P),a(S);var q=o(S,2);{var Q=J=>{var $=Gr(),we=o(i($),2);ce(we,21,v,ge,(fe,ee)=>{var ie=Kr();ie.__click=[Hr,R,ee];var Re=i(ie,!0);a(ie),D(ve=>{Qe(ie,1,ve),Te(ie,"title",e(ee).title),k(Re,e(ee).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(ee).id)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(fe,ie)}),a(we),a($),b(J,$)};j(q,J=>{v().length>0&&J(Q)})}var K=o(q,2),A=i(K);A.__click=[fa,c,w,t];var z=o(A,2);z.__click=[Ur,u,g,t,h,x,c,w,d];var H=i(z,!0);a(z),a(K),a(se),a(C),a(F),D(J=>{k(X,c()?"Edit Separating Function":"Add New Separating Function"),k(de,c()?"Update separating function details":"Define a new separating function"),z.disabled=J,k(H,c()?"Update Function":"Add Function")},[()=>!e(u).trim()||!e(g).trim()]),Ce(T,()=>e(u),J=>r(u,J)),Ce(_,()=>e(g),J=>r(g,J)),Ce(P,()=>e(h),J=>r(h,J)),b(E,F)};j(U,E=>{d()&&E(V)})}b(n,y),Ge()}lt(["click"]);function Wr(n,t,d,v,c,u,g,h,x,w){!e(t)||!e(d)||!e(v)||e(t)===e(d)||(c.onSave({sourceId:e(t),targetId:e(d),status:e(v),description:e(u)||void 0,refs:e(g),separatingFunctionIds:e(h).length>0?e(h):void 0}),x(),w(!1))}function ba(n,t,d){t(),d.onClose()}var Yr=n=>n.stopPropagation(),Zr=p("<option> </option>"),$r=p("<option> </option>"),en=p("<option> </option>"),tn=p('<p class="text-xs text-gray-500 mt-1"> </p>'),an=(n,t,d)=>t(e(d).id),rn=p('<button type="button"> </button>'),nn=p('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),on=(n,t,d)=>t(e(d).shortName),ln=p('<button type="button"> </button>'),dn=p('<p class="text-xs text-gray-500 mt-2"> </p>'),sn=p('<fieldset class="border-t pt-4"><legend class="block text-sm font-medium text-gray-700 mb-2">Separating Functions (optional)</legend> <div class="flex flex-wrap gap-2"></div> <!></fieldset>'),un=p('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <!> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function cn(n,t){Ke(t,!0);let d=me(t,"isOpen",15,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"availableSeparatingFunctions",19,()=>[]),u=me(t,"baselineRelations",19,()=>new Map),g=I(""),h=I(""),x=I(""),w=I(""),R=I(ke([])),y=I(ke([])),U=I(!1);qe(()=>{d()&&t.initialData?(r(U,!0),r(g,t.initialData.sourceId,!0),r(h,t.initialData.targetId,!0),r(x,t.initialData.status,!0),r(w,t.initialData.description||"",!0),r(R,[...t.initialData.refs],!0),r(y,t.initialData.separatingFunctionIds?[...t.initialData.separatingFunctionIds]:[],!0)):d()&&!t.initialData&&r(U,!1)}),qe(()=>{if(!e(U)&&e(g)&&e(h)&&e(g)!==e(h)){const X=`${e(g)}->${e(h)}`,W=u().get(X);W?(r(x,W.status,!0),r(w,W.description||"",!0),r(R,[...W.refs],!0),r(y,W.separatingFunctionIds?[...W.separatingFunctionIds]:[],!0)):(r(x,""),r(w,""),r(R,[],!0),r(y,[],!0))}});function V(){r(g,""),r(h,""),r(x,""),r(w,""),r(R,[],!0),r(y,[],!0),r(U,!1)}function E(X){e(R).includes(X)?r(R,e(R).filter(W=>W!==X),!0):r(R,[...e(R),X],!0)}function F(X){e(y).includes(X)?r(y,e(y).filter(W=>W!==X),!0):r(y,[...e(y),X],!0)}var C=Xe(),G=ze(C);{var ae=X=>{var W=un();W.__click=[ba,V,t];var de=i(W);de.__click=[Yr];var se=o(i(de),2),ne=i(se),T=i(ne),f=o(i(T),2),_=i(f);_.value=_.__value="";var S=o(_);ce(S,17,()=>t.languages,ge,(Z,le)=>{var te=Zr(),Oe=i(te,!0);a(te);var xe={};D(()=>{k(Oe,e(le).name),xe!==(xe=e(le).id)&&(te.value=(te.__value=e(le).id)??"")}),b(Z,te)}),a(f),a(T);var P=o(T,2),q=o(i(P),2),Q=i(q);Q.value=Q.__value="";var K=o(Q);ce(K,17,()=>t.languages,ge,(Z,le)=>{var te=$r(),Oe=i(te,!0);a(te);var xe={};D(()=>{te.disabled=e(le).id===e(g),k(Oe,e(le).name),xe!==(xe=e(le).id)&&(te.value=(te.__value=e(le).id)??"")}),b(Z,te)}),a(q),a(P),a(ne);var A=o(ne,2),z=o(i(A),2),H=i(z);H.value=H.__value="";var J=o(H);ce(J,17,()=>t.statusOptions,ge,(Z,le)=>{var te=en(),Oe=i(te,!0);a(te);var xe={};D(()=>{k(Oe,e(le).label),xe!==(xe=e(le).value)&&(te.value=(te.__value=e(le).value)??"")}),b(Z,te)}),a(z);var $=o(z,2);{var we=Z=>{const le=O(()=>t.statusOptions.find(ye=>ye.value===e(x)));var te=Xe(),Oe=ze(te);{var xe=ye=>{var Y=tn(),N=i(Y,!0);a(Y),D(()=>k(N,e(le).description)),b(ye,Y)};j(Oe,ye=>{e(le)&&ye(xe)})}b(Z,te)};j($,Z=>{e(x)&&Z(we)})}a(A);var fe=o(A,2),ee=o(i(fe),2);gt(ee),a(fe);var ie=o(fe,2);{var Re=Z=>{var le=nn(),te=o(i(le),2);ce(te,21,v,ge,(Oe,xe)=>{var ye=rn();ye.__click=[an,E,xe];var Y=i(ye,!0);a(ye),D(N=>{Qe(ye,1,N),Te(ye,"title",e(xe).title),k(Y,e(xe).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(R).includes(e(xe).id)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),b(Oe,ye)}),a(te),a(le),b(Z,le)};j(ie,Z=>{v().length>0&&Z(Re)})}var ve=o(ie,2);{var be=Z=>{var le=sn(),te=o(i(le),2);ce(te,21,c,ge,(ye,Y)=>{var N=ln();N.__click=[on,F,Y];var Ie=i(N,!0);a(N),D(Be=>{Qe(N,1,Be),Te(N,"title",e(Y).name),k(Ie,e(Y).shortName)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(y).includes(e(Y).shortName)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(ye,N)}),a(te);var Oe=o(te,2);{var xe=ye=>{var Y=dn(),N=i(Y);a(Y),D(Ie=>k(N,`Selected: ${Ie??""}`),[()=>e(y).join(", ")]),b(ye,Y)};j(Oe,ye=>{e(y).length>0&&ye(xe)})}a(le),b(Z,le)};j(ve,Z=>{c().length>0&&Z(be)})}var re=o(ve,2),ue=i(re);ue.__click=[ba,V,t];var Se=o(ue,2);Se.__click=[Wr,g,h,x,t,w,R,y,V,d],a(re),a(se),a(de),a(W),D(()=>Se.disabled=!e(g)||!e(h)||!e(x)||e(g)===e(h)),ct(f,()=>e(g),Z=>r(g,Z)),ct(q,()=>e(h),Z=>r(h,Z)),ct(z,()=>e(x),Z=>r(x,Z)),Ce(ee,()=>e(w),Z=>r(w,Z)),b(X,W)};j(G,X=>{d()&&X(ae)})}b(n,C),Ge()}lt(["click"]);function $e(n,t){return`${n}->${t}`}function xa(n,t=!1){const d={};if(n)for(const[v,c]of Object.entries(n)){const u=t?Ka(v):v;d[u]={complexity:c.complexity,note:c.note,refs:Array.isArray(c.refs)?[...c.refs]:[]}}return d}function gn(n){const t=new Map,{languageIds:d,matrix:v}=n;for(let c=0;c<d.length;c++)for(let u=0;u<d.length;u++){const g=v[c][u];if(g){const h=d[c],x=d[u],w=g.separatingFunctionIds&&Array.isArray(g.separatingFunctionIds)?[...g.separatingFunctionIds]:void 0;t.set($e(h,x),{status:g.status,description:g.description,refs:g.refs?[...g.refs]:[],separatingFunctionIds:w,derived:g.derived})}}return t}function Rt(n,t){const d=new Set(n.map(u=>u.id)),v=n.map(u=>({id:u.id,title:u.title,bibtex:u.bibtex})),c=t.map(u=>{const g=wt(u.bibtex,d);return d.add(g),{id:g,title:u.title,bibtex:u.bibtex}});return[...v,...c]}function ma(n,t,d){const v=n.map(g=>({id:g.id,name:g.name})),c=t.map(g=>({id:Ut(g.name),name:g.name})),u=d.map(g=>({id:Ut(g.name),name:g.name}));return[...v,...c,...u]}function vn(n){return{name:n.name,fullName:n.fullName||"",description:n.description||"",descriptionRefs:n.descriptionRefs||[],queries:n.properties?.queries||{},transformations:n.properties?.transformations||{},tags:(n.tags||[]).map(t=>({...t,color:t.color||"#6366f1"})),existingReferences:n.references?.map(t=>t.id)||[]}}function fn(n,t){const d=n.map(c=>({shortName:c.shortName,name:c.name,description:c.description})),v=t.map(c=>({shortName:c.shortName,name:c.name,description:c.description}));return[...d,...v]}var bn=p('<span class="text-sm font-bold text-gray-900"> </span>'),xn=p('<span class="text-sm text-gray-600">( <!> )</span>'),mn=(n,t)=>t.onToggleExpand(t.index),pn=(n,t)=>t.onEdit(t.index),_n=(n,t)=>t.onDelete(t.index),yn=p("<div><!></div>"),hn=p('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function It(n,t){Ke(t,!0);let d=me(t,"colorScheme",3,"purple"),v=me(t,"isExpanded",3,!1),c=me(t,"renderMathTitle",3,!0),u=me(t,"renderMathSubtitle",3,!0);const h={purple:{border:"border-purple-300",bg:"bg-purple-50",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300",divider:"border-purple-200"},orange:{border:"border-orange-300",bg:"bg-orange-50",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200 text-orange-800 border-orange-300",divider:"border-orange-200"},green:{border:"border-green-300",bg:"bg-green-50",text:"text-green-800",button:"bg-green-100 hover:bg-green-200 text-green-800 border-green-300",divider:"border-green-200"},yellow:{border:"border-yellow-300",bg:"bg-yellow-50",text:"text-yellow-800",button:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300",divider:"border-yellow-200"},blue:{border:"border-blue-300",bg:"bg-blue-50",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200 text-blue-800 border-blue-300",divider:"border-blue-200"}}[d()];var x=hn(),w=i(x),R=i(w),y=i(R),U=i(y);a(y);var V=o(y,2);{var E=f=>{Pe(f,{get text(){return t.title},className:"text-sm font-bold text-gray-900"})},F=f=>{var _=bn(),S=i(_,!0);a(_),D(()=>k(S,t.title)),b(f,_)};j(V,f=>{c()?f(E):f(F,!1)})}var C=o(V,2);{var G=f=>{var _=xn(),S=o(i(_));{var P=Q=>{Pe(Q,{get text(){return t.subtitle},className:"inline"})},q=Q=>{var K=nr();D(()=>k(K,t.subtitle)),b(Q,K)};j(S,Q=>{u()?Q(P):Q(q,!1)})}ot(),a(_),b(f,_)};j(C,f=>{t.subtitle&&f(G)})}a(R);var ae=o(R,2),X=i(ae);X.__click=[mn,t];var W=i(X,!0);a(X);var de=o(X,2);de.__click=[pn,t];var se=o(de,2);se.__click=[_n,t],a(ae),a(w);var ne=o(w,2);{var T=f=>{var _=yn(),S=i(_);{var P=q=>{var Q=Xe(),K=ze(Q);ir(K,()=>t.children),b(q,Q)};j(S,q=>{t.children&&q(P)})}a(_),D(()=>Qe(_,1,`mt-4 pt-4 border-t ${h.divider??""}`)),b(f,_)};j(ne,f=>{v()&&f(T)})}a(x),D(()=>{Qe(x,1,`border-2 ${h.border??""} ${h.bg??""} rounded-lg p-3`),Qe(y,1,`text-sm font-semibold ${h.text??""}`),k(U,`${t.type??""}:`),Qe(X,1,`px-2 py-1 text-xs ${h.button??""} rounded border`),Te(X,"aria-label",v()?"Collapse":"Expand"),k(W,v()?"Collapse":"Expand")}),b(n,x),Ge()}lt(["click"]);var wn=p('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),En=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),kn=p('<span class="inline-block bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs border border-gray-300"> </span>'),Rn=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),In=p('<div class="text-gray-500 text-xs"> </div>'),Sn=p('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),Tn=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Fn=p('<div class="text-gray-500 text-xs"> </div>'),Dn=p('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),An=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Nn=p('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div></div>'),Ln=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),On=p('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div> <!> <!> <!> <!> <!></div>');function pa(n,t){Ke(t,!0);let d=me(t,"isExpanded",3,!1),v=me(t,"isEdit",3,!1);const c=v()?"yellow":"green";{const u=h=>{var x=On(),w=i(x),R=o(i(w),2),y=i(R);Pe(y,{get text(){return t.language.fullName},className:"text-gray-900 block"}),a(R),a(w);var U=o(w,2),V=o(i(U),2),E=i(V);Pe(E,{get text(){return t.language.description},className:"text-gray-900 block"}),a(V),a(U);var F=o(U,2);{var C=f=>{var _=En(),S=i(_),P=i(S);a(S);var q=o(S,2);ce(q,21,()=>t.language.descriptionRefs,ge,(Q,K)=>{var A=wn(),z=i(A,!0);a(A),D(()=>k(z,e(K))),b(Q,A)}),a(q),a(_),D(()=>k(P,`Description References (${t.language.descriptionRefs.length??""}):`)),b(f,_)};j(F,f=>{t.language.descriptionRefs&&t.language.descriptionRefs.length>0&&f(C)})}var G=o(F,2);{var ae=f=>{var _=Rn(),S=i(_),P=i(S);a(S);var q=o(S,2);ce(q,21,()=>t.language.existingReferences,ge,(Q,K)=>{var A=kn(),z=i(A,!0);a(A),D(()=>k(z,e(K))),b(Q,A)}),a(q),a(_),D(()=>k(P,`Existing References (${t.language.existingReferences.length??""}):`)),b(f,_)};j(G,f=>{t.language.existingReferences&&t.language.existingReferences.length>0&&f(ae)})}var X=o(G,2);{var W=f=>{var _=Tn(),S=i(_),P=i(S);a(S);var q=o(S,2);ce(q,21,()=>Object.entries(t.language.queries),ge,(Q,K)=>{var A=O(()=>ua(e(K),2));let z=()=>e(A)[0],H=()=>e(A)[1];var J=Sn(),$=i(J),we=i($,!0);a($);var fe=o($,2),ee=i(fe,!0);a(fe);var ie=o(fe,2);{var Re=re=>{Pe(re,{get text(){return H().note},className:"text-gray-500 italic text-xs block"})};j(ie,re=>{H().note&&re(Re)})}var ve=o(ie,2);{var be=re=>{var ue=In(),Se=i(ue);a(ue),D(Z=>k(Se,`Refs: [${Z??""}]`),[()=>H().refs.join(", ")]),b(re,ue)};j(ve,re=>{H().refs.length>0&&re(be)})}a(J),D(()=>{k(we,z()),k(ee,H().complexity)}),b(Q,J)}),a(q),a(_),D(Q=>k(P,`Query Support (${Q??""}):`),[()=>Object.keys(t.language.queries).length]),b(f,_)};j(X,f=>{t.language.queries&&Object.keys(t.language.queries).length>0&&f(W)})}var de=o(X,2);{var se=f=>{var _=An(),S=i(_),P=i(S);a(S);var q=o(S,2);ce(q,21,()=>Object.entries(t.language.transformations),ge,(Q,K)=>{var A=O(()=>ua(e(K),2));let z=()=>e(A)[0],H=()=>e(A)[1];var J=Dn(),$=i(J),we=i($,!0);a($);var fe=o($,2),ee=i(fe,!0);a(fe);var ie=o(fe,2);{var Re=re=>{Pe(re,{get text(){return H().note},className:"text-gray-500 italic text-xs block"})};j(ie,re=>{H().note&&re(Re)})}var ve=o(ie,2);{var be=re=>{var ue=Fn(),Se=i(ue);a(ue),D(Z=>k(Se,`Refs: [${Z??""}]`),[()=>H().refs.join(", ")]),b(re,ue)};j(ve,re=>{H().refs.length>0&&re(be)})}a(J),D(()=>{k(we,z()),k(ee,H().complexity)}),b(Q,J)}),a(q),a(_),D(Q=>k(P,`Transformation Support (${Q??""}):`),[()=>Object.keys(t.language.transformations).length]),b(f,_)};j(de,f=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&f(se)})}var ne=o(de,2);{var T=f=>{var _=Ln(),S=i(_),P=i(S);a(S);var q=o(S,2);ce(q,21,()=>t.language.tags,ge,(Q,K)=>{var A=Nn(),z=i(A),H=i(z,!0);a(z);var J=o(z,2),$=i(J,!0);a(J),a(A),D(()=>{k(H,e(K).label),k($,e(K).description||"No description")}),b(Q,A)}),a(q),a(_),D(()=>k(P,`Tags (${t.language.tags.length??""}):`)),b(f,_)};j(ne,f=>{t.language.tags.length>0&&f(T)})}a(x),b(h,x)};let g=O(()=>v()?"Edit Language":"New Language");It(n,{get type(){return e(g)},get title(){return t.language.name},get subtitle(){return t.language.description},get colorScheme(){return c},get index(){return t.index},get isExpanded(){return d()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:u,$$slots:{default:!0}})}Ge()}var Mn=p('<div><div class="font-semibold text-gray-700 mb-1">URL:</div> <div class="bg-white p-2 rounded border"><a target="_blank" rel="noreferrer noopener" class="text-blue-600 hover:underline break-all"> </a></div></div>'),Cn=p('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Generated ID:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-purple-700"> </span></div></div> <div><div class="font-semibold text-gray-700 mb-1">Display Title:</div> <div class="bg-white p-2 rounded border text-gray-900"> </div></div> <!> <details><summary class="font-semibold text-gray-700 mb-1 cursor-pointer hover:text-gray-900">Raw BibTeX</summary> <pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto whitespace-pre-wrap mt-1"> </pre></details></div>');function jn(n,t){Ke(t,!0);let d=me(t,"existingReferenceIds",19,()=>[]),v=me(t,"isExpanded",3,!1);const c=wt(t.reference.bibtex,new Set(d()));{const u=h=>{var x=Cn(),w=i(x),R=o(i(w),2),y=i(R),U=i(y,!0);a(y),a(R),a(w);var V=o(w,2),E=o(i(V),2),F=i(E,!0);a(E),a(V);var C=o(V,2);{var G=de=>{var se=Mn(),ne=o(i(se),2),T=i(ne),f=i(T,!0);a(T),a(ne),a(se),D(()=>{Te(T,"href",t.reference.href),k(f,t.reference.href)}),b(de,se)};j(C,de=>{t.reference.href&&t.reference.href!=="#"&&de(G)})}var ae=o(C,2),X=o(i(ae),2),W=i(X,!0);a(X),a(ae),a(x),D(()=>{k(U,c),k(F,t.reference.title),k(W,t.reference.bibtex)}),b(h,x)};let g=O(()=>t.reference.title.slice(0,60)+(t.reference.title.length>60?"...":""));It(n,{type:"Reference",get title(){return c},get subtitle(){return e(g)},renderMathTitle:!1,renderMathSubtitle:!1,colorScheme:"purple",get index(){return t.index},get isExpanded(){return v()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:u,$$slots:{default:!0}})}Ge()}var qn=p('<div><span class="text-xs font-semibold text-gray-700">Description:</span> <!></div>'),Pn=p('<div><span class="text-xs font-semibold text-gray-700">References:</span> <span class="text-xs text-gray-600 ml-2"> </span></div>'),Qn=p('<div class="space-y-2"><div><span class="text-xs font-semibold text-gray-700">Short Name:</span> <!></div> <div><span class="text-xs font-semibold text-gray-700">Full Name:</span> <!></div> <!> <!></div>');function zn(n,t){Ke(t,!0),It(n,{type:"SF",get title(){return t.separatingFunction.shortName},get subtitle(){return t.separatingFunction.name},colorScheme:"orange",get index(){return t.index},get isExpanded(){return t.isExpanded},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:v=>{var c=Qn(),u=i(c),g=o(i(u),2);Pe(g,{get text(){return t.separatingFunction.shortName},className:"text-xs text-gray-900 ml-2 inline"}),a(u);var h=o(u,2),x=o(i(h),2);Pe(x,{get text(){return t.separatingFunction.name},className:"text-xs text-gray-900 ml-2 inline"}),a(h);var w=o(h,2);{var R=V=>{var E=qn(),F=o(i(E),2);Pe(F,{get text(){return t.separatingFunction.description},className:"text-xs text-gray-700 mt-1 block"}),a(E),b(V,E)};j(w,V=>{t.separatingFunction.description&&V(R)})}var y=o(w,2);{var U=V=>{var E=Pn(),F=o(i(E),2),C=i(F,!0);a(F),a(E),D(G=>k(C,G),[()=>t.separatingFunction.refs.join(", ")]),b(V,E)};j(y,V=>{t.separatingFunction.refs&&t.separatingFunction.refs.length>0&&V(U)})}a(c),b(v,c)},$$slots:{default:!0}}),Ge()}var Bn=p('<div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div>'),Un=p('<span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs border border-orange-300"> </span>'),Vn=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Hn=p('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),Kn=p('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Gn=p('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Source Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Target Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Classification:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!> <!></div>');function Xn(n,t){Ke(t,!0);let d=me(t,"isExpanded",3,!1),v=me(t,"isModified",3,!1);const c=new Map(t.languages.map(U=>[U.id,U.name])),u=$e(t.relationship.sourceId,t.relationship.targetId),g=c.get(t.relationship.sourceId)??t.relationship.sourceId,h=c.get(t.relationship.targetId)??t.relationship.targetId,x=`${g} → ${h}`;var w=Xe(),R=ze(w);{var y=U=>{It(U,{type:"Relationship",get title(){return x},get subtitle(){return t.relationship.status},colorScheme:"blue",get index(){return t.index},get isExpanded(){return d()},get onToggleExpand(){return t.onToggleExpand},onEdit:()=>t.onEdit(t.index),onDelete:()=>t.onDelete(t.index,u),children:E=>{var F=Gn(),C=i(F),G=o(i(C),2),ae=i(G);Pe(ae,{get text(){return g},className:"font-medium text-gray-900"}),a(G),a(C);var X=o(C,2),W=o(i(X),2),de=i(W);Pe(de,{get text(){return h},className:"font-medium text-gray-900"}),a(W),a(X);var se=o(X,2),ne=o(i(se),2),T=i(ne),f=i(T,!0);a(T),a(ne),a(se);var _=o(se,2);{var S=A=>{var z=Bn(),H=o(i(z),2),J=i(H);Pe(J,{get text(){return t.relationship.description},className:"text-gray-700"}),a(H),a(z),b(A,z)};j(_,A=>{t.relationship.description&&A(S)})}var P=o(_,2);{var q=A=>{var z=Vn(),H=i(z),J=i(H);a(H);var $=o(H,2);ce($,21,()=>t.relationship.separatingFunctionIds,ge,(we,fe)=>{var ee=Un(),ie=i(ee,!0);a(ee),D(()=>k(ie,e(fe))),b(we,ee)}),a($),a(z),D(()=>k(J,`Separating Functions (${t.relationship.separatingFunctionIds.length??""}):`)),b(A,z)};j(P,A=>{t.relationship.separatingFunctionIds&&t.relationship.separatingFunctionIds.length>0&&A(q)})}var Q=o(P,2);{var K=A=>{var z=Kn(),H=i(z),J=i(H);a(H);var $=o(H,2);ce($,21,()=>t.relationship.refs,ge,(we,fe)=>{var ee=Hn(),ie=i(ee,!0);a(ee),D(()=>k(ie,e(fe))),b(we,ee)}),a($),a(z),D(()=>k(J,`References (${t.relationship.refs.length??""}):`)),b(A,z)};j(Q,A=>{t.relationship.refs&&t.relationship.refs.length>0&&A(K)})}a(F),D(()=>k(f,t.relationship.status)),b(E,F)},$$slots:{default:!0}})};j(R,U=>{v()&&U(y)})}b(n,w),Ge()}var Jn=p('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),Wn=p(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!> <!></div></div>`);function Yn(n,t){Ke(t,!0);let d=me(t,"existingReferenceIds",19,()=>[]);const v=O(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.newSeparatingFunctions.length>0||t.relationships.filter(E=>t.modifiedRelations.has($e(E.sourceId,E.targetId))).length>0);function c(E){const F=[...d()],C=new Set(F);for(let G=0;G<E;G++){const ae=wt(t.newReferences[G].bibtex,C);F.push(ae),C.add(ae)}return F}var u=Wn(),g=o(i(u),4),h=i(g);ce(h,17,()=>t.newReferences,ge,(E,F,C)=>{{let G=O(()=>c(C)),ae=O(()=>t.expandedReferenceIndex===C);jn(E,{get reference(){return e(F)},index:C,get existingReferenceIds(){return e(G)},get isExpanded(){return e(ae)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var x=o(h,2);ce(x,17,()=>t.newSeparatingFunctions,ge,(E,F,C)=>{{let G=O(()=>t.expandedSeparatingFunctionIndex===C);zn(E,{get separatingFunction(){return e(F)},index:C,get isExpanded(){return e(G)},get onToggleExpand(){return t.onToggleExpandSeparatingFunction},get onEdit(){return t.onEditSeparatingFunction},get onDelete(){return t.onDeleteSeparatingFunction}})}});var w=o(x,2);ce(w,17,()=>t.languagesToAdd,ge,(E,F,C)=>{{let G=O(()=>t.expandedLanguageToAddIndex===C);pa(E,{get language(){return e(F)},index:C,get isExpanded(){return e(G)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var R=o(w,2);ce(R,17,()=>t.languagesToEdit,ge,(E,F,C)=>{{let G=O(()=>t.expandedLanguageToEditIndex===C);pa(E,{get language(){return e(F)},index:C,get isExpanded(){return e(G)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var y=o(R,2);ce(y,17,()=>t.relationships,ge,(E,F,C)=>{const G=O(()=>t.modifiedRelations.has($e(e(F).sourceId,e(F).targetId)));{let ae=O(()=>t.expandedRelationshipIndex===C);Xn(E,{get languages(){return t.languages},get relationship(){return e(F)},index:C,get isModified(){return e(G)},get isExpanded(){return e(ae)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var U=o(y,2);{var V=E=>{var F=Jn();b(E,F)};j(U,E=>{e(v)||E(V)})}a(g),a(u),b(n,u),Ge()}var Zn=p('<div class="grid grid-cols-2 md:grid-cols-5 gap-3"><button type="button" class="px-3 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">New Language</button> <button type="button" class="px-3 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">Edit Language</button> <button type="button" class="px-3 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Relationship</button> <button type="button" class="px-3 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">Reference</button> <button type="button" class="px-3 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors">Separator</button></div>');function $n(n,t){var d=Zn(),v=i(d);v.__click=function(...x){t.onAddLanguage?.apply(this,x)};var c=o(v,2);c.__click=function(...x){t.onEditLanguage?.apply(this,x)};var u=o(c,2);u.__click=function(...x){t.onManageRelationships?.apply(this,x)};var g=o(u,2);g.__click=function(...x){t.onAddReference?.apply(this,x)};var h=o(g,2);h.__click=function(...x){t.onAddSeparatingFunction?.apply(this,x)},a(d),b(n,d)}lt(["click"]);var ei=p('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function ti(n,t){let d=me(t,"disabled",3,!1);var v=ei(),c=i(v);ot(2),a(v),D(()=>c.disabled=d()),b(n,v)}function et(n){return typeof n=="string"}function wa(n){return Array.isArray(n)?n.filter(et):[]}function ai(n){return Array.isArray(n)?n.filter(t=>typeof t=="object"&&t!==null).map(t=>({label:et(t.label)?t.label:"",color:et(t.color)?t.color:"#6366f1",description:et(t.description)?t.description:void 0,refs:wa(t.refs)})):[]}function _a(n){return!et(n)||n.length===0||!/^[a-z0-9-]+$/i.test(n)?null:n}function Ye(n){return{name:n.name,fullName:n.fullName,description:n.description,descriptionRefs:[...n.descriptionRefs],queries:xa(n.queries),transformations:xa(n.transformations),tags:n.tags.map(t=>({label:t.label,color:t.color,description:t.description,refs:[...t.refs]})),existingReferences:[...n.existingReferences]}}function it(n){return{sourceId:n.sourceId,targetId:n.targetId,status:n.status,description:n.description,refs:[...n.refs],separatingFunctionIds:n.separatingFunctionIds?[...n.separatingFunctionIds]:void 0}}function ht(n){return{shortName:n.shortName,name:n.name,description:n.description,refs:[...n.refs]}}function zt(n){return{label:n.label,color:n.color,description:n.description,refs:[...n.refs]}}function Bt(n){switch(n.kind){case"language:new":case"language:edit":return{id:n.id,kind:n.kind,payload:Ye(n.payload)};case"relationship":return{id:n.id,kind:n.kind,payload:it(n.payload)};case"reference":return{id:n.id,kind:n.kind,payload:n.payload};case"separator":return{id:n.id,kind:n.kind,payload:ht(n.payload)}}}function _t(){const n=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`${n}-${t}`}function yt(){return`q-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,6)}`}function ri(n){const t=new Date(n),d=t.toLocaleString("en-US",{month:"short"}),v=t.getDate(),c=t.getFullYear(),u=t.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${d} ${v}, ${c} at ${u}`}function ni(n){const t=[];return n.summary.languagesToAdd&&t.push(`${n.summary.languagesToAdd} new language${n.summary.languagesToAdd===1?"":"s"}`),n.summary.languagesToEdit&&t.push(`${n.summary.languagesToEdit} edit${n.summary.languagesToEdit===1?"":"s"}`),n.summary.relationships&&t.push(`${n.summary.relationships} relation${n.summary.relationships===1?"":"s"}`),n.summary.newReferences&&t.push(`${n.summary.newReferences} reference${n.summary.newReferences===1?"":"s"}`),t.length>0?t.join(" · "):"No changes"}function ya(n,t,d){const v=!e(t);r(t,v),v&&r(d,Vt(),!0)}function ii(n,t){r(t,null)}var oi=p('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),li=p('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),di=p('<div class="text-xs font-medium text-amber-600">Superseded</div>'),si=p('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),ui=(n,t,d)=>t(e(d)),ci=p('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),gi=p('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),vi=p('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),fi=(n,t)=>r(t,!1),bi=n=>n.stopPropagation(),xi=p("<option> </option>"),mi=(n,t,d)=>{r(t,""),r(d,!1)},pi=(n,t,d,v)=>{e(t)&&(r(d,!1),r(v,!0))},_i=p('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),yi=p('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">🗂️</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!> <!>',1);function Ti(n,t){Ke(t,!0);function d(l){r(y,[...e(y),l],!0)}function v(l,s,m){r(y,e(y).map(B=>B.id===l&&B.kind===s?{...B,payload:m}:B),!0)}function c(l){r(y,e(y).filter(s=>s.id!==l),!0)}const u=Object.values(t.data.complexityOptions).filter(l=>!l.internal),g=t.data.relationTypes.filter(l=>!t.data.complexityOptions[l.id]?.internal).map(l=>({value:l.id,label:l.name,description:l.description??""})),h=gn(t.data.adjacencyMatrix);let x=I(""),w=I(""),R=I(""),y=I(ke([])),U=I(ke([])),V=I(ke([])),E=I(ke([])),F=I(null),C=I(null),G=I(null),ae=I(null),X=I(null),W=I(!1),de=I(!1),se=I(!1),ne=I(""),T=I(!1),f=I(!1),_=I(!1),S=I(null),P=I(null),q=I(null),Q=I(null),K=I(null),A=I(ke(new Set)),z=I(!1),H=I(ke([])),J=I(ke([])),$=I(ke([]));const we=O(()=>e(U).map(l=>l.payload)),fe=O(()=>e(V).map(l=>l.payload)),ee=O(()=>e(H).map(l=>l.ref)),ie=O(()=>e(J).map(l=>l.payload)),Re=O(()=>e(E).map(l=>l.payload));let ve=I(""),be=I(null),re=I(ke([])),ue=I(!1);const Se=O(()=>e(y).length>0||e($).length>0||e(A).size>0);let Z=!1;qe(()=>{const l=e(Se);l&&!Z&&!e(ve)&&r(ve,_t(),!0),!l&&Z&&(r(ve,_t(),!0),r(be,null)),Z=l}),Ya(()=>{r(re,Vt(),!0);try{const l=Ja();l&&(r(y,l.entries.map(Bt),!0),r($,ai(l.customTags),!0),r(A,new Set(wa(l.modifiedRelations)),!0),r(ve,_a(l.submissionId)??"",!0),r(be,_a(l.supersedesSubmissionId),!0));const s=localStorage.getItem(da);if(s){const m=JSON.parse(s);et(m?.email)&&r(x,m.email,!0),et(m?.github)&&r(w,m.github,!0),et(m?.note)&&r(R,m.note,!0)}}catch(l){console.warn("Failed to restore queued changes from storage",l)}finally{r(z,!0)}e(ve)||r(ve,_t(),!0)});function le(l){const s=l(e(A));r(A,new Set(s),!0)}function te(l){const s=$e(l.sourceId,l.targetId);le(m=>{const B=new Set(m);return B.add(s),B})}function Oe(l){le(s=>{if(!s.has(l))return s;const m=new Set(s);return m.delete(l),m})}qe(()=>{const l=[],s=[],m=[],B=[],L=[];for(const M of e(y))switch(M.kind){case"language:new":l.push({queueEntryId:M.id,payload:Ye(M.payload)});break;case"language:edit":s.push({queueEntryId:M.id,payload:Ye(M.payload)});break;case"relationship":m.push({queueEntryId:M.id,payload:it(M.payload)});break;case"reference":B.push({queueEntryId:M.id,ref:M.payload});break;case"separator":L.push({queueEntryId:M.id,payload:ht(M.payload)});break}r(U,l,!0),r(V,s,!0),r(E,m,!0),r(H,B,!0),r(J,L,!0)}),qe(()=>{if(!e(z)||!qt)return;if(e(ve)||r(ve,_t(),!0),e(y).length===0&&e($).length===0&&e(A).size===0){try{localStorage.removeItem(la)}catch(m){console.warn("Failed to clear queued changes from storage",m)}r(be,null);return}const s={entries:e(y).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(A)),submissionId:e(ve),supersedesSubmissionId:e(be)??null};try{localStorage.setItem(la,JSON.stringify(s))}catch(m){console.warn("Failed to persist queued changes",m)}}),qe(()=>{if(!e(z)||!qt)return;const l={email:e(x),github:e(w),note:e(R)};try{localStorage.setItem(da,JSON.stringify(l))}catch(s){console.warn("Failed to persist contributor info",s)}}),qe(()=>{if(!e(z)||!qt)return;if(!e(Se)){sa(null);return}const l={entries:e(y).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(A)),submissionId:e(ve),supersedesSubmissionId:e(be)??null};try{const s=Ga(Xa,l);sa(s)}catch(s){console.error("Failed to build preview dataset:",s)}});function xe(l){return d({id:yt(),kind:"language:new",payload:Ye(l)}),{success:!0}}function ye(l){const s=e(V).find(m=>m.payload.name===l.name);return s?v(s.queueEntryId,"language:edit",Ye(l)):d({id:yt(),kind:"language:edit",payload:Ye(l)}),{success:!0}}function Y(l){d({id:yt(),kind:"reference",payload:l})}function N(l){d({id:yt(),kind:"separator",payload:ht(l)})}function Ie(l){r(P,l,!0),r(f,!0)}function Be(l){if(e(P)!==null){const s=e(J)[e(P)];s&&v(s.queueEntryId,"separator",ht(l)),r(P,null)}}function Fe(l){r(S,l,!0),r(T,!0)}function pe(l){if(e(S)!==null){const s=e(H)[e(S)];s&&v(s.queueEntryId,"reference",l),r(S,null)}}function je(l){r(q,l,!0),r(W,!0)}function De(l){if(e(q)!==null){const s=e(U)[e(q)];s&&v(s.queueEntryId,"language:new",Ye(l)),r(q,null)}return{success:!0}}function Ue(l){r(Q,l,!0),r(de,!0)}function Ve(l){if(e(Q)!==null){const s=e(V)[e(Q)];s&&v(s.queueEntryId,"language:edit",Ye(l)),r(Q,null)}return{success:!0}}function vt(l){r(K,l,!0),r(_,!0)}function He(l){if(e(K)!==null){const s=e(E)[e(K)];s&&(v(s.queueEntryId,"relationship",it(l)),te(l)),r(K,null)}}function tt(l){if(e(K)!==null){He(l);return}const s=$e(l.sourceId,l.targetId),m=e(E).find(B=>$e(B.payload.sourceId,B.payload.targetId)===s);m?v(m.queueEntryId,"relationship",it(l)):d({id:yt(),kind:"relationship",payload:it(l)}),te(l)}function at(l){const s=e(U)[l];s&&dt(s.queueEntryId,s.payload.name)}function Je(l){const s=e(V)[l];s&&dt(s.queueEntryId,s.payload.name)}function ft(l){const s=e(E)[l];s&&(c(s.queueEntryId),Oe($e(s.payload.sourceId,s.payload.targetId)))}function dt(l,s){const m=Ut(s),B=e(E).filter(M=>M.payload.sourceId===m||M.payload.targetId===m).map(M=>M.queueEntryId),L=new Set([l,...B]);r(y,e(y).filter(M=>!L.has(M.id)),!0),le(M=>{if(M.size===0)return M;const Le=new Set(M);for(const oe of Array.from(Le))(oe.startsWith(`${s}->`)||oe.endsWith(`->${s}`))&&Le.delete(oe);return Le})}function Ee(l){const s=e(H)[l];if(!s)return;const m=new Set(t.data.existingReferences.map(L=>L.id));for(let L=0;L<l;L++){const M=wt(e(H)[L].ref.bibtex,m);m.add(M)}const B=wt(s.ref.bibtex,m);r(y,e(y).map(L=>{if(L.kind==="language:new"||L.kind==="language:edit"){if(!L.payload.descriptionRefs.includes(B))return L;const M=Ye(L.payload);return M.descriptionRefs=M.descriptionRefs.filter(Le=>Le!==B),{...L,payload:M}}if(L.kind==="relationship"){if(!L.payload.refs.includes(B))return L;const M=it(L.payload);return M.refs=M.refs.filter(Le=>Le!==B),{...L,payload:M}}if(L.kind==="separator"){if(!L.payload.refs.includes(B))return L;const M=ht(L.payload);return M.refs=M.refs.filter(Le=>Le!==B),{...L,payload:M}}return L}),!0),c(s.queueEntryId),r($,e($).map(L=>({...L,refs:L.refs.filter(M=>M!==B)})),!0)}function Ae(l){const s=e(J)[l];if(!s)return;const m=s.payload.shortName;c(s.queueEntryId),r(y,e(y).map(B=>{if(B.kind!=="relationship"||!B.payload.separatingFunctionIds||!B.payload.separatingFunctionIds.includes(m))return B;const L=it(B.payload);return L.separatingFunctionIds=(L.separatingFunctionIds||[]).filter(M=>M!==m),{...B,payload:L}}),!0)}function Ne(l){try{const s=l.payload;r(y,Wa(s),!0),r($,s.customTags.map(zt),!0),r(A,new Set(s.modifiedRelations),!0),r(x,s.contributor.email,!0),r(w,s.contributor.github,!0),r(R,s.contributor.note,!0),r(be,s.submissionId,!0),r(ve,_t(),!0),r(re,Vt(),!0),r(ue,!1),r(S,null),r(q,null),r(Q,null),r(K,null),r(F,null),r(C,null),r(G,null),r(ae,null)}catch(s){console.error("Failed to load submission from history",s),alert("Unable to load this submission. It was saved before ordered queues were supported.")}}function Me(l){l.preventDefault(),window.location.href="/"}var he=yi();or(l=>{dr.title="Contribute - Knowledge Compilation Map"});var rt=ze(he),st=i(rt),Ht=o(i(st),2),Kt=o(i(Ht),2),St=i(Kt),Tt=i(St),Ft=o(i(Tt),2),Dt=i(Ft),Gt=o(i(Dt),2);Ze(Gt),a(Dt);var Xt=o(Dt,2),Jt=o(i(Xt),2);Ze(Jt),a(Xt),a(Ft);var Wt=o(Ft,2),Yt=o(i(Wt),2);gt(Yt),ot(2),a(Wt),a(Tt);var At=o(Tt,2),Zt=i(At);{var Ea=l=>{var s=oi(),m=o(i(s),2);m.__click=[ii,be],a(s),b(l,s)};j(Zt,l=>{e(be)&&l(Ea)})}var Nt=o(Zt,2);Nt.__click=[ya,ue,re];var ka=o(i(Nt),2);a(Nt),a(At);var $t=o(At,2);{var Ra=l=>{var s=vi(),m=i(s),B=o(i(m),2);B.__click=[ya,ue,re],a(m);var L=o(m,2);{var M=oe=>{var _e=li();b(oe,_e)},Le=oe=>{var _e=gi();ce(_e,21,()=>e(re),ge,(Et,We)=>{const bt=O(()=>ni(e(We))),nt=O(()=>ri(e(We).createdAt));var xt=ci(),mt=i(xt),Lt=i(mt),Ot=i(Lt),Fa=i(Ot,!0);a(Ot);var Mt=o(Ot,2),Da=i(Mt,!0);a(Mt);var Aa=o(Mt,2);{var Na=ut=>{var kt=di();b(ut,kt)},La=ut=>{var kt=Xe(),Ma=ze(kt);{var Ca=Ct=>{var ja=si();b(Ct,ja)};j(Ma,Ct=>{e(We).payload.submissionId===e(be)&&Ct(Ca)},!0)}b(ut,kt)};j(Aa,ut=>{e(We).supersededBySubmissionId?ut(Na):ut(La,!1)})}a(Lt);var Oa=o(Lt,2);Oa.__click=[ui,Ne,We],a(mt),a(xt),D(()=>{k(Fa,e(nt)),k(Da,e(bt))}),b(Et,xt)}),a(_e),b(oe,_e)};j(L,oe=>{e(re).length===0?oe(M):oe(Le,!1)})}a(s),b(l,s)};j($t,l=>{e(ue)&&l(Ra)})}var ea=o($t,2);{let l=O(()=>ma(t.data.languages,e(we),e(fe))),s=O(()=>t.data.existingReferences.map(m=>m.id));Yn(ea,{get languages(){return e(l)},get languagesToAdd(){return e(we)},get languagesToEdit(){return e(fe)},get newReferences(){return e(ee)},get newSeparatingFunctions(){return e(ie)},get relationships(){return e(Re)},get modifiedRelations(){return e(A)},get existingReferenceIds(){return e(s)},get expandedLanguageToAddIndex(){return e(F)},get expandedLanguageToEditIndex(){return e(C)},get expandedReferenceIndex(){return e(ae)},get expandedSeparatingFunctionIndex(){return e(X)},get expandedRelationshipIndex(){return e(G)},onToggleExpandLanguageToAdd:m=>r(F,e(F)===m?null:m,!0),onToggleExpandLanguageToEdit:m=>r(C,e(C)===m?null:m,!0),onToggleExpandReference:m=>r(ae,e(ae)===m?null:m,!0),onToggleExpandSeparatingFunction:m=>r(X,e(X)===m?null:m,!0),onToggleExpandRelationship:m=>r(G,e(G)===m?null:m,!0),onEditLanguageToAdd:je,onEditLanguageToEdit:Ue,onDeleteLanguageToAdd:at,onDeleteLanguageToEdit:Je,onEditReference:Fe,onDeleteReference:Ee,onEditSeparatingFunction:Ie,onDeleteSeparatingFunction:Ae,onEditRelationship:vt,onDeleteRelationship:m=>ft(m)})}var ta=o(ea,2);$n(ta,{onAddLanguage:()=>r(W,!0),onEditLanguage:()=>r(se,!0),onManageRelationships:()=>r(_,!0),onAddReference:()=>r(T,!0),onAddSeparatingFunction:()=>r(f,!0)});var Ia=o(ta,2);{let l=O(()=>!e(Se));ti(Ia,{get disabled(){return e(l)}})}a(St),a(Kt),a(Ht),a(st),a(rt);var aa=o(rt,2);{let l=O(()=>e(q)!==null?De:xe),s=O(()=>e(q)!==null),m=O(()=>e(q)!==null?e(U)[e(q)]?.payload:void 0),B=O(()=>Object.values(t.data.queries).map(_e=>({code:_e.code,name:_e.label}))),L=O(()=>Object.values(t.data.transformations).map(_e=>({code:_e.code,name:_e.label}))),M=O(()=>u.map(_e=>({value:_e.code,label:_e.label,description:_e.description||""}))),Le=O(()=>[...t.data.existingTags,...e($)].map(_e=>({label:_e.label,color:_e.color||"#6366f1",description:"",refs:[]}))),oe=O(()=>Rt(t.data.existingReferences,e(ee)));ga(aa,{onClose:()=>{r(W,!1),r(q,null)},get onAdd(){return e(l)},get isEdit(){return e(s)},get initialData(){return e(m)},get queries(){return e(B)},get transformations(){return e(L)},get complexityOptions(){return e(M)},get existingTags(){return e(Le)},get availableRefs(){return e(oe)},get isOpen(){return e(W)},set isOpen(_e){r(W,_e,!0)}})}var ra=o(aa,2);{let l=O(()=>e(Q)!==null?Ve:ye),s=O(()=>e(Q)!==null?e(V)[e(Q)]?.payload:e(ne)?vn(t.data.languages.find(oe=>oe.name===e(ne))):void 0),m=O(()=>Object.values(t.data.queries).map(oe=>({code:oe.code,name:oe.label}))),B=O(()=>Object.values(t.data.transformations).map(oe=>({code:oe.code,name:oe.label}))),L=O(()=>u.map(oe=>({value:oe.code,label:oe.label,description:oe.description||""}))),M=O(()=>[...t.data.existingTags,...e($)].map(oe=>({label:oe.label,color:oe.color||"#6366f1",description:"",refs:[]}))),Le=O(()=>Rt(t.data.existingReferences,e(ee)));ga(ra,{onClose:()=>{r(de,!1),r(ne,""),r(Q,null)},get onAdd(){return e(l)},isEdit:!0,get initialData(){return e(s)},get queries(){return e(m)},get transformations(){return e(B)},get complexityOptions(){return e(L)},get existingTags(){return e(M)},get availableRefs(){return e(Le)},get isOpen(){return e(de)},set isOpen(oe){r(de,oe,!0)}})}var na=o(ra,2);{var Sa=l=>{var s=_i();s.__click=[fi,se];var m=i(s);m.__click=[bi];var B=o(i(m),2),L=o(i(B),2),M=i(L);M.value=M.__value="";var Le=o(M);ce(Le,17,()=>t.data.languages,ge,(We,bt)=>{var nt=xi(),xt=i(nt,!0);a(nt);var mt={};D(()=>{k(xt,e(bt).name),mt!==(mt=e(bt).name)&&(nt.value=(nt.__value=e(bt).name)??"")}),b(We,nt)}),a(L);var oe=o(L,2),_e=i(oe);_e.__click=[mi,ne,se];var Et=o(_e,2);Et.__click=[pi,ne,se,de],a(oe),a(B),a(m),a(s),D(()=>Et.disabled=!e(ne)),ct(L,()=>e(ne),We=>r(ne,We)),b(l,s)};j(na,l=>{e(se)&&l(Sa)})}var ia=o(na,2);{let l=O(()=>e(S)!==null?pe:Y),s=O(()=>e(S)!==null?e(H)[e(S)]?.ref:void 0),m=O(()=>e(S)!==null);Br(ia,{onClose:()=>{r(T,!1),r(S,null)},get onAdd(){return e(l)},get initialValue(){return e(s)},get isEditMode(){return e(m)},get isOpen(){return e(T)},set isOpen(B){r(T,B,!0)}})}var oa=o(ia,2);{let l=O(()=>e(P)!==null?Be:N),s=O(()=>e(P)!==null?e(J)[e(P)]?.payload:void 0),m=O(()=>Rt(t.data.existingReferences,e(ee))),B=O(()=>e(P)!==null);Jr(oa,{onClose:()=>{r(f,!1),r(P,null)},get onAdd(){return e(l)},get initialValue(){return e(s)},get availableRefs(){return e(m)},get isEditMode(){return e(B)},get isOpen(){return e(f)},set isOpen(L){r(f,L,!0)}})}var Ta=o(oa,2);{let l=O(()=>e(K)!==null?e(E)[e(K)]?.payload:void 0),s=O(()=>ma(t.data.languages,e(we),e(fe))),m=O(()=>Rt(t.data.existingReferences,e(ee))),B=O(()=>fn(t.data.existingSeparatingFunctions,e(ie)));cn(Ta,{onClose:()=>{r(_,!1),r(K,null)},onSave:tt,get initialData(){return e(l)},get languages(){return e(s)},get statusOptions(){return g},get availableRefs(){return e(m)},get availableSeparatingFunctions(){return e(B)},get baselineRelations(){return h},get isOpen(){return e(_)},set isOpen(L){r(_,L,!0)}})}D(()=>Qe(ka,0,`h-3 w-3 transition-transform ${e(ue)?"rotate-180":""}`)),lr("submit",St,Me),Ce(Gt,()=>e(x),l=>r(x,l)),Ce(Jt,()=>e(w),l=>r(w,l)),Ce(Yt,()=>e(R),l=>r(R,l)),b(n,he),Ge()}lt(["click"]);export{Ti as component,Si as universal};
