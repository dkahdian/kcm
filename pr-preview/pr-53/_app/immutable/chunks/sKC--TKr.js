import{f as Ie,h as R,i as Re,z as W,B as Te,j as Ce,H as qe,s as Z,k as P,l as H,w as x,ai as Oe,aM as Ne,n as X,p as De,o as xe,ah as J,m as ae,aZ as Be,af as ee,aI as le,aB as ue,b4 as F,t as ce,v as je,b5 as L,b6 as Me,b7 as V,aq as de,aw as ke,b8 as Fe,aH as Le,b9 as Ue,F as $e,aD as Pe,ba as fe,q as He,bb as Ve,ay as Qe,bc as Ke,bd as Xe,b0 as ze,e as Ye}from"./pwzhV1cr.js";const Ge=!0;function Bn(e,n){return n}function We(e,n,t){for(var s=e.items,r=[],o=n.length,i=0;i<o;i++)Fe(n[i].e,r,!0);var a=o>0&&r.length===0&&t!==null;if(a){var h=t.parentNode;Le(h),h.append(t),s.clear(),C(e,n[0].prev,n[o-1].next)}Ue(r,()=>{for(var p=0;p<o;p++){var g=n[p];a||(s.delete(g.k),C(e,g.prev,g.next)),de(g.e,!a)}})}function jn(e,n,t,s,r,o=null){var i=e,a={flags:n,items:new Map,first:null},h=(n&fe)!==0;if(h){var p=e;i=R?P(Pe(p)):p.appendChild(ae())}R&&Re();var g=null,v=!1,S=new Map,b=Te(()=>{var c=t();return ue(c)?c:c==null?[]:le(c)}),l,m;function f(){Ze(m,l,a,S,i,r,n,s,t),o!==null&&(l.length===0?g?ce(g):g=X(()=>o(i)):g!==null&&je(g,()=>{g=null}))}Ie(()=>{m??=$e,l=W(b);var c=l.length;if(v&&c===0)return;v=c===0;let y=!1;if(R){var A=Ce(i)===qe;A!==(c===0)&&(i=Z(),P(i),H(!1),y=!0)}if(R){for(var I=null,w,u=0;u<c;u++){if(x.nodeType===Oe&&x.data===Ne){i=x,y=!0,H(!1);break}var d=l[u],E=s(d,u);w=z(x,a,I,null,d,E,u,r,n,t),a.items.set(E,w),I=w}c>0&&P(Z())}if(R)c===0&&o&&(g=X(()=>o(i)));else if(De()){var N=new Set,M=xe;for(u=0;u<c;u+=1){d=l[u],E=s(d,u);var q=a.items.get(E)??S.get(E);q?(n&(L|F))!==0&&pe(q,d,u,n):(w=z(null,a,null,null,d,E,u,r,n,t,!0),S.set(E,w)),N.add(E)}for(const[T,k]of a.items)N.has(T)||M.skipped_effects.add(k.e);M.add_callback(f)}else f();y&&H(!0),W(b)}),R&&(i=x)}function Ze(e,n,t,s,r,o,i,a,h){var p=(i&Ve)!==0,g=(i&(L|F))!==0,v=n.length,S=t.items,b=t.first,l=b,m,f=null,c,y=[],A=[],I,w,u,d;if(p)for(d=0;d<v;d+=1)I=n[d],w=a(I,d),u=S.get(w),u!==void 0&&(u.a?.measure(),(c??=new Set).add(u));for(d=0;d<v;d+=1){if(I=n[d],w=a(I,d),u=S.get(w),u===void 0){var E=s.get(w);if(E!==void 0){s.delete(w),S.set(w,E);var N=f?f.next:l;C(t,f,E),C(t,E,N),Q(E,N,r),f=E}else{var M=l?l.e.nodes_start:r;f=z(M,t,f,f===null?t.first:f.next,I,w,d,o,i,h)}S.set(w,f),y=[],A=[],l=f.next;continue}if(g&&pe(u,I,d,i),(u.e.f&V)!==0&&(ce(u.e),p&&(u.a?.unfix(),(c??=new Set).delete(u))),u!==l){if(m!==void 0&&m.has(u)){if(y.length<A.length){var q=A[0],T;f=q.prev;var k=y[0],U=y[y.length-1];for(T=0;T<y.length;T+=1)Q(y[T],q,r);for(T=0;T<A.length;T+=1)m.delete(A[T]);C(t,k.prev,U.next),C(t,f,k),C(t,U,q),l=q,f=U,d-=1,y=[],A=[]}else m.delete(u),Q(u,l,r),C(t,u.prev,u.next),C(t,u,f===null?t.first:f.next),C(t,f,u),f=u;continue}for(y=[],A=[];l!==null&&l.k!==w;)(l.e.f&V)===0&&(m??=new Set).add(l),A.push(l),l=l.next;if(l===null)continue;u=l}y.push(u),f=u,l=u.next}if(l!==null||m!==void 0){for(var D=m===void 0?[]:le(m);l!==null;)(l.e.f&V)===0&&D.push(l),l=l.next;var $=D.length;if($>0){var Ee=(i&fe)!==0&&v===0?r:null;if(p){for(d=0;d<$;d+=1)D[d].a?.measure();for(d=0;d<$;d+=1)D[d].a?.fix()}We(t,D,Ee)}}p&&He(()=>{if(c!==void 0)for(u of c)u.a?.apply()}),e.first=t.first&&t.first.e,e.last=f&&f.e;for(var Ae of s.values())de(Ae.e);s.clear()}function pe(e,n,t,s){(s&L)!==0&&J(e.v,n),(s&F)!==0?J(e.i,t):e.i=t}function z(e,n,t,s,r,o,i,a,h,p,g){var v=(h&L)!==0,S=(h&Me)===0,b=v?S?Be(r,!1,!1):ee(r):r,l=(h&F)===0?i:ee(i),m={i:l,v:b,k:o,a:null,e:null,prev:t,next:s};try{if(e===null){var f=document.createDocumentFragment();f.append(e=ae())}return m.e=X(()=>a(e,b,l,p),R),m.e.prev=t&&t.e,m.e.next=s&&s.e,t===null?g||(n.first=m):(t.next=m,t.e.next=m.e),s!==null&&(s.prev=m,s.e.prev=m.e),m}finally{}}function Q(e,n,t){for(var s=e.next?e.next.e.nodes_start:t,r=n?n.e.nodes_start:t,o=e.e.nodes_start;o!==null&&o!==s;){var i=ke(o);r.before(o),o=i}}function C(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}const ne=[...` 	
\r\fÂ \v\uFEFF`];function Je(e,n,t){var s=e==null?"":""+e;if(n&&(s=s?s+" "+n:n),t){for(var r in t)if(t[r])s=s?s+" "+r:r;else if(s.length)for(var o=r.length,i=0;(i=s.indexOf(r,i))>=0;){var a=i+o;(i===0||ne.includes(s[i-1]))&&(a===s.length||ne.includes(s[a]))?s=(i===0?"":s.substring(0,i))+s.substring(a+1):i=a}}return s===""?null:s}function en(e,n){return e==null?null:String(e)}function Mn(e,n,t,s,r,o){var i=e.__className;if(R||i!==t||i===void 0){var a=Je(t,s,o);(!R||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):n?e.className=a:e.setAttribute("class",a)),e.__className=t}else if(o&&r!==o)for(var h in o){var p=!!o[h];(r==null||p!==!!r[h])&&e.classList.toggle(h,p)}return o}function kn(e,n,t,s){var r=e.__style;if(R||r!==n){var o=en(n);(!R||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=n}return s}function me(e,n,t=!1){if(e.multiple){if(n==null)return;if(!ue(n))return Ke();for(var s of e.options)s.selected=n.includes(j(s));return}for(s of e.options){var r=j(s);if(Xe(r,n)){s.selected=!0;return}}(!t||n!==void 0)&&(e.selectedIndex=-1)}function nn(e){var n=new MutationObserver(()=>{me(e,e.__value)});n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Qe(()=>{n.disconnect()})}function Fn(e,n,t=n){var s=!0;ze(e,"change",r=>{var o=r?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(o),j);else{var a=e.querySelector(o)??e.querySelector("option:not([disabled])");i=a&&j(a)}t(i)}),Ye(()=>{var r=n();if(me(e,r,s),s&&r===void 0){var o=e.querySelector(":checked");o!==null&&(r=j(o),t(r))}e.__value=r,s=!1}),nn(e)}function j(e){return"__value"in e?e.__value:e.value}const Ln=Ge,tn=[{description:"Ordered Binary Decision Diagram with respect to a fixed variable order",descriptionRefs:["Bryant_1986"],fullName:"Ordered Binary Decision Diagram (wrt a fixed variable order)",id:"obdd",name:"OBDD_<",properties:{queries:{CE:{note:"",polytime:"poly",refs:["Darwiche_2002"]},CO:{note:"",polytime:"poly",refs:["Bryant_1986"]},CT:{note:"",polytime:"poly",refs:["Bryant_1986"]},EQ:{note:"",polytime:"poly",refs:["Darwiche_2002"]},IM:{note:"",polytime:"unknown",refs:["Darwiche_2002"]},ME:{note:"",polytime:"poly",refs:["Bryant_1986"]},SE:{note:"",polytime:"poly",refs:["Darwiche_2002"]},VA:{note:"",polytime:"poly",refs:["Bryant_1986"]}},transformations:{AND_BC:{note:"",polytime:"poly",refs:["Bryant_1986"]},AND_C:{note:"",polytime:"exp",refs:["Darwiche_2002"]},CD:{note:"",polytime:"poly",refs:["Bryant_1986"]},FO:{note:"",polytime:"exp",refs:["Darwiche_2002"]},NOT_C:{note:"",polytime:"poly",refs:["Bryant_1986"]},OR_BC:{note:"",polytime:"poly",refs:["Bryant_1986"]},OR_C:{note:"",polytime:"exp",refs:["Darwiche_2002"]},SFO:{note:"",polytime:"poly",refs:["Darwiche_2002"]}}},tags:[]}],sn=[{id:"Bryant_1986",bibtex:`@article{bryant1986graph,
  title={Graph-based algorithms for boolean function manipulation},
  author={Bryant, Randal E},
  journal={Computers, IEEE Transactions on},
  volume={100},
  number={8},
  pages={677--691},
  year={1986},
  publisher={IEEE}
}`},{id:"Darwiche_2002",bibtex:`@article{Darwiche_2002,
   title={A Knowledge Compilation Map},
   volume={17},
   ISSN={1076-9757},
   url={http://dx.doi.org/10.1613/jair.989},
   DOI={10.1613/jair.989},
   journal={Journal of Artificial Intelligence Research},
   publisher={AI Access Foundation},
   author={Darwiche, A. and Marquis, P.},
   year={2002},
   month=sep, pages={229â€“264} }`},{id:"Darwiche_2002_a",bibtex:`@article{darwiche2002knowledge,
  title={A knowledge compilation map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of Artificial Intelligence Research},
  volume={17},
  pages={229--264},
  year={2002}
}`}],rn=[{id:"poly",name:"Polynomial Transformation",label:"â‰¤_p",description:"Polynomial-time transformation exists (A â‰¤_p B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"triangle",dashed:!1},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"no-poly-unknown-quasi",name:"No Poly, Unknown Quasi",label:"âŠ„_p, ?â‰¤_q",description:"No polynomial transformation, quasi-polynomial unknown (A âŠ„_p B and A ?â‰¤_q B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"tee",dashed:!0},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"no-poly-quasi",name:"No Poly, Has Quasi",label:"âŠ„_p, â‰¤_q",description:"No polynomial but quasi-polynomial exists (A âŠ„_p B and A â‰¤_q B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"tee",dashed:!1},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"unknown-poly-quasi",name:"Unknown Poly, Has Quasi",label:"?â‰¤_p, â‰¤_q",description:"Polynomial unknown but quasi-polynomial exists (A ?â‰¤_p B and A â‰¤_q B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"triangle-cross",dashed:!0},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"unknown-both",name:"Both Unknown",label:"?â‰¤_p, ?â‰¤_q",description:"Both polynomial and quasi-polynomial unknown (A ?â‰¤_p B and A ?â‰¤_q B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"square",dashed:!0},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"no-quasi",name:"No Quasi-Polynomial",label:"âŠ„_q",description:"No quasi-polynomial transformation exists (A âŠ„_q B)",style:{lineStyle:"solid",width:2,targetStyle:{arrow:"square",dashed:!1},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0},{id:"not-poly",name:"Not Polynomial",label:"âŠ„_p",description:'Not polynomial (generated by "Polytime vs not polytime" filter)',style:{lineStyle:"solid",width:2,targetStyle:{arrow:"square",dashed:!1},sourceStyle:{arrow:"none",dashed:!1}},defaultVisible:!0}],on={queries:{CO:{code:"CO",label:"Consistency",description:"Check if the formula is satisfiable"},VA:{code:"VA",label:"Validity",description:"Check if the formula is a tautology"},CE:{code:"CE",label:"Clausal Entailment",description:"Check if a clause is entailed"},IM:{code:"IM",label:"Implicant",description:"Find an implicant of the formula"},EQ:{code:"EQ",label:"Equivalence",description:"Check logical equivalence of two formulas"},SE:{code:"SE",label:"Sentential Entailment",description:"Check if one formula entails another"},CT:{code:"CT",label:"Model Counting",description:"Count the number of satisfying assignments"},ME:{code:"ME",label:"Model Enumeration",description:"Enumerate all satisfying assignments"}},transformations:{CD:{code:"CD",label:"Conditioning",description:"Restrict formula given variable assignments"},FO:{code:"FO",label:"Forgetting",description:"Existentially quantify out variables"},SFO:{code:"SFO",label:"Singleton Forgetting",description:"Forget a single variable"},AND_C:{code:"âˆ§C",label:"Conjunction",description:"Compute conjunction of formulas"},AND_BC:{code:"âˆ§BC",label:"Bounded Conjunction",description:"Conjunction with bounded result size"},OR_C:{code:"âˆ¨C",label:"Disjunction",description:"Compute disjunction of formulas"},OR_BC:{code:"âˆ¨BC",label:"Bounded Disjunction",description:"Disjunction with bounded result size"},NOT_C:{code:"Â¬C",label:"Negation",description:"Negate the formula"}}},an={poly:{code:"poly",label:"Polynomial",color:"#22c55e",emoji:"ðŸŸ¢",description:"Operation is polynomial time"},quasi:{code:"quasi",label:"Quasi-polynomial",color:"#f97316",emoji:"âš¡",description:"Operation is quasi-polynomial time"},exp:{code:"exp",label:"Exponential",color:"#ef4444",emoji:"âŒ",description:"Operation is exponential time (proven)"},"not-poly-conditional":{code:"not-poly-conditional",label:"Not Poly (Conditional)",color:"#f97316",emoji:"âš ï¸",description:"Not polynomial under complexity assumption (e.g., Unless P=NP)"},unknown:{code:"unknown",label:"Unknown",color:"#9ca3af",emoji:"â”",description:"Complexity is unknown"},open:{code:"open",label:"Open Problem",color:"#9ca3af",emoji:"â“",description:"Open research problem"}},ln={languageIds:["obdd"],matrix:[[null]]},O={languages:tn,references:sn,relationTypes:rn,operations:on,polytimeComplexities:an,adjacencyMatrix:ln};function un(e){if(e===null)return{arrow:"none",dashed:!1};switch(e){case"poly":return{arrow:"triangle",dashed:!1};case"no-poly-unknown-quasi":return{arrow:"tee",dashed:!0};case"no-poly-quasi":return{arrow:"tee",dashed:!1};case"not-poly":return{arrow:"square",dashed:!1};case"unknown-poly-quasi":return{arrow:"triangle-cross",dashed:!0};case"unknown-both":return{arrow:"square",dashed:!0};case"no-quasi":return{arrow:"square",dashed:!1};default:return{arrow:"none",dashed:!1}}}const Un=O.relationTypes;function $n(e){return un(e)}const ye=O.operations,cn=ye.queries,he=ye.transformations;function dn(e){for(const[n,t]of Object.entries(he))if(t.code===e)return n;return e}function te(e,n){const t=[];for(const[s,r]of Object.entries(n)){const o=e?.[s]||e?.[r.code];o?t.push({code:r.code,label:r.label,polytime:o.polytime,note:o.note,refs:o.refs}):t.push({code:r.code,label:r.label,polytime:"open",refs:[]})}return t}function Pn(e,n){return{queries:te(e,cn),transformations:te(n,he)}}const se=O.polytimeComplexities;function Hn(e){return se[e]||se.open}function fn(e){const n=e.match(/@\w+\{([^,\s]+)/);return n?n[1]:null}function pn(e){const n=e.match(/url\s*=\s*\{([^}]+)\}/i),t=e.match(/DOI\s*=\s*\{([^}]+)\}/i),s=e.match(/title\s*=\s*\{([^}]+)\}/i),r=e.match(/author\s*=\s*\{([^}]+)\}/i),o=e.match(/year\s*=\s*\{?(\d{4})\}?/i),i=e.match(/journal\s*=\s*\{([^}]+)\}/i),a=e.match(/volume\s*=\s*\{([^}]+)\}/i),h=e.match(/pages\s*=\s*\{([^}]+)\}/i),p=fn(e)||"unknown";let g="#";n?g=n[1]:t&&(g=`https://doi.org/${t[1]}`);let v="Unknown Reference";if(r&&s&&o){const l=r[1].split(/\s+and\s+/i).map(y=>{const A=y.split(",").map(I=>I.trim());if(A.length>=2){const I=A[0];return`${A[1].split(/\s+/).map(d=>d.charAt(0).toUpperCase()+".").join(" ")} ${I}`}return y});let m="";l.length===1?m=l[0]:l.length===2?m=`${l[0]} and ${l[1]}`:m=l.slice(0,-1).join(", ")+", and "+l[l.length-1];const f=s[1],c=o[1];v=`${m}, "${f},"`,i&&(v+=` ${i[1]},`),a&&(v+=` vol. ${a[1]},`),h&&(v+=` pp. ${h[1]},`),v+=` ${c}.`}else s&&(v=s[1]);return{id:p,title:v,href:g}}const ge={},mn=O.references;for(const e of mn){const n=pn(e.bibtex);ge[e.id]={id:e.id,title:n.title,href:n.href,bibtex:e.bibtex}}function yn(...e){return e.map(n=>ge[n]).filter(Boolean)}const hn=O.languages;function gn(e){const n=new Set;return e.descriptionRefs&&e.descriptionRefs.forEach(t=>n.add(t)),e.properties?.queries&&Object.values(e.properties.queries).forEach(t=>{t.refs&&t.refs.forEach(s=>n.add(s))}),e.properties?.transformations&&Object.values(e.properties.transformations).forEach(t=>{t.refs&&t.refs.forEach(s=>n.add(s))}),e.tags&&e.tags.forEach(t=>{t.refs&&t.refs.forEach(s=>n.add(s))}),{...e,references:yn(...Array.from(n))}}const Vn=hn.map(gn),be=O.adjacencyMatrix,ve=be.languageIds,bn=be.matrix,vn=Object.fromEntries(ve.map((e,n)=>[e,n])),Qn={languageIds:ve,indexByLanguage:vn,matrix:bn},_=[];for(let e=0;e<256;++e)_.push((e+256).toString(16).slice(1));function wn(e,n=0){return(_[e[n+0]]+_[e[n+1]]+_[e[n+2]]+_[e[n+3]]+"-"+_[e[n+4]]+_[e[n+5]]+"-"+_[e[n+6]]+_[e[n+7]]+"-"+_[e[n+8]]+_[e[n+9]]+"-"+_[e[n+10]]+_[e[n+11]]+_[e[n+12]]+_[e[n+13]]+_[e[n+14]]+_[e[n+15]]).toLowerCase()}let K;const _n=new Uint8Array(16);function Sn(){if(!K){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");K=crypto.getRandomValues.bind(crypto)}return K(_n)}const En=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),re={randomUUID:En};function An(e,n,t){e=e||{};const s=e.random??e.rng?.()??Sn();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,wn(s)}function Kn(e,n,t){return re.randomUUID&&!e?re.randomUUID():An(e)}function In(e){const n=e.match(/author\s*=\s*[{"']([^}"']+)[}"']/i);let t="Unknown";if(n){const i=n[1].split(/\s+and\s+/i)[0].trim();if(i.includes(","))t=i.split(",")[0].trim();else{const a=i.trim().split(/\s+/);t=a[a.length-1]}t=t.replace(/[{}]/g,"").trim()}const s=e.match(/year\s*=\s*[{"']?(\d{4})[}"']?/i),r=s?s[1]:"XXXX";return{author:t,year:r}}function Rn(e,n){const t=In(e);if(!t){let i="Reference_Unknown",a=1;for(;n.has(i);)i=`Reference_Unknown_${a}`,a++;return i}const s=`${t.author}_${t.year}`;if(!n.has(s))return s;const r="abcdefghijklmnopqrstuvwxyz".split("");for(const i of r){const a=`${s}_${i}`;if(!n.has(a))return a}let o=1;for(;n.has(`${s}_${o}`);)o++;return`${s}_${o}`}const we="kcm_submission_history_v1",G=10,B=Array.isArray;function Y(e){return e.map(n=>({...n,descriptionRefs:[...n.descriptionRefs],queries:Object.fromEntries(Object.entries(n.queries).map(([t,s])=>[t,{...s,refs:[...s.refs]}])),transformations:Object.fromEntries(Object.entries(n.transformations).map(([t,s])=>[t,{...s,refs:[...s.refs]}])),tags:n.tags.map(t=>({...t,refs:[...t.refs]})),existingReferences:[...n.existingReferences]}))}function _e(e){return e.map(n=>({...n,refs:[...n.refs],separatingFunctions:n.separatingFunctions?n.separatingFunctions.map(t=>({...t,refs:[...t.refs]})):void 0}))}function Se(e){return e.map(n=>({...n,refs:[...n.refs]}))}function Tn(e){if(!e||typeof e!="object")return null;const n=e,t=typeof n.id=="string"?n.id:null,s=typeof n.createdAt=="string"?n.createdAt:null;if(!t||!s)return null;const r=n.payload;if(!r||typeof r!="object")return null;const o=typeof r.submissionId=="string"?r.submissionId:t,i=typeof r.supersedesSubmissionId=="string"?r.supersedesSubmissionId:null,a=r.contributor,h=a&&typeof a=="object"?{email:typeof a.email=="string"?a.email:"",github:typeof a.github=="string"?a.github:"",note:typeof a.note=="string"?a.note:""}:{email:"",github:"",note:""},p=c=>B(c)?Y(c.filter(y=>!!y&&typeof y=="object")):[],g=c=>B(c)?_e(c.filter(y=>!!y&&typeof y=="object")):[],v=c=>B(c)?c.filter(y=>typeof y=="string"):[],S=c=>B(c)?Se(c.filter(y=>!!y&&typeof y=="object")):[],b={submissionId:o,supersedesSubmissionId:i,languagesToAdd:p(r.languagesToAdd),languagesToEdit:p(r.languagesToEdit),relationships:g(r.relationships),newReferences:v(r.newReferences),customTags:S(r.customTags),modifiedRelations:v(r.modifiedRelations),contributor:h},l=n.summary,m=l&&typeof l=="object"?{languagesToAdd:Number(l.languagesToAdd)||b.languagesToAdd.length,languagesToEdit:Number(l.languagesToEdit)||b.languagesToEdit.length,relationships:Number(l.relationships)||b.relationships.length,newReferences:Number(l.newReferences)||b.newReferences.length}:{languagesToAdd:b.languagesToAdd.length,languagesToEdit:b.languagesToEdit.length,relationships:b.relationships.length,newReferences:b.newReferences.length},f=typeof n.supersededBySubmissionId=="string"?n.supersededBySubmissionId:void 0;return{id:t,createdAt:s,summary:m,payload:b,supersedesSubmissionId:i,supersededBySubmissionId:f}}function Cn(e){return B(e)?e.map(t=>Tn(t)).filter(t=>t!==null).sort((t,s)=>t.createdAt<s.createdAt?1:-1).slice(0,G):[]}function qn(){if(typeof localStorage>"u")return[];try{const e=localStorage.getItem(we);return e?Cn(JSON.parse(e)):[]}catch(e){return console.warn("Failed to load submission history",e),[]}}function On(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(we,JSON.stringify(e.slice(0,G)))}catch(n){console.warn("Failed to save submission history",n)}}function Nn(e){const n=new Date().toISOString();return{id:e.submissionId,createdAt:n,summary:{languagesToAdd:e.languagesToAdd.length,languagesToEdit:e.languagesToEdit.length,relationships:e.relationships.length,newReferences:e.newReferences.length},payload:{...e,languagesToAdd:Y(e.languagesToAdd),languagesToEdit:Y(e.languagesToEdit),relationships:_e(e.relationships),newReferences:[...e.newReferences],customTags:Se(e.customTags),modifiedRelations:[...e.modifiedRelations],contributor:{...e.contributor}},supersedesSubmissionId:e.supersedesSubmissionId??null,supersededBySubmissionId:void 0}}function Xn(e){const n=qn(),t=Nn(e),s=n.filter(i=>i.id!==t.id);if(t.supersedesSubmissionId){const i=s.find(a=>a.id===t.supersedesSubmissionId);i&&(i.supersededBySubmissionId=t.id)}const o=[t,...s].slice(0,G);return On(o),o}function Dn(e,n){return`${e}->${n}`}function ie(e,n=!1){const t={};if(e)for(const[s,r]of Object.entries(e)){const o=n?dn(s):s;t[o]={polytime:r.polytime,note:r.note,refs:Array.isArray(r.refs)?[...r.refs]:[]}}return t}function oe(e){return{id:e.id,name:e.name,fullName:e.fullName,description:e.description,descriptionRefs:Array.isArray(e.descriptionRefs)?[...e.descriptionRefs]:[],properties:{queries:ie(e.queries),transformations:ie(e.transformations,!0)},tags:e.tags?JSON.parse(JSON.stringify(e.tags)):[],references:Array.isArray(e.existingReferences)?[...e.existingReferences]:[]}}function zn(e){const n=new Map,{languageIds:t,matrix:s}=e;for(let r=0;r<t.length;r++)for(let o=0;o<t.length;o++){const i=s[r][o];if(i){const a=t[r],h=t[o];n.set(Dn(a,h),{status:i.status,refs:i.refs?[...i.refs]:[],separatingFunctions:i.separatingFunctions?i.separatingFunctions.map(p=>({shortName:p.shortName,name:p.name,description:p.description,refs:[...p.refs]})):[]})}}return n}function Yn(e,n){const t=e.map(o=>o.id),s=new Set(t),r=n.map(o=>{const i=Rn(o,s);return s.add(i),i});return[...t,...r]}function Gn(e,n,t){const s=e.map(i=>({id:i.id,name:i.name})),r=n.map(i=>({id:i.id,name:i.name})),o=t.map(i=>({id:i.id,name:i.name}));return[...s,...r,...o]}function Wn(e){return{id:e.id,name:e.name,fullName:e.fullName||"",description:e.description||"",descriptionRefs:e.descriptionRefs||[],queries:e.properties?.queries||{},transformations:e.properties?.transformations||{},tags:(e.tags||[]).map(n=>({...n,color:n.color||"#6366f1"})),existingReferences:e.references?.map(n=>n.id)||[]}}function Zn(e,n,t,s,r,o,i,a,h){const p=o.map(b=>({sourceId:b.sourceId,targetId:b.targetId,status:b.status,refs:b.refs,separatingFunctions:b.separatingFunctions||[]})),g=s.map(oe),v=r.map(oe),S={submissionId:h.submissionId,contributorEmail:e,contributorGithub:n||void 0,contributorNote:t||void 0,languagesToAdd:g,languagesToEdit:v,relationships:p,newReferences:i,existingLanguageIds:a};return h.supersedesSubmissionId&&(S.supersedesSubmissionId=h.supersedesSubmissionId),S}export{se as P,cn as Q,he as T,Vn as a,Qn as b,Fn as c,kn as d,jn as e,Dn as f,zn as g,Ln as h,Bn as i,Wn as j,Rn as k,qn as l,Yn as m,Gn as n,$n as o,Hn as p,Pn as q,Un as r,Mn as s,nn as t,me as u,Kn as v,Zn as w,Xn as x};
