import{a as pt,r as fa,b as ba,P as ma,T as xa,Q as _a,e as le,i as se,c as ct,s as Ke,d as Zt,f as ot,g as pa,h as Qt,v as ya,l as It,j as ha,k as Ht,m as St,n as wa}from"../chunks/CdSfTHIu.js";import"../chunks/DsnmJJEf.js";import{d as Ze,s as E,o as Ea,e as ka}from"../chunks/Cx79O9jG.js";import{b0 as Ra,aY as Ta,u as Sa,r as Da,h as Aa,o as bt,b1 as Ia,T as $e,a2 as w,C as je,aa as Ve,z as e,D as a,a4 as We,a5 as Ye,Y as x,Z as et,V as y,a0 as n,a3 as i,ar as yt,_ as o,b2 as mt,X as L,a_ as B,b3 as Kt,W as Oa,$ as La}from"../chunks/pwzhV1cr.js";import{p as Ce,i as P}from"../chunks/-bFWoB2C.js";import{r as Ge,s as Pe}from"../chunks/BdkZzXO5.js";function Be(d,t,c=t){var f=new WeakSet;Ra(d,"input",async m=>{var u=m?d.defaultValue:d.value;if(u=Dt(d)?At(u):u,c(u),bt!==null&&f.add(bt),await Ta(),u!==(u=t())){var p=d.selectionStart,k=d.selectionEnd;d.value=u??"",k!==null&&(d.selectionStart=p,d.selectionEnd=Math.min(k,d.value.length))}}),(Aa&&d.defaultValue!==d.value||Sa(t)==null&&d.value)&&(c(Dt(d)?At(d.value):d.value),bt!==null&&f.add(bt)),Da(()=>{var m=t();if(d===document.activeElement){var u=Ia??bt;if(f.has(u))return}Dt(d)&&m===At(d.value)||d.type==="date"&&!m&&!d.value||m!==d.value&&(d.value=m??"")})}function Dt(d){var t=d.type;return t==="number"||t==="range"}function At(d){return d===""?null:+d}const ja=()=>{const d=pt.map(u=>u.id),t=new Map;for(const u of pt)if(u.references)for(const p of u.references)t.has(p.id)||t.set(p.id,p.title);const c=Array.from(t.entries()).map(([u,p])=>({id:u,title:p})),f=new Map;for(const u of pt)if(u.tags)for(const p of u.tags)f.has(p.id)||f.set(p.id,{id:p.id,label:p.label,color:p.color});const m=Array.from(f.values());return{existingLanguageIds:d,existingReferences:c,existingTags:m,languages:pt,queries:_a,transformations:xa,polytimeOptions:ma,adjacencyMatrix:ba,relationTypes:fa}},Ca=!1,Ri=Object.freeze(Object.defineProperty({__proto__:null,load:ja,prerender:Ca},Symbol.toStringTag,{value:"Module"}));async function Ma(d,t,c,f,m,u,p,k,q,j,R,h,A){if(!e(t).trim()||!e(c).trim()||!e(f).trim()||!e(m).trim()){a(u,"Please fill out all required fields.");return}try{const I=await p.onAdd({id:e(t).trim(),name:e(c).trim(),fullName:e(f).trim(),description:e(m).trim(),descriptionRefs:e(k),queries:e(q),transformations:e(j),tags:e(R),existingReferences:e(h)}),M=I&&typeof I=="object"&&"success"in I?I:void 0;if(M&&!M.success){a(u,M.error??"Unable to add language. Please review your input.",!0);return}a(u,null),A(),p.onClose?.()}catch(I){a(u,I instanceof Error?I.message:"Unexpected error while adding the language.",!0)}}function Vt(d,t,c){t(),c.onClose()}var Na=d=>d.stopPropagation(),Fa=y('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),za=y('<p class="text-xs text-gray-500 mt-1">ID will be: <code class="bg-gray-100 px-1 rounded"> </code></p>'),Ba=(d,t,c)=>t(e(c)),Pa=y('<button type="button"> </button>'),qa=y('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Ua=y("<option> </option>"),Qa=(d,t,c,f)=>t(e(c).code,e(f)),Ha=y('<button type="button"> </button>'),Ka=y('<div class="mt-2 flex flex-wrap gap-1"></div>'),Va=y('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Xa=y("<option> </option>"),Ja=(d,t,c,f)=>t(e(c).code,e(f)),Ya=y('<button type="button"> </button>'),Ga=y('<div class="mt-2 flex flex-wrap gap-1"></div>'),Wa=y('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Za=(d,t,c)=>t(e(c)),$a=y('<button type="button"> </button>'),er=y('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),tr=y(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/> <!></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function Xt(d,t){$e(t,!0);let c=Ce(t,"isOpen",11,!1),f=Ce(t,"availableRefs",19,()=>[]),m=Ce(t,"isEdit",3,!1),u=w(""),p=w(""),k=w(""),q=w(""),j=w(je([])),R=w(je({})),h=w(je({})),A=w(je([])),I=w(je([])),M=w(null);Ve(()=>{!m()&&e(p)&&a(u,e(p).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),!0)}),Ve(()=>{m()&&t.initialData&&(a(u,t.initialData.id,!0),a(p,t.initialData.name,!0),a(k,t.initialData.fullName,!0),a(q,t.initialData.description,!0),a(j,[...t.initialData.descriptionRefs],!0),a(R,{...t.initialData.queries},!0),a(h,{...t.initialData.transformations},!0),a(A,[...t.initialData.tags],!0),a(I,[...t.initialData.existingReferences],!0),a(M,null))});function be(){a(u,""),a(p,""),a(k,""),a(q,""),a(j,[],!0),a(R,{},!0),a(h,{},!0),a(A,[],!0),a(I,[],!0),a(Ie,!1),a(ne,!1),a(M,null)}function Fe(v){e(j).includes(v)?a(j,e(j).filter(g=>g!==v),!0):a(j,[...e(j),v],!0)}function $(v){e(A).some(g=>g.id===v.id)?a(A,e(A).filter(g=>g.id!==v.id),!0):a(A,[...e(A),v],!0)}function W(v,g){if(!e(R)[v])return;const C=e(R)[v].refs;C.includes(g)?e(R)[v].refs=C.filter(te=>te!==g):e(R)[v].refs=[...C,g],a(R,{...e(R)},!0)}function ee(v,g){if(!e(h)[v])return;const C=e(h)[v].refs;C.includes(g)?e(h)[v].refs=C.filter(te=>te!==g):e(h)[v].refs=[...C,g],a(h,{...e(h)},!0)}let Ie=w(!1),ne=w(!1);Ve(()=>{if(t.queries.length>0&&!e(Ie)){const v={};t.queries.forEach(g=>{if(m()&&t.initialData&&t.initialData.queries[g.code]){const C=t.initialData.queries[g.code];v[g.code]={polytime:C.polytime,note:C.note||"",refs:[...C.refs]}}else v[g.code]={polytime:"unknown",note:"",refs:[]}}),a(R,v,!0),a(Ie,!0)}}),Ve(()=>{if(t.transformations.length>0&&!e(ne)){const v={};t.transformations.forEach(g=>{if(m()&&t.initialData){let C=t.initialData.transformations[g.code];if(!C){const te=Object.keys(t.initialData.transformations).find(xe=>t.initialData.transformations[xe]!==void 0&&(xe===g.code||g.code==="‚àßC"&&xe==="AND_C"||g.code==="‚àßBC"&&xe==="AND_BC"||g.code==="‚à®C"&&xe==="OR_C"||g.code==="‚à®BC"&&xe==="OR_BC"||g.code==="¬¨C"&&xe==="NOT_C"));te&&(C=t.initialData.transformations[te])}v[g.code]=C?{polytime:C.polytime,note:C.note||"",refs:[...C.refs]}:{polytime:"unknown",note:"",refs:[]}}else v[g.code]={polytime:"unknown",note:"",refs:[]}}),a(h,v,!0),a(ne,!0)}});var me=We(),de=Ye(me);{var N=v=>{var g=tr();g.__click=[Vt,be,t];var C=n(g);C.__click=[Na];var te=n(C),xe=n(te),Oe=n(xe);i(xe),yt(2),i(te);var ae=o(te,2),ue=n(ae);{var we=T=>{var _=Fa(),G=n(_,!0);i(_),L(()=>E(G,e(M))),x(T,_)};P(ue,T=>{e(M)&&T(we)})}var ye=o(ue,2),Ee=o(n(ye),2),Te=n(Ee),J=o(n(Te),2);Ge(J);var _e=o(J,2);{var X=T=>{var _=za(),G=o(n(_)),Me=n(G,!0);i(G),i(_),L(()=>E(Me,e(u))),x(T,_)};P(_e,T=>{e(u)&&!m()&&T(X)})}i(Te);var Q=o(Te,2),H=o(n(Q),2);Ge(H),i(Q),i(Ee);var Se=o(Ee,2),O=o(n(Se),2);mt(O),i(Se);var z=o(Se,2);{var ce=T=>{var _=qa(),G=o(n(_),2);le(G,21,f,se,(Me,ve)=>{var ge=Pa();ge.__click=[Ba,Fe,ve];var ze=n(ge,!0);i(ge),L(Ae=>{Ke(ge,1,Ae),E(ze,e(ve))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(j).includes(e(ve))?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),x(Me,ge)}),i(G),i(_),x(T,_)};P(z,T=>{f().length>0&&T(ce)})}i(ye);var oe=o(ye,2),he=o(n(oe),2);le(he,21,()=>t.queries,se,(T,_)=>{var G=We(),Me=Ye(G);{var ve=ge=>{var ze=Va(),Ae=n(ze),qe=n(Ae),Ue=n(qe),vt=n(Ue,!0);i(Ue);var Qe=o(Ue,2);le(Qe,21,()=>t.polytimeOptions,se,(fe,Re)=>{var ke=Ua(),Le=n(ke,!0);i(ke);var pe={};L(()=>{E(Le,e(Re).label),pe!==(pe=e(Re).value)&&(ke.value=(ke.__value=e(Re).value)??"")}),x(fe,ke)}),i(Qe),i(qe);var tt=o(qe,2),at=n(tt),He=o(at,2);Ge(He),i(tt),i(Ae);var rt=o(Ae,2);{var lt=fe=>{var Re=Ka();le(Re,21,f,se,(ke,Le)=>{var pe=Ha();pe.__click=[Qa,W,_,Le];var it=n(pe,!0);i(pe),L(st=>{Ke(pe,1,st),E(it,e(Le))},[()=>`px-2 py-0.5 text-xs rounded ${e(R)[e(_).code].refs.includes(e(Le))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),x(ke,pe)}),i(Re),x(fe,Re)};P(rt,fe=>{f().length>0&&fe(lt)})}i(ze),L(()=>{Pe(Ue,"for",`query-${e(_).code??""}-polytime`),E(vt,e(_).name),Pe(Qe,"id",`query-${e(_).code??""}-polytime`),Pe(at,"for",`query-${e(_).code??""}-note`),Pe(He,"id",`query-${e(_).code??""}-note`)}),ct(Qe,()=>e(R)[e(_).code].polytime,fe=>e(R)[e(_).code].polytime=fe),Be(He,()=>e(R)[e(_).code].note,fe=>e(R)[e(_).code].note=fe),x(ge,ze)};P(Me,ge=>{e(R)[e(_).code]&&ge(ve)})}x(T,G)}),i(he),i(oe);var re=o(oe,2),S=o(n(re),2);le(S,21,()=>t.transformations,se,(T,_)=>{var G=We(),Me=Ye(G);{var ve=ge=>{var ze=Wa(),Ae=n(ze),qe=n(Ae),Ue=n(qe),vt=n(Ue,!0);i(Ue);var Qe=o(Ue,2);le(Qe,21,()=>t.polytimeOptions,se,(fe,Re)=>{var ke=Xa(),Le=n(ke,!0);i(ke);var pe={};L(()=>{E(Le,e(Re).label),pe!==(pe=e(Re).value)&&(ke.value=(ke.__value=e(Re).value)??"")}),x(fe,ke)}),i(Qe),i(qe);var tt=o(qe,2),at=n(tt),He=o(at,2);Ge(He),i(tt),i(Ae);var rt=o(Ae,2);{var lt=fe=>{var Re=Ga();le(Re,21,f,se,(ke,Le)=>{var pe=Ya();pe.__click=[Ja,ee,_,Le];var it=n(pe,!0);i(pe),L(st=>{Ke(pe,1,st),E(it,e(Le))},[()=>`px-2 py-0.5 text-xs rounded ${e(h)[e(_).code].refs.includes(e(Le))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),x(ke,pe)}),i(Re),x(fe,Re)};P(rt,fe=>{f().length>0&&fe(lt)})}i(ze),L(()=>{Pe(Ue,"for",`transform-${e(_).code??""}-polytime`),E(vt,e(_).name),Pe(Qe,"id",`transform-${e(_).code??""}-polytime`),Pe(at,"for",`transform-${e(_).code??""}-note`),Pe(He,"id",`transform-${e(_).code??""}-note`)}),ct(Qe,()=>e(h)[e(_).code].polytime,fe=>e(h)[e(_).code].polytime=fe),Be(He,()=>e(h)[e(_).code].note,fe=>e(h)[e(_).code].note=fe),x(ge,ze)};P(Me,ge=>{e(h)[e(_).code]&&ge(ve)})}x(T,G)}),i(S),i(re);var D=o(re,2);{var F=T=>{var _=er(),G=o(n(_),2);le(G,21,()=>t.existingTags,se,(Me,ve)=>{var ge=$a();ge.__click=[Za,$,ve];var ze=n(ge,!0);i(ge),L((Ae,qe)=>{Ke(ge,1,Ae),Zt(ge,`background-color: ${e(ve).color??""}; color: white; ${qe??""}`),E(ze,e(ve).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(A).some(Ae=>Ae.id===e(ve).id)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(A).some(Ae=>Ae.id===e(ve).id)?`ring-color: ${e(ve).color};`:""]),x(Me,ge)}),i(G),i(_),x(T,_)};P(D,T=>{t.existingTags.length>0&&T(F)})}var K=o(D,2),Z=n(K);Z.__click=[Vt,be,t];var Y=o(Z,2);Y.__click=[Ma,u,p,k,q,M,t,j,R,h,A,I,be];var De=n(Y);i(Y),i(K),i(ae),i(C),i(g),L(T=>{E(Oe,`${m()?"Edit":"Add New"} Language`),Y.disabled=T,E(De,`${m()?"Update":"Add"} Language`)},[()=>!e(u).trim()||!e(p).trim()||!e(k).trim()||!e(q).trim()]),Be(J,()=>e(p),T=>a(p,T)),Be(H,()=>e(k),T=>a(k,T)),Be(O,()=>e(q),T=>a(q,T)),x(v,g)};P(de,v=>{c()&&v(N)})}x(d,me),et()}Ze(["click"]);function ar(d,t,c,f){e(t).trim()&&(c.onAdd(e(t).trim()),a(t,""),f(!1))}function Jt(d,t,c,f){t()||a(c,""),f.onClose()}var rr=d=>d.stopPropagation(),ir=y('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function nr(d,t){$e(t,!0);let c=Ce(t,"isOpen",15,!1),f=Ce(t,"initialValue",3,""),m=Ce(t,"isEditMode",3,!1),u=w(je(f()));Ve(()=>{c()&&f()&&a(u,f())});const p=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var k=We(),q=Ye(k);{var j=R=>{var h=ir();h.__click=[Jt,m,u,t];var A=n(h);A.__click=[rr];var I=n(A),M=n(I),be=n(M,!0);i(M);var Fe=o(M,2),$=n(Fe,!0);i(Fe),i(I);var W=o(I,2),ee=n(W),Ie=o(n(ee),2);mt(Ie),Pe(Ie,"placeholder",p),yt(2),i(ee);var ne=o(ee,2),me=n(ne);me.__click=[Jt,m,u,t];var de=o(me,2);de.__click=[ar,u,t,c];var N=n(de,!0);i(de),i(ne),i(W),i(A),i(h),L(v=>{E(be,m()?"Edit Reference":"Add New Reference"),E($,m()?"Update BibTeX citation":"Paste BibTeX citation"),de.disabled=v,E(N,m()?"Update Reference":"Add Reference")},[()=>!e(u).trim()]),Be(Ie,()=>e(u),v=>a(u,v)),x(R,h)};P(q,R=>{c()&&R(j)})}x(d,k),et()}Ze(["click"]);function or(d,t,c,f,m,u,p,k,q,j){!e(t)||!e(c)||!e(f)||e(t)===e(c)||(m.onSave({sourceId:e(t),targetId:e(c),status:e(f),description:e(u)||void 0,refs:e(p),separatingFunctions:e(k).length>0?e(k):void 0}),q(),j(!1))}function Yt(d,t,c){t(),c.onClose()}function lr(d,t){a(t,[...e(t),{shortName:"",name:"",description:"",refs:[]}],!0)}var sr=d=>d.stopPropagation(),dr=y("<option> </option>"),ur=y("<option> </option>"),cr=y("<option> </option>"),vr=y('<p class="text-xs text-gray-500 mt-1"> </p>'),gr=(d,t,c)=>t(e(c)),fr=y('<button type="button"> </button>'),br=y('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),mr=y(`<div class="p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2"><div class="flex items-start justify-between gap-2"><input type="text" placeholder="Short name (e.g., 'Clique')" class="flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-red-600 hover:text-red-800 font-bold">√ó</button></div> <input type="text" placeholder="Full name (e.g., 'Clique Detection Instances')" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <textarea placeholder="Description..." rows="2" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea></div>`),xr=y('<div class="space-y-3"></div>'),_r=y('<p class="text-sm text-gray-500 italic">No separating functions added yet.</p>'),pr=y('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <fieldset class="border-t pt-4"><div class="flex items-center justify-between mb-3"><legend class="block text-sm font-medium text-gray-700">Separating Functions (optional)</legend> <button type="button" class="text-sm text-blue-600 hover:text-blue-700 font-medium">+ Add Function</button></div> <!></fieldset> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function yr(d,t){$e(t,!0);let c=Ce(t,"isOpen",15,!1),f=Ce(t,"availableRefs",19,()=>[]),m=Ce(t,"baselineRelations",19,()=>new Map),u=w(""),p=w(""),k=w(""),q=w(""),j=w(je([])),R=w(je([]));Ve(()=>{c()&&t.initialData&&(a(u,t.initialData.sourceId,!0),a(p,t.initialData.targetId,!0),a(k,t.initialData.status,!0),a(q,t.initialData.description||"",!0),a(j,[...t.initialData.refs],!0),a(R,t.initialData.separatingFunctions?t.initialData.separatingFunctions.map($=>({...$})):[],!0))}),Ve(()=>{if(e(u)&&e(p)&&e(u)!==e(p)){const $=`${e(u)}->${e(p)}`,W=m().get($);W&&(a(k,W.status,!0),a(j,[...W.refs],!0),a(R,W.separatingFunctions.map(ee=>({...ee})),!0))}});function h(){a(u,""),a(p,""),a(k,""),a(q,""),a(j,[],!0),a(R,[],!0)}function A($){e(j).includes($)?a(j,e(j).filter(W=>W!==$),!0):a(j,[...e(j),$],!0)}function I($){a(R,e(R).filter((W,ee)=>ee!==$),!0)}var M=We(),be=Ye(M);{var Fe=$=>{var W=pr();W.__click=[Yt,h,t];var ee=n(W);ee.__click=[sr];var Ie=o(n(ee),2),ne=n(Ie),me=n(ne),de=o(n(me),2),N=n(de);N.value=N.__value="";var v=o(N);le(v,17,()=>t.languages,se,(S,D)=>{var F=dr(),K=n(F);i(F);var Z={};L(()=>{E(K,`${e(D).name??""} (${e(D).id??""})`),Z!==(Z=e(D).id)&&(F.value=(F.__value=e(D).id)??"")}),x(S,F)}),i(de),i(me);var g=o(me,2),C=o(n(g),2),te=n(C);te.value=te.__value="";var xe=o(te);le(xe,17,()=>t.languages,se,(S,D)=>{var F=ur(),K=n(F);i(F);var Z={};L(()=>{F.disabled=e(D).id===e(u),E(K,`${e(D).name??""} (${e(D).id??""})`),Z!==(Z=e(D).id)&&(F.value=(F.__value=e(D).id)??"")}),x(S,F)}),i(C),i(g),i(ne);var Oe=o(ne,2),ae=o(n(Oe),2),ue=n(ae);ue.value=ue.__value="";var we=o(ue);le(we,17,()=>t.statusOptions,se,(S,D)=>{var F=cr(),K=n(F,!0);i(F);var Z={};L(()=>{E(K,e(D).label),Z!==(Z=e(D).value)&&(F.value=(F.__value=e(D).value)??"")}),x(S,F)}),i(ae);var ye=o(ae,2);{var Ee=S=>{const D=B(()=>t.statusOptions.find(Y=>Y.value===e(k)));var F=We(),K=Ye(F);{var Z=Y=>{var De=vr(),T=n(De,!0);i(De),L(()=>E(T,e(D).description)),x(Y,De)};P(K,Y=>{e(D)&&Y(Z)})}x(S,F)};P(ye,S=>{e(k)&&S(Ee)})}i(Oe);var Te=o(Oe,2),J=o(n(Te),2);mt(J),i(Te);var _e=o(Te,2);{var X=S=>{var D=br(),F=o(n(D),2);le(F,21,f,se,(K,Z)=>{var Y=fr();Y.__click=[gr,A,Z];var De=n(Y,!0);i(Y),L(T=>{Ke(Y,1,T),E(De,e(Z))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(j).includes(e(Z))?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),x(K,Y)}),i(F),i(D),x(S,D)};P(_e,S=>{f().length>0&&S(X)})}var Q=o(_e,2),H=n(Q),Se=o(n(H),2);Se.__click=[lr,R],i(H);var O=o(H,2);{var z=S=>{var D=xr();le(D,21,()=>e(R),se,(F,K,Z)=>{var Y=mr(),De=n(Y),T=n(De);Ge(T);var _=o(T,2);_.__click=()=>I(Z),i(De);var G=o(De,2);Ge(G);var Me=o(G,2);mt(Me),i(Y),Be(T,()=>e(K).shortName,ve=>e(K).shortName=ve),Be(G,()=>e(K).name,ve=>e(K).name=ve),Be(Me,()=>e(K).description,ve=>e(K).description=ve),x(F,Y)}),i(D),x(S,D)},ce=S=>{var D=_r();x(S,D)};P(O,S=>{e(R).length>0?S(z):S(ce,!1)})}i(Q);var oe=o(Q,2),he=n(oe);he.__click=[Yt,h,t];var re=o(he,2);re.__click=[or,u,p,k,t,q,j,R,h,c],i(oe),i(Ie),i(ee),i(W),L(()=>re.disabled=!e(u)||!e(p)||!e(k)||e(u)===e(p)),ct(de,()=>e(u),S=>a(u,S)),ct(C,()=>e(p),S=>a(p,S)),ct(ae,()=>e(k),S=>a(k,S)),Be(J,()=>e(q),S=>a(q,S)),x($,W)};P(be,$=>{c()&&$(Fe)})}x(d,M),et()}Ze(["click"]);var hr=(d,t)=>t.onToggleExpand(t.index),wr=(d,t)=>t.onEdit(t.index),Er=(d,t)=>t.onDelete(t.index),kr=y('<div class="text-gray-500 italic"> </div>'),Rr=y('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),Tr=y('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Sr=y('<div class="text-gray-500 italic"> </div>'),Dr=y('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),Ar=y('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Ir=y('<span class="px-2 py-1 rounded text-white text-xs"> </span>'),Or=y('<div><div class="font-semibold text-gray-700 mb-1">Tags:</div> <div class="flex flex-wrap gap-1"></div></div>'),Lr=y('<div><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="text-gray-900"> </div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="text-gray-900"> </div></div> <!> <!> <!></div>'),jr=y('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Gt(d,t){$e(t,!0);let c=Ce(t,"isExpanded",3,!1),f=Ce(t,"isEdit",3,!1);const m=f()?"border-yellow-300":"border-green-300",u=f()?"bg-yellow-50":"bg-green-50",p=f()?"text-yellow-800":"text-green-800",k=f()?"bg-yellow-100 hover:bg-yellow-200":"bg-green-100 hover:bg-green-200",q=f()?"text-yellow-800":"text-green-800",j=f()?"border-yellow-300":"border-green-300",R=f()?"border-yellow-200":"border-green-200";var h=jr(),A=n(h),I=n(A),M=n(I),be=n(M,!0);i(M);var Fe=o(M,2),$=n(Fe,!0);i(Fe),i(I);var W=o(I,2),ee=n(W);ee.__click=[hr,t];var Ie=n(ee,!0);i(ee);var ne=o(ee,2);ne.__click=[wr,t];var me=o(ne,2);me.__click=[Er,t],i(W),i(A);var de=o(A,2);{var N=v=>{var g=Lr(),C=n(g),te=o(n(C),2),xe=n(te,!0);i(te),i(C);var Oe=o(C,2),ae=o(n(Oe),2),ue=n(ae,!0);i(ae),i(Oe);var we=o(Oe,2);{var ye=X=>{var Q=Tr(),H=n(Q),Se=n(H);i(H);var O=o(H,2);le(O,21,()=>Object.entries(t.language.queries),se,(z,ce)=>{var oe=B(()=>Kt(e(ce),2));let he=()=>e(oe)[0],re=()=>e(oe)[1];var S=Rr(),D=n(S),F=n(D,!0);i(D);var K=o(D,2),Z=n(K,!0);i(K);var Y=o(K,2);{var De=T=>{var _=kr(),G=n(_,!0);i(_),L(()=>E(G,re().note)),x(T,_)};P(Y,T=>{re().note&&T(De)})}i(S),L(()=>{E(F,he()),E(Z,re().polytime)}),x(z,S)}),i(O),i(Q),L(z=>E(Se,`Query Support (${z??""}):`),[()=>Object.keys(t.language.queries).length]),x(X,Q)};P(we,X=>{t.language.queries&&Object.keys(t.language.queries).length>0&&X(ye)})}var Ee=o(we,2);{var Te=X=>{var Q=Ar(),H=n(Q),Se=n(H);i(H);var O=o(H,2);le(O,21,()=>Object.entries(t.language.transformations),se,(z,ce)=>{var oe=B(()=>Kt(e(ce),2));let he=()=>e(oe)[0],re=()=>e(oe)[1];var S=Dr(),D=n(S),F=n(D,!0);i(D);var K=o(D,2),Z=n(K,!0);i(K);var Y=o(K,2);{var De=T=>{var _=Sr(),G=n(_,!0);i(_),L(()=>E(G,re().note)),x(T,_)};P(Y,T=>{re().note&&T(De)})}i(S),L(()=>{E(F,he()),E(Z,re().polytime)}),x(z,S)}),i(O),i(Q),L(z=>E(Se,`Transformation Support (${z??""}):`),[()=>Object.keys(t.language.transformations).length]),x(X,Q)};P(Ee,X=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&X(Te)})}var J=o(Ee,2);{var _e=X=>{var Q=Or(),H=o(n(Q),2);le(H,21,()=>t.language.tags,se,(Se,O)=>{var z=Ir(),ce=n(z,!0);i(z),L(()=>{Zt(z,`background-color: ${e(O).color??""}`),E(ce,e(O).label)}),x(Se,z)}),i(H),i(Q),x(X,Q)};P(J,X=>{t.language.tags&&t.language.tags.length>0&&X(_e)})}i(g),L(()=>{Ke(g,1,`mt-4 pt-4 border-t ${R} space-y-3 text-xs`),E(xe,t.language.fullName),E(ue,t.language.description)}),x(v,g)};P(de,v=>{c()&&v(N)})}i(h),L(()=>{Ke(h,1,`border-2 ${m} ${u} rounded-lg p-3`),Ke(M,1,`text-sm font-semibold ${p}`),E(be,f()?"Edit Language:":"New Language:"),E($,t.language.name),Ke(ee,1,`px-2 py-1 text-xs ${k} ${q} rounded border ${j}`),Pe(ee,"aria-label",c()?"Collapse":"Expand"),E(Ie,c()?"Collapse":"Expand")}),x(d,h),et()}Ze(["click"]);var Cr=(d,t)=>t.onToggleExpand(t.index),Mr=(d,t)=>t.onEdit(t.index),Nr=(d,t)=>t.onDelete(t.index),Fr=y('<div class="mt-4 pt-4 border-t border-purple-200"><pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto"> </pre></div>'),zr=y('<div class="border-2 border-purple-300 bg-purple-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-purple-800">Reference</span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Br(d,t){$e(t,!0);let c=Ce(t,"isExpanded",3,!1);var f=zr(),m=n(f),u=o(n(m),2),p=n(u);p.__click=[Cr,t];var k=n(p,!0);i(p);var q=o(p,2);q.__click=[Mr,t];var j=o(q,2);j.__click=[Nr,t],i(u),i(m);var R=o(m,2);{var h=A=>{var I=Fr(),M=n(I),be=n(M,!0);i(M),i(I),L(()=>E(be,t.reference)),x(A,I)};P(R,A=>{c()&&A(h)})}i(f),L(()=>{Pe(p,"aria-label",c()?"Collapse":"Expand"),E(k,c()?"Collapse":"Expand")}),x(d,f),et()}Ze(["click"]);var Pr=(d,t)=>t.onToggleExpand(t.index),qr=(d,t)=>t.onEdit(t.index),Ur=(d,t,c)=>t.onDelete(t.index,c),Qr=y('<div class="text-gray-500 text-xs mt-1"> </div>'),Hr=y('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600 text-xs"> </div> <div class="text-gray-500 italic text-xs"> </div> <!></div>'),Kr=y('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),Vr=y('<div><div class="font-semibold text-gray-700 mb-1">References:</div> <div class="text-gray-600"> </div></div>'),Xr=y('<div class="mt-4 pt-4 border-t border-blue-200 space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Transformation Status:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!></div>'),Jr=y('<div class="border-2 border-blue-300 bg-blue-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-blue-800">Relationship:</span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Yr(d,t){$e(t,!0);let c=Ce(t,"isExpanded",3,!1),f=Ce(t,"isModified",3,!1);const m=ot(t.relationship.sourceId,t.relationship.targetId);var u=We(),p=Ye(u);{var k=q=>{var j=Jr(),R=n(j),h=n(R),A=o(n(h),2),I=n(A);i(A),i(h);var M=o(h,2),be=n(M);be.__click=[Pr,t];var Fe=n(be,!0);i(be);var $=o(be,2);$.__click=[qr,t];var W=o($,2);W.__click=[Ur,t,m],i(M),i(R);var ee=o(R,2);{var Ie=ne=>{var me=Xr(),de=n(me),N=o(n(de),2),v=n(N),g=n(v,!0);i(v),i(N),i(de);var C=o(de,2);{var te=ae=>{var ue=Kr(),we=n(ue),ye=n(we);i(we);var Ee=o(we,2);le(Ee,21,()=>t.relationship.separatingFunctions,se,(Te,J)=>{var _e=Hr(),X=n(_e),Q=n(X,!0);i(X);var H=o(X,2),Se=n(H);i(H);var O=o(H,2),z=n(O,!0);i(O);var ce=o(O,2);{var oe=he=>{var re=Qr(),S=n(re);i(re),L(D=>E(S,`Refs: [${D??""}]`),[()=>e(J).refs.join(", ")]),x(he,re)};P(ce,he=>{e(J).refs&&e(J).refs.length>0&&he(oe)})}i(_e),L(()=>{E(Q,e(J).name),E(Se,`Short: ${e(J).shortName??""}`),E(z,e(J).description)}),x(Te,_e)}),i(Ee),i(ue),L(()=>E(ye,`Separating Functions (${t.relationship.separatingFunctions.length??""}):`)),x(ae,ue)};P(C,ae=>{t.relationship.separatingFunctions&&t.relationship.separatingFunctions.length>0&&ae(te)})}var xe=o(C,2);{var Oe=ae=>{var ue=Vr(),we=o(n(ue),2),ye=n(we,!0);i(we),i(ue),L(Ee=>E(ye,Ee),[()=>t.relationship.refs.join(", ")]),x(ae,ue)};P(xe,ae=>{t.relationship.refs&&t.relationship.refs.length>0&&ae(Oe)})}i(me),L(()=>E(g,t.relationship.status)),x(ne,me)};P(ee,ne=>{c()&&ne(Ie)})}i(j),L(()=>{E(I,`${t.relationship.sourceId??""} ‚Üí ${t.relationship.targetId??""}`),Pe(be,"aria-label",c()?"Collapse":"Expand"),E(Fe,c()?"Collapse":"Expand")}),x(q,j)};P(p,q=>{f()&&q(k)})}x(d,u),et()}Ze(["click"]);var Gr=y('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),Wr=y(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!></div></div>`);function Zr(d,t){$e(t,!0);const c=B(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.relationships.filter(h=>t.modifiedRelations.has(ot(h.sourceId,h.targetId))).length>0);var f=Wr(),m=o(n(f),4),u=n(m);le(u,17,()=>t.newReferences,se,(h,A,I)=>{{let M=B(()=>t.expandedReferenceIndex===I);Br(h,{get reference(){return e(A)},index:I,get isExpanded(){return e(M)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var p=o(u,2);le(p,17,()=>t.languagesToAdd,se,(h,A,I)=>{{let M=B(()=>t.expandedLanguageToAddIndex===I);Gt(h,{get language(){return e(A)},index:I,get isExpanded(){return e(M)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var k=o(p,2);le(k,17,()=>t.languagesToEdit,se,(h,A,I)=>{{let M=B(()=>t.expandedLanguageToEditIndex===I);Gt(h,{get language(){return e(A)},index:I,get isExpanded(){return e(M)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var q=o(k,2);le(q,17,()=>t.relationships,se,(h,A,I)=>{const M=B(()=>t.modifiedRelations.has(ot(e(A).sourceId,e(A).targetId)));{let be=B(()=>t.expandedRelationshipIndex===I);Yr(h,{get relationship(){return e(A)},index:I,get isModified(){return e(M)},get isExpanded(){return e(be)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var j=o(q,2);{var R=h=>{var A=Gr();x(h,A)};P(j,h=>{e(c)||h(R)})}i(m),i(f),x(d,f),et()}var $r=y('<div class="grid grid-cols-2 md:grid-cols-4 gap-3"><button type="button" class="px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">+ New Language</button> <button type="button" class="px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">‚úé Edit Language</button> <button type="button" class="px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">üîó Manage Relationships</button> <button type="button" class="px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">+ New Reference</button></div>');function ei(d,t){var c=$r(),f=n(c);f.__click=function(...k){t.onAddLanguage?.apply(this,k)};var m=o(f,2);m.__click=function(...k){t.onEditLanguage?.apply(this,k)};var u=o(m,2);u.__click=function(...k){t.onManageRelationships?.apply(this,k)};var p=o(u,2);p.__click=function(...k){t.onAddReference?.apply(this,k)},i(c),x(d,c)}Ze(["click"]);var ti=y('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function ai(d,t){let c=Ce(t,"disabled",3,!1);var f=ti(),m=n(f);yt(2),i(f),L(()=>m.disabled=c()),x(d,f)}function Wt(d,t,c){const f=!e(t);a(t,f),f&&a(c,It(),!0)}function ri(d,t){a(t,null)}var ii=y('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),ni=y('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),oi=y('<div class="text-xs font-medium text-amber-600">Superseded</div>'),li=y('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),si=(d,t,c)=>t(e(c)),di=y('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),ui=y('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),ci=y('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),vi=(d,t)=>a(t,!1),gi=d=>d.stopPropagation(),fi=y("<option> </option>"),bi=(d,t,c)=>{a(t,""),a(c,!1)},mi=(d,t,c,f)=>{e(t)&&(a(c,!1),a(f,!0))},xi=y('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),_i=y('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">üóÇÔ∏è</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!>',1);function Ti(d,t){$e(t,!0);const c="kcm_contribute_queue_v1",f="kcm_contributor_info_v1",m=r=>typeof r=="string",u=r=>Array.isArray(r)?r.filter(m):[],p=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():ya(),k=r=>typeof r=="string"&&r.trim().length>0?r:null;function q(r){if(!r||typeof r!="object")return{};const s={};for(const[l,b]of Object.entries(r)){if(!b||typeof b!="object")continue;const V=m(b.polytime)?b.polytime:"unknown",Ne=m(b.note)?b.note:void 0,Xe=u(b.refs),U={polytime:V,refs:Xe};Ne&&(U.note=Ne),s[l]=U}return s}function j(r){if(!Array.isArray(r))return[];const s=[];for(const l of r){if(!l||typeof l!="object")continue;const b=l;!m(b.id)||!m(b.label)||s.push({id:b.id,label:b.label,color:m(b.color)?b.color:"#6366f1",description:m(b.description)?b.description:void 0,refs:u(b.refs)})}return s}function R(r){return Array.isArray(r)?r.map(s=>{if(!s||typeof s!="object")return null;const l=s;return!m(l.id)||!m(l.name)||!m(l.fullName)||!m(l.description)?null:{id:l.id,name:l.name,fullName:l.fullName,description:l.description,descriptionRefs:u(l.descriptionRefs),queries:q(l.queries),transformations:q(l.transformations),tags:j(l.tags),existingReferences:u(l.existingReferences)}}).filter(s=>s!==null):[]}function h(r){if(!Array.isArray(r))return[];const s=[];for(const l of r){if(!l||typeof l!="object")continue;const b=l;!m(b.shortName)||!m(b.name)||!m(b.description)||s.push({shortName:b.shortName,name:b.name,description:b.description,refs:u(b.refs)})}return s}function A(r){return Array.isArray(r)?r.map(s=>{if(!s||typeof s!="object")return null;const l=s;if(!m(l.sourceId)||!m(l.targetId)||!m(l.status))return null;const b=h(l.separatingFunctions),V={sourceId:l.sourceId,targetId:l.targetId,status:l.status,refs:u(l.refs)};return b.length>0&&(V.separatingFunctions=b),V}).filter(s=>s!==null):[]}const I=r=>({...r,descriptionRefs:[...r.descriptionRefs],queries:Object.fromEntries(Object.entries(r.queries).map(([s,l])=>[s,{...l,refs:[...l.refs]}])),transformations:Object.fromEntries(Object.entries(r.transformations).map(([s,l])=>[s,{...l,refs:[...l.refs]}])),tags:r.tags.map(s=>({...s,refs:[...s.refs]})),existingReferences:[...r.existingReferences]}),M=r=>({...r,refs:[...r.refs],separatingFunctions:r.separatingFunctions?r.separatingFunctions.map(s=>({...s,refs:[...s.refs]})):void 0}),be=r=>({...r,refs:[...r.refs]}),Fe=r=>{try{return new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(new Date(r))}catch{return r}},$=r=>{const s=[];return r.summary.languagesToAdd&&s.push(`${r.summary.languagesToAdd} new ${r.summary.languagesToAdd===1?"language":"languages"}`),r.summary.languagesToEdit&&s.push(`${r.summary.languagesToEdit} edit${r.summary.languagesToEdit===1?"":"s"}`),r.summary.relationships&&s.push(`${r.summary.relationships} relation${r.summary.relationships===1?"":"s"}`),r.summary.newReferences&&s.push(`${r.summary.newReferences} reference${r.summary.newReferences===1?"":"s"}`),s.length>0?s.join(" ¬∑ "):"No changes"},W=Object.values(t.data.polytimeOptions),ee=t.data.relationTypes.map(r=>({value:r.id,label:r.name,description:r.description??""})),Ie=pa(t.data.adjacencyMatrix);let ne=w(""),me=w(""),de=w(""),N=w(je([])),v=w(je([])),g=w(je([])),C=w(null),te=w(null),xe=w(null),Oe=w(null),ae=w(!1),ue=w(!1),we=w(!1),ye=w(""),Ee=w(!1),Te=w(!1),J=w(null),_e=w(null),X=w(null),Q=w(null),H=w(je(new Set)),Se=w(!1),O=w(je([])),z=w(je([])),ce=w(""),oe=w(null),he=w(je([])),re=w(!1);const S=B(()=>e(N).length>0||e(v).length>0||e(g).filter(r=>e(H).has(ot(r.sourceId,r.targetId))).length>0||e(O).length>0||e(z).length>0);let D=!1;Ve(()=>{const r=e(S);r&&!D&&!e(ce)&&a(ce,p(),!0),!r&&D&&(a(ce,p(),!0),a(oe,null)),D=r}),Ea(()=>{a(he,It(),!0);try{const r=localStorage.getItem(c);if(r){const l=JSON.parse(r);a(N,R(l?.languagesToAdd),!0),a(v,R(l?.languagesToEdit),!0),a(g,A(l?.relationships),!0),a(O,u(l?.newReferences),!0),a(z,j(l?.customTags),!0),a(H,new Set(u(l?.modifiedRelations)),!0),a(ce,k(l?.submissionId)??"",!0),a(oe,k(l?.supersedesSubmissionId),!0)}const s=localStorage.getItem(f);if(s){const l=JSON.parse(s);m(l?.email)&&a(ne,l.email,!0),m(l?.github)&&a(me,l.github,!0),m(l?.note)&&a(de,l.note,!0)}}catch(r){console.warn("Failed to restore queued changes from storage",r)}finally{a(Se,!0)}e(ce)||a(ce,p(),!0)});function F(r){const s=r(e(H));a(H,new Set(s),!0)}function K(r){const s=ot(r.sourceId,r.targetId);F(l=>{const b=new Set(l);return b.add(s),b})}function Z(r){F(s=>{if(!s.has(r))return s;const l=new Set(s);return l.delete(r),l})}Ve(()=>{if(!e(Se)||!Qt)return;if(e(ce)||a(ce,p(),!0),e(N).length===0&&e(v).length===0&&e(g).length===0&&e(O).length===0&&e(z).length===0&&e(H).size===0){try{localStorage.removeItem(c)}catch(l){console.warn("Failed to clear queued changes from storage",l)}a(oe,null);return}const s={languagesToAdd:e(N),languagesToEdit:e(v),relationships:e(g),newReferences:e(O),customTags:e(z),modifiedRelations:Array.from(e(H)),submissionId:e(ce),supersedesSubmissionId:e(oe)??null};try{localStorage.setItem(c,JSON.stringify(s))}catch(l){console.warn("Failed to persist queued changes",l)}}),Ve(()=>{if(!e(Se)||!Qt)return;const r={email:e(ne),github:e(me),note:e(de)};try{localStorage.setItem(f,JSON.stringify(r))}catch(s){console.warn("Failed to persist contributor info",s)}});function Y(r){return a(N,[...e(N),r],!0),{success:!0}}function De(r){const s=e(v).findIndex(l=>l.id===r.id);return s>=0?(e(v)[s]=r,a(v,[...e(v)],!0)):a(v,[...e(v),r],!0),{success:!0}}function T(r){a(O,[...e(O),r],!0)}let _=w(null);function G(r){a(_,{languages:e(N).slice(r+1),editedLanguages:e(v).slice(r+1),references:e(O).slice(r+1),relationships:e(g).filter((s,l)=>l>r),tags:e(z).slice(r+1)},!0),a(N,e(N).slice(0,r+1),!0),a(v,e(v).slice(0,r+1),!0),a(O,e(O).slice(0,r+1),!0),a(g,e(g).slice(0,r+1),!0),a(z,e(z).slice(0,r+1),!0),a(J,r,!0),a(Ee,!0)}function Me(r){e(J)!==null&&(e(O)[e(J)]=r,a(O,[...e(O)],!0),e(_)&&(a(N,[...e(N),...e(_).languages],!0),a(v,[...e(v),...e(_).editedLanguages],!0),a(O,[...e(O),...e(_).references],!0),a(g,[...e(g),...e(_).relationships],!0),a(z,[...e(z),...e(_).tags],!0)),a(J,null),a(_,null))}function ve(r){a(_e,r,!0),a(ae,!0)}function ge(r){return e(_e)!==null&&(e(N)[e(_e)]=r,a(N,[...e(N)],!0),a(_e,null)),{success:!0}}function ze(r){a(X,r,!0),a(ue,!0)}function Ae(r){return e(X)!==null&&(e(v)[e(X)]=r,a(v,[...e(v)],!0),a(X,null)),{success:!0}}function qe(r){a(Q,r,!0),a(Te,!0)}function Ue(r){e(Q)!==null&&(e(g)[e(Q)]=r,a(g,[...e(g)],!0),K(r),a(Q,null))}function vt(r){if(e(Q)!==null){Ue(r);return}const s=ot(r.sourceId,r.targetId),l=e(g).findIndex(b=>ot(b.sourceId,b.targetId)===s);l>=0?(e(g)[l]=r,a(g,[...e(g)],!0)):a(g,[...e(g),r],!0),K(r)}function Qe(r){const s=new Set(t.data.existingReferences.map(b=>b.id));for(let b=0;b<r;b++){const V=Ht(e(O)[b],s);s.add(V)}const l=Ht(e(O)[r],s);a(O,e(O).filter((b,V)=>V!==r),!0),e(N).forEach(b=>{b.descriptionRefs=b.descriptionRefs.filter(V=>V!==l)}),e(v).forEach(b=>{b.descriptionRefs=b.descriptionRefs.filter(V=>V!==l)}),e(g).forEach(b=>{b.refs=b.refs.filter(V=>V!==l),b.separatingFunctions?.forEach(V=>{V.refs=V.refs.filter(Ne=>Ne!==l)})}),e(z).forEach(b=>{b.refs=b.refs.filter(V=>V!==l)}),a(N,[...e(N)],!0),a(v,[...e(v)],!0),a(g,[...e(g)],!0),a(z,[...e(z)],!0)}function tt(r){const s=r.payload;a(N,s.languagesToAdd.map(I),!0),a(v,s.languagesToEdit.map(I),!0),a(g,s.relationships.map(M),!0),a(O,[...s.newReferences],!0),a(z,s.customTags.map(be),!0),a(H,new Set(s.modifiedRelations),!0),a(ne,s.contributor.email,!0),a(me,s.contributor.github,!0),a(de,s.contributor.note,!0),a(oe,s.submissionId,!0),a(ce,p(),!0),a(he,It(),!0),a(re,!1),a(J,null),a(_,null),a(_e,null),a(X,null),a(Q,null),a(C,null),a(te,null),a(xe,null),a(Oe,null)}function at(r){r.preventDefault(),window.location.href="/"}var He=_i();Oa(r=>{La.title="Contribute - Knowledge Compilation Map"});var rt=Ye(He),lt=n(rt),fe=o(n(lt),2),Re=o(n(fe),2),ke=n(Re),Le=n(ke),pe=o(n(Le),2),it=n(pe),st=o(n(it),2);Ge(st),i(it);var Ot=o(it,2),Lt=o(n(Ot),2);Ge(Lt),i(Ot),i(pe);var jt=o(pe,2),Ct=o(n(jt),2);mt(Ct),yt(2),i(jt),i(Le);var ht=o(Le,2),Mt=n(ht);{var $t=r=>{var s=ii(),l=o(n(s),2);l.__click=[ri,oe],i(s),x(r,s)};P(Mt,r=>{e(oe)&&r($t)})}var wt=o(Mt,2);wt.__click=[Wt,re,he];var ea=o(n(wt),2);i(wt),i(ht);var Nt=o(ht,2);{var ta=r=>{var s=ci(),l=n(s),b=o(n(l),2);b.__click=[Wt,re,he],i(l);var V=o(l,2);{var Ne=U=>{var ie=ni();x(U,ie)},Xe=U=>{var ie=ui();le(ie,21,()=>e(he),se,(xt,Je)=>{const dt=B(()=>$(e(Je))),nt=B(()=>Fe(e(Je).createdAt));var gt=di(),ft=n(gt),Et=n(ft),kt=n(Et),na=n(kt,!0);i(kt);var Rt=o(kt,2),oa=n(Rt,!0);i(Rt);var la=o(Rt,2);{var sa=ut=>{var _t=oi();x(ut,_t)},da=ut=>{var _t=We(),ca=Ye(_t);{var va=Tt=>{var ga=li();x(Tt,ga)};P(ca,Tt=>{e(Je).payload.submissionId===e(oe)&&Tt(va)},!0)}x(ut,_t)};P(la,ut=>{e(Je).supersededBySubmissionId?ut(sa):ut(da,!1)})}i(Et);var ua=o(Et,2);ua.__click=[si,tt,Je],i(ft),i(gt),L(()=>{E(na,e(nt)),E(oa,e(dt))}),x(xt,gt)}),i(ie),x(U,ie)};P(V,U=>{e(he).length===0?U(Ne):U(Xe,!1)})}i(s),x(r,s)};P(Nt,r=>{e(re)&&r(ta)})}var Ft=o(Nt,2);Zr(Ft,{get languagesToAdd(){return e(N)},get languagesToEdit(){return e(v)},get newReferences(){return e(O)},get relationships(){return e(g)},get modifiedRelations(){return e(H)},get expandedLanguageToAddIndex(){return e(C)},get expandedLanguageToEditIndex(){return e(te)},get expandedReferenceIndex(){return e(Oe)},get expandedRelationshipIndex(){return e(xe)},onToggleExpandLanguageToAdd:r=>a(C,e(C)===r?null:r,!0),onToggleExpandLanguageToEdit:r=>a(te,e(te)===r?null:r,!0),onToggleExpandReference:r=>a(Oe,e(Oe)===r?null:r,!0),onToggleExpandRelationship:r=>a(xe,e(xe)===r?null:r,!0),onEditLanguageToAdd:ve,onEditLanguageToEdit:ze,onDeleteLanguageToAdd:r=>a(N,e(N).filter((s,l)=>l!==r),!0),onDeleteLanguageToEdit:r=>a(v,e(v).filter((s,l)=>l!==r),!0),onEditReference:G,onDeleteReference:Qe,onEditRelationship:qe,onDeleteRelationship:(r,s)=>{a(g,e(g).filter((l,b)=>b!==r),!0),Z(s)}});var zt=o(Ft,2);ei(zt,{onAddLanguage:()=>a(ae,!0),onEditLanguage:()=>a(we,!0),onManageRelationships:()=>a(Te,!0),onAddReference:()=>a(Ee,!0)});var aa=o(zt,2);{let r=B(()=>!e(S));ai(aa,{get disabled(){return e(r)}})}i(ke),i(Re),i(fe),i(lt),i(rt);var Bt=o(rt,2);{let r=B(()=>e(_e)!==null?ge:Y),s=B(()=>e(_e)!==null),l=B(()=>e(_e)!==null?e(N)[e(_e)]:void 0),b=B(()=>Object.values(t.data.queries).map(ie=>({code:ie.code,name:ie.label}))),V=B(()=>Object.values(t.data.transformations).map(ie=>({code:ie.code,name:ie.label}))),Ne=B(()=>W.map(ie=>({value:ie.code,label:ie.label,description:ie.description||""}))),Xe=B(()=>[...t.data.existingTags,...e(z)].map(ie=>({id:ie.id,label:ie.label,color:ie.color||"#6366f1",description:"",refs:[]}))),U=B(()=>St(t.data.existingReferences,e(O)));Xt(Bt,{onClose:()=>{a(ae,!1),a(_e,null)},get onAdd(){return e(r)},get isEdit(){return e(s)},get initialData(){return e(l)},get queries(){return e(b)},get transformations(){return e(V)},get polytimeOptions(){return e(Ne)},get existingTags(){return e(Xe)},get availableRefs(){return e(U)},get isOpen(){return e(ae)},set isOpen(ie){a(ae,ie,!0)}})}var Pt=o(Bt,2);{let r=B(()=>e(X)!==null?Ae:De),s=B(()=>e(X)!==null?e(v)[e(X)]:e(ye)?ha(t.data.languages.find(U=>U.id===e(ye))):void 0),l=B(()=>Object.values(t.data.queries).map(U=>({code:U.code,name:U.label}))),b=B(()=>Object.values(t.data.transformations).map(U=>({code:U.code,name:U.label}))),V=B(()=>W.map(U=>({value:U.code,label:U.label,description:U.description||""}))),Ne=B(()=>[...t.data.existingTags,...e(z)].map(U=>({id:U.id,label:U.label,color:U.color||"#6366f1",description:"",refs:[]}))),Xe=B(()=>St(t.data.existingReferences,e(O)));Xt(Pt,{onClose:()=>{a(ue,!1),a(ye,""),a(X,null)},get onAdd(){return e(r)},isEdit:!0,get initialData(){return e(s)},get queries(){return e(l)},get transformations(){return e(b)},get polytimeOptions(){return e(V)},get existingTags(){return e(Ne)},get availableRefs(){return e(Xe)},get isOpen(){return e(ue)},set isOpen(U){a(ue,U,!0)}})}var qt=o(Pt,2);{var ra=r=>{var s=xi();s.__click=[vi,we];var l=n(s);l.__click=[gi];var b=o(n(l),2),V=o(n(b),2),Ne=n(V);Ne.value=Ne.__value="";var Xe=o(Ne);le(Xe,17,()=>t.data.languages,se,(Je,dt)=>{var nt=fi(),gt=n(nt);i(nt);var ft={};L(()=>{E(gt,`${e(dt).name??""} (${e(dt).id??""})`),ft!==(ft=e(dt).id)&&(nt.value=(nt.__value=e(dt).id)??"")}),x(Je,nt)}),i(V);var U=o(V,2),ie=n(U);ie.__click=[bi,ye,we];var xt=o(ie,2);xt.__click=[mi,ye,we,ue],i(U),i(b),i(l),i(s),L(()=>xt.disabled=!e(ye)),ct(V,()=>e(ye),Je=>a(ye,Je)),x(r,s)};P(qt,r=>{e(we)&&r(ra)})}var Ut=o(qt,2);{let r=B(()=>e(J)!==null?Me:T),s=B(()=>e(J)!==null?e(O)[e(J)]:""),l=B(()=>e(J)!==null);nr(Ut,{onClose:()=>{a(Ee,!1),a(J,null),a(_,null)},get onAdd(){return e(r)},get initialValue(){return e(s)},get isEditMode(){return e(l)},get isOpen(){return e(Ee)},set isOpen(b){a(Ee,b,!0)}})}var ia=o(Ut,2);{let r=B(()=>e(Q)!==null?e(g)[e(Q)]:void 0),s=B(()=>wa(t.data.languages,e(N),e(v))),l=B(()=>St(t.data.existingReferences,e(O)));yr(ia,{onClose:()=>{a(Te,!1),a(Q,null)},onSave:vt,get initialData(){return e(r)},get languages(){return e(s)},get statusOptions(){return ee},get availableRefs(){return e(l)},get baselineRelations(){return Ie},get isOpen(){return e(Te)},set isOpen(b){a(Te,b,!0)}})}L(()=>Ke(ea,0,`h-3 w-3 transition-transform ${e(re)?"rotate-180":""}`)),ka("submit",ke,at),Be(st,()=>e(ne),r=>a(ne,r)),Be(Lt,()=>e(me),r=>a(me,r)),Be(Ct,()=>e(de),r=>a(de,r)),x(d,He),et()}Ze(["click"]);export{Ti as component,Ri as universal};
