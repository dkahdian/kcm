import{a as mt,r as fa,b as ba,P as ma,T as xa,Q as _a,e as le,i as se,c as nt,s as qe,d as Zt,f as rt,g as pa,h as Qt,v as ya,l as At,j as ha,k as Ht,m as Tt,n as wa}from"../chunks/BsHzkNa7.js";import"../chunks/DsnmJJEf.js";import{d as Je,s as R,o as Ea,e as ka}from"../chunks/Cx79O9jG.js";import{b0 as Ra,aY as Ta,u as Sa,r as Da,h as Aa,o as vt,b1 as Ia,T as Ye,a2 as k,C as Ie,aa as Ke,D as a,z as e,a4 as Ge,a5 as Ve,Y as b,Z as We,V as h,a0 as n,a3 as i,ar as xt,_ as o,b2 as gt,X as C,a_ as B,b3 as Kt,W as Oa,$ as La}from"../chunks/pwzhV1cr.js";import{p as Oe,i as P}from"../chunks/-bFWoB2C.js";import{r as Xe,s as Fe}from"../chunks/BdkZzXO5.js";function Me(d,t,v=t){var g=new WeakSet;Ra(d,"input",async m=>{var u=m?d.defaultValue:d.value;if(u=St(d)?Dt(u):u,v(u),vt!==null&&g.add(vt),await Ta(),u!==(u=t())){var y=d.selectionStart,E=d.selectionEnd;d.value=u??"",E!==null&&(d.selectionStart=y,d.selectionEnd=Math.min(E,d.value.length))}}),(Aa&&d.defaultValue!==d.value||Sa(t)==null&&d.value)&&(v(St(d)?Dt(d.value):d.value),vt!==null&&g.add(vt)),Da(()=>{var m=t();if(d===document.activeElement){var u=Ia??vt;if(g.has(u))return}St(d)&&m===Dt(d.value)||d.type==="date"&&!m&&!d.value||m!==d.value&&(d.value=m??"")})}function St(d){var t=d.type;return t==="number"||t==="range"}function Dt(d){return d===""?null:+d}const ja=()=>{const d=mt.map(u=>u.name),t=new Map;for(const u of mt)if(u.references)for(const y of u.references)t.has(y.id)||t.set(y.id,y.title);const v=Array.from(t.entries()).map(([u,y])=>({id:u,title:y})),g=new Map;for(const u of mt)if(u.tags)for(const y of u.tags)g.has(y.label)||g.set(y.label,{label:y.label,color:y.color});const m=Array.from(g.values());return{existingLanguageIds:d,existingReferences:v,existingTags:m,languages:mt,queries:_a,transformations:xa,polytimeOptions:ma,adjacencyMatrix:ba,relationTypes:fa}},Ca=!1,ki=Object.freeze(Object.defineProperty({__proto__:null,load:ja,prerender:Ca},Symbol.toStringTag,{value:"Module"}));async function Ma(d,t,v,g,m,u,y,E,N,T,D,w){if(!e(t).trim()||!e(v).trim()||!e(g).trim()){a(m,"Please fill out all required fields.");return}try{const O=await u.onAdd({name:e(t).trim(),fullName:e(v).trim(),description:e(g).trim(),descriptionRefs:e(y),queries:e(E),transformations:e(N),tags:e(T),existingReferences:e(D)}),j=O&&typeof O=="object"&&"success"in O?O:void 0;if(j&&!j.success){a(m,j.error??"Unable to add language. Please review your input.",!0);return}a(m,null),w(),u.onClose?.()}catch(O){a(m,O instanceof Error?O.message:"Unexpected error while adding the language.",!0)}}function Vt(d,t,v){t(),v.onClose()}var Na=d=>d.stopPropagation(),Fa=h('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),za=(d,t,v)=>t(e(v)),Ba=h('<button type="button"> </button>'),Pa=h('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),qa=h("<option> </option>"),Ua=(d,t,v,g)=>t(e(v).code,e(g)),Qa=h('<button type="button"> </button>'),Ha=h('<div class="mt-2 flex flex-wrap gap-1"></div>'),Ka=h('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Va=h("<option> </option>"),Xa=(d,t,v,g)=>t(e(v).code,e(g)),Ga=h('<button type="button"> </button>'),Ja=h('<div class="mt-2 flex flex-wrap gap-1"></div>'),Ya=h('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Wa=(d,t,v)=>t(e(v)),Za=h('<button type="button"> </button>'),$a=h('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),er=h(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function Xt(d,t){Ye(t,!0);let v=Oe(t,"isOpen",11,!1),g=Oe(t,"availableRefs",19,()=>[]),m=Oe(t,"isEdit",3,!1),u=k(""),y=k(""),E=k(""),N=k(Ie([])),T=k(Ie({})),D=k(Ie({})),w=k(Ie([])),O=k(Ie([])),j=k(null);Ke(()=>{m()&&t.initialData&&(a(u,t.initialData.name,!0),a(y,t.initialData.fullName,!0),a(E,t.initialData.description,!0),a(N,[...t.initialData.descriptionRefs],!0),a(T,{...t.initialData.queries},!0),a(D,{...t.initialData.transformations},!0),a(w,[...t.initialData.tags],!0),a(O,[...t.initialData.existingReferences],!0),a(j,null))});function q(){a(u,""),a(y,""),a(E,""),a(N,[],!0),a(T,{},!0),a(D,{},!0),a(w,[],!0),a(O,[],!0),a(Y,!1),a(Te,!1),a(j,null)}function he(x){e(N).includes(x)?a(N,e(N).filter(c=>c!==x),!0):a(N,[...e(N),x],!0)}function Ce(x){e(w).some(c=>c.label===x.label)?a(w,e(w).filter(c=>c.label!==x.label),!0):a(w,[...e(w),x],!0)}function te(x,c){if(!e(T)[x])return;const _=e(T)[x].refs;_.includes(c)?e(T)[x].refs=_.filter(W=>W!==c):e(T)[x].refs=[..._,c],a(T,{...e(T)},!0)}function Z(x,c){if(!e(D)[x])return;const _=e(D)[x].refs;_.includes(c)?e(D)[x].refs=_.filter(W=>W!==c):e(D)[x].refs=[..._,c],a(D,{...e(D)},!0)}let Y=k(!1),Te=k(!1);Ke(()=>{if(t.queries.length>0&&!e(Y)){const x={};t.queries.forEach(c=>{if(m()&&t.initialData&&t.initialData.queries[c.code]){const _=t.initialData.queries[c.code];x[c.code]={polytime:_.polytime,note:_.note||"",refs:[..._.refs]}}else x[c.code]={polytime:"unknown",note:"",refs:[]}}),a(T,x,!0),a(Y,!0)}}),Ke(()=>{if(t.transformations.length>0&&!e(Te)){const x={};t.transformations.forEach(c=>{if(m()&&t.initialData){let _=t.initialData.transformations[c.code];if(!_){const W=Object.keys(t.initialData.transformations).find(ae=>t.initialData.transformations[ae]!==void 0&&(ae===c.code||c.code==="‚àßC"&&ae==="AND_C"||c.code==="‚àßBC"&&ae==="AND_BC"||c.code==="‚à®C"&&ae==="OR_C"||c.code==="‚à®BC"&&ae==="OR_BC"||c.code==="¬¨C"&&ae==="NOT_C"));W&&(_=t.initialData.transformations[W])}x[c.code]=_?{polytime:_.polytime,note:_.note||"",refs:[..._.refs]}:{polytime:"unknown",note:"",refs:[]}}else x[c.code]={polytime:"unknown",note:"",refs:[]}}),a(D,x,!0),a(Te,!0)}});var de=Ge(),xe=Ve(de);{var ue=x=>{var c=er();c.__click=[Vt,q,t];var _=n(c);_.__click=[Na];var W=n(_),ae=n(W),Ne=n(ae);i(ae),xt(2),i(W);var Re=o(W,2),re=n(Re);{var be=S=>{var p=Fa(),J=n(p,!0);i(p),C(()=>R(J,e(j))),b(S,p)};P(re,S=>{e(j)&&S(be)})}var me=o(re,2),_e=o(n(me),2),we=n(_e),Se=o(n(we),2);Xe(Se),i(we);var $=o(we,2),ce=o(n($),2);Xe(ce),i($),i(_e);var U=o(_e,2),H=o(n(U),2);gt(H),i(U);var X=o(U,2);{var Ae=S=>{var p=Pa(),J=o(n(p),2);le(J,21,g,se,(ee,z)=>{var K=Ba();K.__click=[za,he,z];var De=n(K,!0);i(K),C(ne=>{qe(K,1,ne),R(De,e(z))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(N).includes(e(z))?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),b(ee,K)}),i(J),i(p),b(S,p)};P(X,S=>{g().length>0&&S(Ae)})}i(me);var I=o(me,2),F=o(n(I),2);le(F,21,()=>t.queries,se,(S,p)=>{var J=Ge(),ee=Ve(J);{var z=K=>{var De=Ka(),ne=n(De),ze=n(ne),Be=n(ze),ot=n(Be,!0);i(Be);var Pe=o(Be,2);le(Pe,21,()=>t.polytimeOptions,se,(fe,Ee)=>{var ke=qa(),Le=n(ke,!0);i(ke);var ye={};C(()=>{R(Le,e(Ee).label),ye!==(ye=e(Ee).value)&&(ke.value=(ke.__value=e(Ee).value)??"")}),b(fe,ke)}),i(Pe),i(ze);var Ze=o(ze,2),$e=n(Ze),Ue=o($e,2);Xe(Ue),i(Ze),i(ne);var lt=o(ne,2);{var st=fe=>{var Ee=Ha();le(Ee,21,g,se,(ke,Le)=>{var ye=Qa();ye.__click=[Ua,te,p,Le];var et=n(ye,!0);i(ye),C(tt=>{qe(ye,1,tt),R(et,e(Le))},[()=>`px-2 py-0.5 text-xs rounded ${e(T)[e(p).code].refs.includes(e(Le))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(ke,ye)}),i(Ee),b(fe,Ee)};P(lt,fe=>{g().length>0&&fe(st)})}i(De),C(()=>{Fe(Be,"for",`query-${e(p).code??""}-polytime`),R(ot,e(p).name),Fe(Pe,"id",`query-${e(p).code??""}-polytime`),Fe($e,"for",`query-${e(p).code??""}-note`),Fe(Ue,"id",`query-${e(p).code??""}-note`)}),nt(Pe,()=>e(T)[e(p).code].polytime,fe=>e(T)[e(p).code].polytime=fe),Me(Ue,()=>e(T)[e(p).code].note,fe=>e(T)[e(p).code].note=fe),b(K,De)};P(ee,K=>{e(T)[e(p).code]&&K(z)})}b(S,J)}),i(F),i(I);var ie=o(I,2),ve=o(n(ie),2);le(ve,21,()=>t.transformations,se,(S,p)=>{var J=Ge(),ee=Ve(J);{var z=K=>{var De=Ya(),ne=n(De),ze=n(ne),Be=n(ze),ot=n(Be,!0);i(Be);var Pe=o(Be,2);le(Pe,21,()=>t.polytimeOptions,se,(fe,Ee)=>{var ke=Va(),Le=n(ke,!0);i(ke);var ye={};C(()=>{R(Le,e(Ee).label),ye!==(ye=e(Ee).value)&&(ke.value=(ke.__value=e(Ee).value)??"")}),b(fe,ke)}),i(Pe),i(ze);var Ze=o(ze,2),$e=n(Ze),Ue=o($e,2);Xe(Ue),i(Ze),i(ne);var lt=o(ne,2);{var st=fe=>{var Ee=Ja();le(Ee,21,g,se,(ke,Le)=>{var ye=Ga();ye.__click=[Xa,Z,p,Le];var et=n(ye,!0);i(ye),C(tt=>{qe(ye,1,tt),R(et,e(Le))},[()=>`px-2 py-0.5 text-xs rounded ${e(D)[e(p).code].refs.includes(e(Le))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(ke,ye)}),i(Ee),b(fe,Ee)};P(lt,fe=>{g().length>0&&fe(st)})}i(De),C(()=>{Fe(Be,"for",`transform-${e(p).code??""}-polytime`),R(ot,e(p).name),Fe(Pe,"id",`transform-${e(p).code??""}-polytime`),Fe($e,"for",`transform-${e(p).code??""}-note`),Fe(Ue,"id",`transform-${e(p).code??""}-note`)}),nt(Pe,()=>e(D)[e(p).code].polytime,fe=>e(D)[e(p).code].polytime=fe),Me(Ue,()=>e(D)[e(p).code].note,fe=>e(D)[e(p).code].note=fe),b(K,De)};P(ee,K=>{e(D)[e(p).code]&&K(z)})}b(S,J)}),i(ve),i(ie);var pe=o(ie,2);{var ge=S=>{var p=$a(),J=o(n(p),2);le(J,21,()=>t.existingTags,se,(ee,z)=>{var K=Za();K.__click=[Wa,Ce,z];var De=n(K,!0);i(K),C((ne,ze)=>{qe(K,1,ne),Zt(K,`background-color: ${e(z).color??""}; color: white; ${ze??""}`),R(De,e(z).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(w).some(ne=>ne.label===e(z).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(w).some(ne=>ne.label===e(z).label)?`ring-color: ${e(z).color};`:""]),b(ee,K)}),i(J),i(p),b(S,p)};P(pe,S=>{t.existingTags.length>0&&S(ge)})}var A=o(pe,2),L=n(A);L.__click=[Vt,q,t];var M=o(L,2);M.__click=[Ma,u,y,E,j,t,N,T,D,w,O,q];var G=n(M);i(M),i(A),i(Re),i(_),i(c),C(S=>{R(Ne,`${m()?"Edit":"Add New"} Language`),M.disabled=S,R(G,`${m()?"Update":"Add"} Language`)},[()=>!e(u).trim()||!e(y).trim()||!e(E).trim()]),Me(Se,()=>e(u),S=>a(u,S)),Me(ce,()=>e(y),S=>a(y,S)),Me(H,()=>e(E),S=>a(E,S)),b(x,c)};P(xe,x=>{v()&&x(ue)})}b(d,de),We()}Je(["click"]);function tr(d,t,v,g){e(t).trim()&&(v.onAdd(e(t).trim()),a(t,""),g(!1))}function Gt(d,t,v,g){t()||a(v,""),g.onClose()}var ar=d=>d.stopPropagation(),rr=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function ir(d,t){Ye(t,!0);let v=Oe(t,"isOpen",15,!1),g=Oe(t,"initialValue",3,""),m=Oe(t,"isEditMode",3,!1),u=k(Ie(g()));Ke(()=>{v()&&g()&&a(u,g())});const y=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var E=Ge(),N=Ve(E);{var T=D=>{var w=rr();w.__click=[Gt,m,u,t];var O=n(w);O.__click=[ar];var j=n(O),q=n(j),he=n(q,!0);i(q);var Ce=o(q,2),te=n(Ce,!0);i(Ce),i(j);var Z=o(j,2),Y=n(Z),Te=o(n(Y),2);gt(Te),Fe(Te,"placeholder",y),xt(2),i(Y);var de=o(Y,2),xe=n(de);xe.__click=[Gt,m,u,t];var ue=o(xe,2);ue.__click=[tr,u,t,v];var x=n(ue,!0);i(ue),i(de),i(Z),i(O),i(w),C(c=>{R(he,m()?"Edit Reference":"Add New Reference"),R(te,m()?"Update BibTeX citation":"Paste BibTeX citation"),ue.disabled=c,R(x,m()?"Update Reference":"Add Reference")},[()=>!e(u).trim()]),Me(Te,()=>e(u),c=>a(u,c)),b(D,w)};P(N,D=>{v()&&D(T)})}b(d,E),We()}Je(["click"]);function nr(d,t,v,g,m,u,y,E,N,T){!e(t)||!e(v)||!e(g)||e(t)===e(v)||(m.onSave({sourceId:e(t),targetId:e(v),status:e(g),description:e(u)||void 0,refs:e(y),separatingFunctions:e(E).length>0?e(E):void 0}),N(),T(!1))}function Jt(d,t,v){t(),v.onClose()}function or(d,t){a(t,[...e(t),{shortName:"",name:"",description:"",refs:[]}],!0)}var lr=d=>d.stopPropagation(),sr=h("<option> </option>"),dr=h("<option> </option>"),ur=h("<option> </option>"),cr=h('<p class="text-xs text-gray-500 mt-1"> </p>'),vr=(d,t,v)=>t(e(v)),gr=h('<button type="button"> </button>'),fr=h('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),br=h(`<div class="p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2"><div class="flex items-start justify-between gap-2"><input type="text" placeholder="Short name (e.g., 'Clique')" class="flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-red-600 hover:text-red-800 font-bold">√ó</button></div> <input type="text" placeholder="Full name (e.g., 'Clique Detection Instances')" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <textarea placeholder="Description..." rows="2" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea></div>`),mr=h('<div class="space-y-3"></div>'),xr=h('<p class="text-sm text-gray-500 italic">No separating functions added yet.</p>'),_r=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <fieldset class="border-t pt-4"><div class="flex items-center justify-between mb-3"><legend class="block text-sm font-medium text-gray-700">Separating Functions (optional)</legend> <button type="button" class="text-sm text-blue-600 hover:text-blue-700 font-medium">+ Add Function</button></div> <!></fieldset> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function pr(d,t){Ye(t,!0);let v=Oe(t,"isOpen",15,!1),g=Oe(t,"availableRefs",19,()=>[]),m=Oe(t,"baselineRelations",19,()=>new Map),u=k(""),y=k(""),E=k(""),N=k(""),T=k(Ie([])),D=k(Ie([]));Ke(()=>{v()&&t.initialData&&(a(u,t.initialData.sourceId,!0),a(y,t.initialData.targetId,!0),a(E,t.initialData.status,!0),a(N,t.initialData.description||"",!0),a(T,[...t.initialData.refs],!0),a(D,t.initialData.separatingFunctions?t.initialData.separatingFunctions.map(te=>({...te})):[],!0))}),Ke(()=>{if(e(u)&&e(y)&&e(u)!==e(y)){const te=`${e(u)}->${e(y)}`,Z=m().get(te);Z&&(a(E,Z.status,!0),a(T,[...Z.refs],!0),a(D,Z.separatingFunctions.map(Y=>({...Y})),!0))}});function w(){a(u,""),a(y,""),a(E,""),a(N,""),a(T,[],!0),a(D,[],!0)}function O(te){e(T).includes(te)?a(T,e(T).filter(Z=>Z!==te),!0):a(T,[...e(T),te],!0)}function j(te){a(D,e(D).filter((Z,Y)=>Y!==te),!0)}var q=Ge(),he=Ve(q);{var Ce=te=>{var Z=_r();Z.__click=[Jt,w,t];var Y=n(Z);Y.__click=[lr];var Te=o(n(Y),2),de=n(Te),xe=n(de),ue=o(n(xe),2),x=n(ue);x.value=x.__value="";var c=o(x);le(c,17,()=>t.languages,se,(A,L)=>{var M=sr(),G=n(M,!0);i(M);var S={};C(()=>{R(G,e(L).name),S!==(S=e(L).name)&&(M.value=(M.__value=e(L).name)??"")}),b(A,M)}),i(ue),i(xe);var _=o(xe,2),W=o(n(_),2),ae=n(W);ae.value=ae.__value="";var Ne=o(ae);le(Ne,17,()=>t.languages,se,(A,L)=>{var M=dr(),G=n(M,!0);i(M);var S={};C(()=>{M.disabled=e(L).name===e(u),R(G,e(L).name),S!==(S=e(L).name)&&(M.value=(M.__value=e(L).name)??"")}),b(A,M)}),i(W),i(_),i(de);var Re=o(de,2),re=o(n(Re),2),be=n(re);be.value=be.__value="";var me=o(be);le(me,17,()=>t.statusOptions,se,(A,L)=>{var M=ur(),G=n(M,!0);i(M);var S={};C(()=>{R(G,e(L).label),S!==(S=e(L).value)&&(M.value=(M.__value=e(L).value)??"")}),b(A,M)}),i(re);var _e=o(re,2);{var we=A=>{const L=B(()=>t.statusOptions.find(p=>p.value===e(E)));var M=Ge(),G=Ve(M);{var S=p=>{var J=cr(),ee=n(J,!0);i(J),C(()=>R(ee,e(L).description)),b(p,J)};P(G,p=>{e(L)&&p(S)})}b(A,M)};P(_e,A=>{e(E)&&A(we)})}i(Re);var Se=o(Re,2),$=o(n(Se),2);gt($),i(Se);var ce=o(Se,2);{var U=A=>{var L=fr(),M=o(n(L),2);le(M,21,g,se,(G,S)=>{var p=gr();p.__click=[vr,O,S];var J=n(p,!0);i(p),C(ee=>{qe(p,1,ee),R(J,e(S))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(T).includes(e(S))?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),b(G,p)}),i(M),i(L),b(A,L)};P(ce,A=>{g().length>0&&A(U)})}var H=o(ce,2),X=n(H),Ae=o(n(X),2);Ae.__click=[or,D],i(X);var I=o(X,2);{var F=A=>{var L=mr();le(L,21,()=>e(D),se,(M,G,S)=>{var p=br(),J=n(p),ee=n(J);Xe(ee);var z=o(ee,2);z.__click=()=>j(S),i(J);var K=o(J,2);Xe(K);var De=o(K,2);gt(De),i(p),Me(ee,()=>e(G).shortName,ne=>e(G).shortName=ne),Me(K,()=>e(G).name,ne=>e(G).name=ne),Me(De,()=>e(G).description,ne=>e(G).description=ne),b(M,p)}),i(L),b(A,L)},ie=A=>{var L=xr();b(A,L)};P(I,A=>{e(D).length>0?A(F):A(ie,!1)})}i(H);var ve=o(H,2),pe=n(ve);pe.__click=[Jt,w,t];var ge=o(pe,2);ge.__click=[nr,u,y,E,t,N,T,D,w,v],i(ve),i(Te),i(Y),i(Z),C(()=>ge.disabled=!e(u)||!e(y)||!e(E)||e(u)===e(y)),nt(ue,()=>e(u),A=>a(u,A)),nt(W,()=>e(y),A=>a(y,A)),nt(re,()=>e(E),A=>a(E,A)),Me($,()=>e(N),A=>a(N,A)),b(te,Z)};P(he,te=>{v()&&te(Ce)})}b(d,q),We()}Je(["click"]);var yr=(d,t)=>t.onToggleExpand(t.index),hr=(d,t)=>t.onEdit(t.index),wr=(d,t)=>t.onDelete(t.index),Er=h('<div class="text-gray-500 italic"> </div>'),kr=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),Rr=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Tr=h('<div class="text-gray-500 italic"> </div>'),Sr=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),Dr=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Ar=h('<span class="px-2 py-1 rounded text-white text-xs"> </span>'),Ir=h('<div><div class="font-semibold text-gray-700 mb-1">Tags:</div> <div class="flex flex-wrap gap-1"></div></div>'),Or=h('<div><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="text-gray-900"> </div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="text-gray-900"> </div></div> <!> <!> <!></div>'),Lr=h('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Yt(d,t){Ye(t,!0);let v=Oe(t,"isExpanded",3,!1),g=Oe(t,"isEdit",3,!1);const m=g()?"border-yellow-300":"border-green-300",u=g()?"bg-yellow-50":"bg-green-50",y=g()?"text-yellow-800":"text-green-800",E=g()?"bg-yellow-100 hover:bg-yellow-200":"bg-green-100 hover:bg-green-200",N=g()?"text-yellow-800":"text-green-800",T=g()?"border-yellow-300":"border-green-300",D=g()?"border-yellow-200":"border-green-200";var w=Lr(),O=n(w),j=n(O),q=n(j),he=n(q,!0);i(q);var Ce=o(q,2),te=n(Ce,!0);i(Ce),i(j);var Z=o(j,2),Y=n(Z);Y.__click=[yr,t];var Te=n(Y,!0);i(Y);var de=o(Y,2);de.__click=[hr,t];var xe=o(de,2);xe.__click=[wr,t],i(Z),i(O);var ue=o(O,2);{var x=c=>{var _=Or(),W=n(_),ae=o(n(W),2),Ne=n(ae,!0);i(ae),i(W);var Re=o(W,2),re=o(n(Re),2),be=n(re,!0);i(re),i(Re);var me=o(Re,2);{var _e=U=>{var H=Rr(),X=n(H),Ae=n(X);i(X);var I=o(X,2);le(I,21,()=>Object.entries(t.language.queries),se,(F,ie)=>{var ve=B(()=>Kt(e(ie),2));let pe=()=>e(ve)[0],ge=()=>e(ve)[1];var A=kr(),L=n(A),M=n(L,!0);i(L);var G=o(L,2),S=n(G,!0);i(G);var p=o(G,2);{var J=ee=>{var z=Er(),K=n(z,!0);i(z),C(()=>R(K,ge().note)),b(ee,z)};P(p,ee=>{ge().note&&ee(J)})}i(A),C(()=>{R(M,pe()),R(S,ge().polytime)}),b(F,A)}),i(I),i(H),C(F=>R(Ae,`Query Support (${F??""}):`),[()=>Object.keys(t.language.queries).length]),b(U,H)};P(me,U=>{t.language.queries&&Object.keys(t.language.queries).length>0&&U(_e)})}var we=o(me,2);{var Se=U=>{var H=Dr(),X=n(H),Ae=n(X);i(X);var I=o(X,2);le(I,21,()=>Object.entries(t.language.transformations),se,(F,ie)=>{var ve=B(()=>Kt(e(ie),2));let pe=()=>e(ve)[0],ge=()=>e(ve)[1];var A=Sr(),L=n(A),M=n(L,!0);i(L);var G=o(L,2),S=n(G,!0);i(G);var p=o(G,2);{var J=ee=>{var z=Tr(),K=n(z,!0);i(z),C(()=>R(K,ge().note)),b(ee,z)};P(p,ee=>{ge().note&&ee(J)})}i(A),C(()=>{R(M,pe()),R(S,ge().polytime)}),b(F,A)}),i(I),i(H),C(F=>R(Ae,`Transformation Support (${F??""}):`),[()=>Object.keys(t.language.transformations).length]),b(U,H)};P(we,U=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&U(Se)})}var $=o(we,2);{var ce=U=>{var H=Ir(),X=o(n(H),2);le(X,21,()=>t.language.tags,se,(Ae,I)=>{var F=Ar(),ie=n(F,!0);i(F),C(()=>{Zt(F,`background-color: ${e(I).color??""}`),R(ie,e(I).label)}),b(Ae,F)}),i(X),i(H),b(U,H)};P($,U=>{t.language.tags&&t.language.tags.length>0&&U(ce)})}i(_),C(()=>{qe(_,1,`mt-4 pt-4 border-t ${D} space-y-3 text-xs`),R(Ne,t.language.fullName),R(be,t.language.description)}),b(c,_)};P(ue,c=>{v()&&c(x)})}i(w),C(()=>{qe(w,1,`border-2 ${m} ${u} rounded-lg p-3`),qe(q,1,`text-sm font-semibold ${y}`),R(he,g()?"Edit Language:":"New Language:"),R(te,t.language.name),qe(Y,1,`px-2 py-1 text-xs ${E} ${N} rounded border ${T}`),Fe(Y,"aria-label",v()?"Collapse":"Expand"),R(Te,v()?"Collapse":"Expand")}),b(d,w),We()}Je(["click"]);var jr=(d,t)=>t.onToggleExpand(t.index),Cr=(d,t)=>t.onEdit(t.index),Mr=(d,t)=>t.onDelete(t.index),Nr=h('<div class="mt-4 pt-4 border-t border-purple-200"><pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto"> </pre></div>'),Fr=h('<div class="border-2 border-purple-300 bg-purple-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-purple-800">Reference</span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function zr(d,t){Ye(t,!0);let v=Oe(t,"isExpanded",3,!1);var g=Fr(),m=n(g),u=o(n(m),2),y=n(u);y.__click=[jr,t];var E=n(y,!0);i(y);var N=o(y,2);N.__click=[Cr,t];var T=o(N,2);T.__click=[Mr,t],i(u),i(m);var D=o(m,2);{var w=O=>{var j=Nr(),q=n(j),he=n(q,!0);i(q),i(j),C(()=>R(he,t.reference)),b(O,j)};P(D,O=>{v()&&O(w)})}i(g),C(()=>{Fe(y,"aria-label",v()?"Collapse":"Expand"),R(E,v()?"Collapse":"Expand")}),b(d,g),We()}Je(["click"]);var Br=(d,t)=>t.onToggleExpand(t.index),Pr=(d,t)=>t.onEdit(t.index),qr=(d,t,v)=>t.onDelete(t.index,v),Ur=h('<div class="text-gray-500 text-xs mt-1"> </div>'),Qr=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600 text-xs"> </div> <div class="text-gray-500 italic text-xs"> </div> <!></div>'),Hr=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),Kr=h('<div><div class="font-semibold text-gray-700 mb-1">References:</div> <div class="text-gray-600"> </div></div>'),Vr=h('<div class="mt-4 pt-4 border-t border-blue-200 space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Transformation Status:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!></div>'),Xr=h('<div class="border-2 border-blue-300 bg-blue-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-blue-800">Relationship:</span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Gr(d,t){Ye(t,!0);let v=Oe(t,"isExpanded",3,!1),g=Oe(t,"isModified",3,!1);const m=rt(t.relationship.sourceId,t.relationship.targetId);var u=Ge(),y=Ve(u);{var E=N=>{var T=Xr(),D=n(T),w=n(D),O=o(n(w),2),j=n(O);i(O),i(w);var q=o(w,2),he=n(q);he.__click=[Br,t];var Ce=n(he,!0);i(he);var te=o(he,2);te.__click=[Pr,t];var Z=o(te,2);Z.__click=[qr,t,m],i(q),i(D);var Y=o(D,2);{var Te=de=>{var xe=Vr(),ue=n(xe),x=o(n(ue),2),c=n(x),_=n(c,!0);i(c),i(x),i(ue);var W=o(ue,2);{var ae=re=>{var be=Hr(),me=n(be),_e=n(me);i(me);var we=o(me,2);le(we,21,()=>t.relationship.separatingFunctions,se,(Se,$)=>{var ce=Qr(),U=n(ce),H=n(U,!0);i(U);var X=o(U,2),Ae=n(X);i(X);var I=o(X,2),F=n(I,!0);i(I);var ie=o(I,2);{var ve=pe=>{var ge=Ur(),A=n(ge);i(ge),C(L=>R(A,`Refs: [${L??""}]`),[()=>e($).refs.join(", ")]),b(pe,ge)};P(ie,pe=>{e($).refs&&e($).refs.length>0&&pe(ve)})}i(ce),C(()=>{R(H,e($).name),R(Ae,`Short: ${e($).shortName??""}`),R(F,e($).description)}),b(Se,ce)}),i(we),i(be),C(()=>R(_e,`Separating Functions (${t.relationship.separatingFunctions.length??""}):`)),b(re,be)};P(W,re=>{t.relationship.separatingFunctions&&t.relationship.separatingFunctions.length>0&&re(ae)})}var Ne=o(W,2);{var Re=re=>{var be=Kr(),me=o(n(be),2),_e=n(me,!0);i(me),i(be),C(we=>R(_e,we),[()=>t.relationship.refs.join(", ")]),b(re,be)};P(Ne,re=>{t.relationship.refs&&t.relationship.refs.length>0&&re(Re)})}i(xe),C(()=>R(_,t.relationship.status)),b(de,xe)};P(Y,de=>{v()&&de(Te)})}i(T),C(()=>{R(j,`${t.relationship.sourceId??""} ‚Üí ${t.relationship.targetId??""}`),Fe(he,"aria-label",v()?"Collapse":"Expand"),R(Ce,v()?"Collapse":"Expand")}),b(N,T)};P(y,N=>{g()&&N(E)})}b(d,u),We()}Je(["click"]);var Jr=h('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),Yr=h(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!></div></div>`);function Wr(d,t){Ye(t,!0);const v=B(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.relationships.filter(w=>t.modifiedRelations.has(rt(w.sourceId,w.targetId))).length>0);var g=Yr(),m=o(n(g),4),u=n(m);le(u,17,()=>t.newReferences,se,(w,O,j)=>{{let q=B(()=>t.expandedReferenceIndex===j);zr(w,{get reference(){return e(O)},index:j,get isExpanded(){return e(q)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var y=o(u,2);le(y,17,()=>t.languagesToAdd,se,(w,O,j)=>{{let q=B(()=>t.expandedLanguageToAddIndex===j);Yt(w,{get language(){return e(O)},index:j,get isExpanded(){return e(q)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var E=o(y,2);le(E,17,()=>t.languagesToEdit,se,(w,O,j)=>{{let q=B(()=>t.expandedLanguageToEditIndex===j);Yt(w,{get language(){return e(O)},index:j,get isExpanded(){return e(q)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var N=o(E,2);le(N,17,()=>t.relationships,se,(w,O,j)=>{const q=B(()=>t.modifiedRelations.has(rt(e(O).sourceId,e(O).targetId)));{let he=B(()=>t.expandedRelationshipIndex===j);Gr(w,{get relationship(){return e(O)},index:j,get isModified(){return e(q)},get isExpanded(){return e(he)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var T=o(N,2);{var D=w=>{var O=Jr();b(w,O)};P(T,w=>{e(v)||w(D)})}i(m),i(g),b(d,g),We()}var Zr=h('<div class="grid grid-cols-2 md:grid-cols-4 gap-3"><button type="button" class="px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">+ New Language</button> <button type="button" class="px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">‚úé Edit Language</button> <button type="button" class="px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">üîó Manage Relationships</button> <button type="button" class="px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">+ New Reference</button></div>');function $r(d,t){var v=Zr(),g=n(v);g.__click=function(...E){t.onAddLanguage?.apply(this,E)};var m=o(g,2);m.__click=function(...E){t.onEditLanguage?.apply(this,E)};var u=o(m,2);u.__click=function(...E){t.onManageRelationships?.apply(this,E)};var y=o(u,2);y.__click=function(...E){t.onAddReference?.apply(this,E)},i(v),b(d,v)}Je(["click"]);var ei=h('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function ti(d,t){let v=Oe(t,"disabled",3,!1);var g=ei(),m=n(g);xt(2),i(g),C(()=>m.disabled=v()),b(d,g)}function Wt(d,t,v){const g=!e(t);a(t,g),g&&a(v,At(),!0)}function ai(d,t){a(t,null)}var ri=h('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),ii=h('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),ni=h('<div class="text-xs font-medium text-amber-600">Superseded</div>'),oi=h('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),li=(d,t,v)=>t(e(v)),si=h('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),di=h('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),ui=h('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),ci=(d,t)=>a(t,!1),vi=d=>d.stopPropagation(),gi=h("<option> </option>"),fi=(d,t,v)=>{a(t,""),a(v,!1)},bi=(d,t,v,g)=>{e(t)&&(a(v,!1),a(g,!0))},mi=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),xi=h('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">üóÇÔ∏è</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!>',1);function Ri(d,t){Ye(t,!0);const v="kcm_contribute_queue_v1",g="kcm_contributor_info_v1",m=r=>typeof r=="string",u=r=>Array.isArray(r)?r.filter(m):[],y=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():ya(),E=r=>typeof r=="string"&&r.trim().length>0?r:null;function N(r){if(!r||typeof r!="object")return{};const l={};for(const[s,f]of Object.entries(r)){if(!f||typeof f!="object")continue;const V=m(f.polytime)?f.polytime:"unknown",je=m(f.note)?f.note:void 0,Qe=u(f.refs),Q={polytime:V,refs:Qe};je&&(Q.note=je),l[s]=Q}return l}function T(r){if(!Array.isArray(r))return[];const l=[];for(const s of r){if(!s||typeof s!="object")continue;const f=s;m(f.label)&&l.push({label:f.label,color:m(f.color)?f.color:"#6366f1",description:m(f.description)?f.description:void 0,refs:u(f.refs)})}return l}function D(r){return Array.isArray(r)?r.map(l=>{if(!l||typeof l!="object")return null;const s=l;return!m(s.name)||!m(s.fullName)||!m(s.description)?null:{name:s.name,fullName:s.fullName,description:s.description,descriptionRefs:u(s.descriptionRefs),queries:N(s.queries),transformations:N(s.transformations),tags:T(s.tags),existingReferences:u(s.existingReferences)}}).filter(l=>l!==null):[]}function w(r){if(!Array.isArray(r))return[];const l=[];for(const s of r){if(!s||typeof s!="object")continue;const f=s;!m(f.shortName)||!m(f.name)||!m(f.description)||l.push({shortName:f.shortName,name:f.name,description:f.description,refs:u(f.refs)})}return l}function O(r){return Array.isArray(r)?r.map(l=>{if(!l||typeof l!="object")return null;const s=l;if(!m(s.sourceId)||!m(s.targetId)||!m(s.status))return null;const f=w(s.separatingFunctions),V={sourceId:s.sourceId,targetId:s.targetId,status:s.status,refs:u(s.refs)};return f.length>0&&(V.separatingFunctions=f),V}).filter(l=>l!==null):[]}const j=r=>({...r,descriptionRefs:[...r.descriptionRefs],queries:Object.fromEntries(Object.entries(r.queries).map(([l,s])=>[l,{...s,refs:[...s.refs]}])),transformations:Object.fromEntries(Object.entries(r.transformations).map(([l,s])=>[l,{...s,refs:[...s.refs]}])),tags:r.tags.map(l=>({...l,refs:[...l.refs]})),existingReferences:[...r.existingReferences]}),q=r=>({...r,refs:[...r.refs],separatingFunctions:r.separatingFunctions?r.separatingFunctions.map(l=>({...l,refs:[...l.refs]})):void 0}),he=r=>({...r,refs:[...r.refs]}),Ce=r=>{try{return new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(new Date(r))}catch{return r}},te=r=>{const l=[];return r.summary.languagesToAdd&&l.push(`${r.summary.languagesToAdd} new ${r.summary.languagesToAdd===1?"language":"languages"}`),r.summary.languagesToEdit&&l.push(`${r.summary.languagesToEdit} edit${r.summary.languagesToEdit===1?"":"s"}`),r.summary.relationships&&l.push(`${r.summary.relationships} relation${r.summary.relationships===1?"":"s"}`),r.summary.newReferences&&l.push(`${r.summary.newReferences} reference${r.summary.newReferences===1?"":"s"}`),l.length>0?l.join(" ¬∑ "):"No changes"},Z=Object.values(t.data.polytimeOptions),Y=t.data.relationTypes.map(r=>({value:r.id,label:r.name,description:r.description??""})),Te=pa(t.data.adjacencyMatrix);let de=k(""),xe=k(""),ue=k(""),x=k(Ie([])),c=k(Ie([])),_=k(Ie([])),W=k(null),ae=k(null),Ne=k(null),Re=k(null),re=k(!1),be=k(!1),me=k(!1),_e=k(""),we=k(!1),Se=k(!1),$=k(null),ce=k(null),U=k(null),H=k(null),X=k(Ie(new Set)),Ae=k(!1),I=k(Ie([])),F=k(Ie([])),ie=k(""),ve=k(null),pe=k(Ie([])),ge=k(!1);const A=B(()=>e(x).length>0||e(c).length>0||e(_).filter(r=>e(X).has(rt(r.sourceId,r.targetId))).length>0||e(I).length>0||e(F).length>0);let L=!1;Ke(()=>{const r=e(A);r&&!L&&!e(ie)&&a(ie,y(),!0),!r&&L&&(a(ie,y(),!0),a(ve,null)),L=r}),Ea(()=>{a(pe,At(),!0);try{const r=localStorage.getItem(v);if(r){const s=JSON.parse(r);a(x,D(s?.languagesToAdd),!0),a(c,D(s?.languagesToEdit),!0),a(_,O(s?.relationships),!0),a(I,u(s?.newReferences),!0),a(F,T(s?.customTags),!0),a(X,new Set(u(s?.modifiedRelations)),!0),a(ie,E(s?.submissionId)??"",!0),a(ve,E(s?.supersedesSubmissionId),!0)}const l=localStorage.getItem(g);if(l){const s=JSON.parse(l);m(s?.email)&&a(de,s.email,!0),m(s?.github)&&a(xe,s.github,!0),m(s?.note)&&a(ue,s.note,!0)}}catch(r){console.warn("Failed to restore queued changes from storage",r)}finally{a(Ae,!0)}e(ie)||a(ie,y(),!0)});function M(r){const l=r(e(X));a(X,new Set(l),!0)}function G(r){const l=rt(r.sourceId,r.targetId);M(s=>{const f=new Set(s);return f.add(l),f})}function S(r){M(l=>{if(!l.has(r))return l;const s=new Set(l);return s.delete(r),s})}Ke(()=>{if(!e(Ae)||!Qt)return;if(e(ie)||a(ie,y(),!0),e(x).length===0&&e(c).length===0&&e(_).length===0&&e(I).length===0&&e(F).length===0&&e(X).size===0){try{localStorage.removeItem(v)}catch(s){console.warn("Failed to clear queued changes from storage",s)}a(ve,null);return}const l={languagesToAdd:e(x),languagesToEdit:e(c),relationships:e(_),newReferences:e(I),customTags:e(F),modifiedRelations:Array.from(e(X)),submissionId:e(ie),supersedesSubmissionId:e(ve)??null};try{localStorage.setItem(v,JSON.stringify(l))}catch(s){console.warn("Failed to persist queued changes",s)}}),Ke(()=>{if(!e(Ae)||!Qt)return;const r={email:e(de),github:e(xe),note:e(ue)};try{localStorage.setItem(g,JSON.stringify(r))}catch(l){console.warn("Failed to persist contributor info",l)}});function p(r){return a(x,[...e(x),r],!0),{success:!0}}function J(r){const l=e(c).findIndex(s=>s.name===r.name);return l>=0?(e(c)[l]=r,a(c,[...e(c)],!0)):a(c,[...e(c),r],!0),{success:!0}}function ee(r){a(I,[...e(I),r],!0)}let z=k(null);function K(r){a(z,{languages:e(x).slice(r+1),editedLanguages:e(c).slice(r+1),references:e(I).slice(r+1),relationships:e(_).filter((l,s)=>s>r),tags:e(F).slice(r+1)},!0),a(x,e(x).slice(0,r+1),!0),a(c,e(c).slice(0,r+1),!0),a(I,e(I).slice(0,r+1),!0),a(_,e(_).slice(0,r+1),!0),a(F,e(F).slice(0,r+1),!0),a($,r,!0),a(we,!0)}function De(r){e($)!==null&&(e(I)[e($)]=r,a(I,[...e(I)],!0),e(z)&&(a(x,[...e(x),...e(z).languages],!0),a(c,[...e(c),...e(z).editedLanguages],!0),a(I,[...e(I),...e(z).references],!0),a(_,[...e(_),...e(z).relationships],!0),a(F,[...e(F),...e(z).tags],!0)),a($,null),a(z,null))}function ne(r){a(ce,r,!0),a(re,!0)}function ze(r){return e(ce)!==null&&(e(x)[e(ce)]=r,a(x,[...e(x)],!0),a(ce,null)),{success:!0}}function Be(r){a(U,r,!0),a(be,!0)}function ot(r){return e(U)!==null&&(e(c)[e(U)]=r,a(c,[...e(c)],!0),a(U,null)),{success:!0}}function Pe(r){a(H,r,!0),a(Se,!0)}function Ze(r){e(H)!==null&&(e(_)[e(H)]=r,a(_,[...e(_)],!0),G(r),a(H,null))}function $e(r){if(e(H)!==null){Ze(r);return}const l=rt(r.sourceId,r.targetId),s=e(_).findIndex(f=>rt(f.sourceId,f.targetId)===l);s>=0?(e(_)[s]=r,a(_,[...e(_)],!0)):a(_,[...e(_),r],!0),G(r)}function Ue(r){const l=new Set(t.data.existingReferences.map(f=>f.id));for(let f=0;f<r;f++){const V=Ht(e(I)[f],l);l.add(V)}const s=Ht(e(I)[r],l);a(I,e(I).filter((f,V)=>V!==r),!0),e(x).forEach(f=>{f.descriptionRefs=f.descriptionRefs.filter(V=>V!==s)}),e(c).forEach(f=>{f.descriptionRefs=f.descriptionRefs.filter(V=>V!==s)}),e(_).forEach(f=>{f.refs=f.refs.filter(V=>V!==s),f.separatingFunctions?.forEach(V=>{V.refs=V.refs.filter(je=>je!==s)})}),e(F).forEach(f=>{f.refs=f.refs.filter(V=>V!==s)}),a(x,[...e(x)],!0),a(c,[...e(c)],!0),a(_,[...e(_)],!0),a(F,[...e(F)],!0)}function lt(r){const l=r.payload;a(x,l.languagesToAdd.map(j),!0),a(c,l.languagesToEdit.map(j),!0),a(_,l.relationships.map(q),!0),a(I,[...l.newReferences],!0),a(F,l.customTags.map(he),!0),a(X,new Set(l.modifiedRelations),!0),a(de,l.contributor.email,!0),a(xe,l.contributor.github,!0),a(ue,l.contributor.note,!0),a(ve,l.submissionId,!0),a(ie,y(),!0),a(pe,At(),!0),a(ge,!1),a($,null),a(z,null),a(ce,null),a(U,null),a(H,null),a(W,null),a(ae,null),a(Ne,null),a(Re,null)}function st(r){r.preventDefault(),window.location.href="/"}var fe=xi();Oa(r=>{La.title="Contribute - Knowledge Compilation Map"});var Ee=Ve(fe),ke=n(Ee),Le=o(n(ke),2),ye=o(n(Le),2),et=n(ye),tt=n(et),_t=o(n(tt),2),pt=n(_t),It=o(n(pt),2);Xe(It),i(pt);var Ot=o(pt,2),Lt=o(n(Ot),2);Xe(Lt),i(Ot),i(_t);var jt=o(_t,2),Ct=o(n(jt),2);gt(Ct),xt(2),i(jt),i(tt);var yt=o(tt,2),Mt=n(yt);{var $t=r=>{var l=ri(),s=o(n(l),2);s.__click=[ai,ve],i(l),b(r,l)};P(Mt,r=>{e(ve)&&r($t)})}var ht=o(Mt,2);ht.__click=[Wt,ge,pe];var ea=o(n(ht),2);i(ht),i(yt);var Nt=o(yt,2);{var ta=r=>{var l=ui(),s=n(l),f=o(n(s),2);f.__click=[Wt,ge,pe],i(s);var V=o(s,2);{var je=Q=>{var oe=ii();b(Q,oe)},Qe=Q=>{var oe=di();le(oe,21,()=>e(pe),se,(ft,He)=>{const dt=B(()=>te(e(He))),at=B(()=>Ce(e(He).createdAt));var ut=si(),ct=n(ut),wt=n(ct),Et=n(wt),na=n(Et,!0);i(Et);var kt=o(Et,2),oa=n(kt,!0);i(kt);var la=o(kt,2);{var sa=it=>{var bt=ni();b(it,bt)},da=it=>{var bt=Ge(),ca=Ve(bt);{var va=Rt=>{var ga=oi();b(Rt,ga)};P(ca,Rt=>{e(He).payload.submissionId===e(ve)&&Rt(va)},!0)}b(it,bt)};P(la,it=>{e(He).supersededBySubmissionId?it(sa):it(da,!1)})}i(wt);var ua=o(wt,2);ua.__click=[li,lt,He],i(ct),i(ut),C(()=>{R(na,e(at)),R(oa,e(dt))}),b(ft,ut)}),i(oe),b(Q,oe)};P(V,Q=>{e(pe).length===0?Q(je):Q(Qe,!1)})}i(l),b(r,l)};P(Nt,r=>{e(ge)&&r(ta)})}var Ft=o(Nt,2);Wr(Ft,{get languagesToAdd(){return e(x)},get languagesToEdit(){return e(c)},get newReferences(){return e(I)},get relationships(){return e(_)},get modifiedRelations(){return e(X)},get expandedLanguageToAddIndex(){return e(W)},get expandedLanguageToEditIndex(){return e(ae)},get expandedReferenceIndex(){return e(Re)},get expandedRelationshipIndex(){return e(Ne)},onToggleExpandLanguageToAdd:r=>a(W,e(W)===r?null:r,!0),onToggleExpandLanguageToEdit:r=>a(ae,e(ae)===r?null:r,!0),onToggleExpandReference:r=>a(Re,e(Re)===r?null:r,!0),onToggleExpandRelationship:r=>a(Ne,e(Ne)===r?null:r,!0),onEditLanguageToAdd:ne,onEditLanguageToEdit:Be,onDeleteLanguageToAdd:r=>a(x,e(x).filter((l,s)=>s!==r),!0),onDeleteLanguageToEdit:r=>a(c,e(c).filter((l,s)=>s!==r),!0),onEditReference:K,onDeleteReference:Ue,onEditRelationship:Pe,onDeleteRelationship:(r,l)=>{a(_,e(_).filter((s,f)=>f!==r),!0),S(l)}});var zt=o(Ft,2);$r(zt,{onAddLanguage:()=>a(re,!0),onEditLanguage:()=>a(me,!0),onManageRelationships:()=>a(Se,!0),onAddReference:()=>a(we,!0)});var aa=o(zt,2);{let r=B(()=>!e(A));ti(aa,{get disabled(){return e(r)}})}i(et),i(ye),i(Le),i(ke),i(Ee);var Bt=o(Ee,2);{let r=B(()=>e(ce)!==null?ze:p),l=B(()=>e(ce)!==null),s=B(()=>e(ce)!==null?e(x)[e(ce)]:void 0),f=B(()=>Object.values(t.data.queries).map(oe=>({code:oe.code,name:oe.label}))),V=B(()=>Object.values(t.data.transformations).map(oe=>({code:oe.code,name:oe.label}))),je=B(()=>Z.map(oe=>({value:oe.code,label:oe.label,description:oe.description||""}))),Qe=B(()=>[...t.data.existingTags,...e(F)].map(oe=>({label:oe.label,color:oe.color||"#6366f1",description:"",refs:[]}))),Q=B(()=>Tt(t.data.existingReferences,e(I)));Xt(Bt,{onClose:()=>{a(re,!1),a(ce,null)},get onAdd(){return e(r)},get isEdit(){return e(l)},get initialData(){return e(s)},get queries(){return e(f)},get transformations(){return e(V)},get polytimeOptions(){return e(je)},get existingTags(){return e(Qe)},get availableRefs(){return e(Q)},get isOpen(){return e(re)},set isOpen(oe){a(re,oe,!0)}})}var Pt=o(Bt,2);{let r=B(()=>e(U)!==null?ot:J),l=B(()=>e(U)!==null?e(c)[e(U)]:e(_e)?ha(t.data.languages.find(Q=>Q.name===e(_e))):void 0),s=B(()=>Object.values(t.data.queries).map(Q=>({code:Q.code,name:Q.label}))),f=B(()=>Object.values(t.data.transformations).map(Q=>({code:Q.code,name:Q.label}))),V=B(()=>Z.map(Q=>({value:Q.code,label:Q.label,description:Q.description||""}))),je=B(()=>[...t.data.existingTags,...e(F)].map(Q=>({label:Q.label,color:Q.color||"#6366f1",description:"",refs:[]}))),Qe=B(()=>Tt(t.data.existingReferences,e(I)));Xt(Pt,{onClose:()=>{a(be,!1),a(_e,""),a(U,null)},get onAdd(){return e(r)},isEdit:!0,get initialData(){return e(l)},get queries(){return e(s)},get transformations(){return e(f)},get polytimeOptions(){return e(V)},get existingTags(){return e(je)},get availableRefs(){return e(Qe)},get isOpen(){return e(be)},set isOpen(Q){a(be,Q,!0)}})}var qt=o(Pt,2);{var ra=r=>{var l=mi();l.__click=[ci,me];var s=n(l);s.__click=[vi];var f=o(n(s),2),V=o(n(f),2),je=n(V);je.value=je.__value="";var Qe=o(je);le(Qe,17,()=>t.data.languages,se,(He,dt)=>{var at=gi(),ut=n(at,!0);i(at);var ct={};C(()=>{R(ut,e(dt).name),ct!==(ct=e(dt).name)&&(at.value=(at.__value=e(dt).name)??"")}),b(He,at)}),i(V);var Q=o(V,2),oe=n(Q);oe.__click=[fi,_e,me];var ft=o(oe,2);ft.__click=[bi,_e,me,be],i(Q),i(f),i(s),i(l),C(()=>ft.disabled=!e(_e)),nt(V,()=>e(_e),He=>a(_e,He)),b(r,l)};P(qt,r=>{e(me)&&r(ra)})}var Ut=o(qt,2);{let r=B(()=>e($)!==null?De:ee),l=B(()=>e($)!==null?e(I)[e($)]:""),s=B(()=>e($)!==null);ir(Ut,{onClose:()=>{a(we,!1),a($,null),a(z,null)},get onAdd(){return e(r)},get initialValue(){return e(l)},get isEditMode(){return e(s)},get isOpen(){return e(we)},set isOpen(f){a(we,f,!0)}})}var ia=o(Ut,2);{let r=B(()=>e(H)!==null?e(_)[e(H)]:void 0),l=B(()=>wa(t.data.languages,e(x),e(c))),s=B(()=>Tt(t.data.existingReferences,e(I)));pr(ia,{onClose:()=>{a(Se,!1),a(H,null)},onSave:$e,get initialData(){return e(r)},get languages(){return e(l)},get statusOptions(){return Y},get availableRefs(){return e(s)},get baselineRelations(){return Te},get isOpen(){return e(Se)},set isOpen(f){a(Se,f,!0)}})}C(()=>qe(ea,0,`h-3 w-3 transition-transform ${e(ge)?"rotate-180":""}`)),ka("submit",et,st),Me(It,()=>e(de),r=>a(de,r)),Me(Lt,()=>e(xe),r=>a(xe,r)),Me(Ct,()=>e(ue),r=>a(ue,r)),b(d,fe),We()}Je(["click"]);export{Ri as component,ki as universal};
