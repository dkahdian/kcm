import{d as Ta,a as _t,r as Fa,b as Aa,P as Da,T as Ia,Q as Oa,e as le,i as se,M as We,c as tt,f as Na,g as $t,v as La,l as Lt,h as Ma,j as ea,k as pt,m as ja,n as Ca}from"../chunks/B_1BVi1A.js";import"../chunks/DsnmJJEf.js";import{s as F,o as za}from"../chunks/D4xMwpl8.js";import{a$ as Pa,aT as Ba,u as Ua,r as qa,h as Qa,k as ft,be as Va,ba as rt,K as Ke,X as k,y as Te,a4 as Ve,z as a,v as e,Z as He,_ as qe,Q as b,R as Xe,M as w,V as i,Y as n,al as at,T as o,bf as bt,O as M,aW as B,aX as Ha,a0 as Ka,bg as ta,N as Xa,bh as Ga,$ as Ja}from"../chunks/CuxRnwIY.js";import{p as fe,i as P}from"../chunks/CTb7Me_4.js";import{r as Ze,s as Ue,b as it,a as Ce,c as Ya}from"../chunks/BQmAUj6M.js";function je(u,t,g=t){var m=new WeakSet;Pa(u,"input",async v=>{var x=v?u.defaultValue:u.value;if(x=Ot(u)?Nt(x):x,g(x),ft!==null&&m.add(ft),await Ba(),x!==(x=t())){var _=u.selectionStart,p=u.selectionEnd;u.value=x??"",p!==null&&(u.selectionStart=_,u.selectionEnd=Math.min(p,u.value.length))}}),(Qa&&u.defaultValue!==u.value||Ua(t)==null&&u.value)&&(g(Ot(u)?Nt(u.value):u.value),ft!==null&&m.add(ft)),qa(()=>{var v=t();if(u===document.activeElement){var x=Va??ft;if(m.has(x))return}Ot(u)&&v===Nt(u.value)||u.type==="date"&&!v&&!u.value||v!==u.value&&(u.value=v??"")})}function Ot(u){var t=u.type;return t==="number"||t==="range"}function Nt(u){return u===""?null:+u}const da={},Wa=Ta.separatingFunctions;for(const u of Wa)da[u.shortName]=u;const Za=Object.values(da),$a=()=>{const u=_t.map(_=>_.name),t=new Map;for(const _ of _t)if(_.references)for(const p of _.references)t.has(p.id)||t.set(p.id,p.title);const g=Array.from(t.entries()).map(([_,p])=>({id:_,title:p})),m=new Map;for(const _ of _t)if(_.tags)for(const p of _.tags)m.has(p.label)||m.set(p.label,{label:p.label,color:p.color});const v=Array.from(m.values()),x=Za.map(_=>({shortName:_.shortName,name:_.name,description:_.description}));return{existingLanguageIds:u,existingReferences:g,existingSeparatingFunctions:x,existingTags:v,languages:_t,queries:Oa,transformations:Ia,polytimeOptions:Da,adjacencyMatrix:Aa,relationTypes:Fa}},er=!1,Wn=Object.freeze(Object.defineProperty({__proto__:null,load:$a,prerender:er},Symbol.toStringTag,{value:"Module"}));async function tr(u,t,g,m,v,x,_,p,h,S,N,R){if(!e(t).trim()||!e(g).trim()||!e(m).trim()){a(v,"Please fill out all required fields.");return}try{const D=await x.onAdd({name:e(t).trim(),fullName:e(g).trim(),description:e(m).trim(),descriptionRefs:e(_),queries:e(p),transformations:e(h),tags:e(S),existingReferences:e(N)}),A=D&&typeof D=="object"&&"success"in D?D:void 0;if(A&&!A.success){a(v,A.error??"Unable to add language. Please review your input.",!0);return}a(v,null),R(),x.onClose?.()}catch(D){a(v,D instanceof Error?D.message:"Unexpected error while adding the language.",!0)}}function aa(u,t,g){t(),g.onClose()}var ar=u=>u.stopPropagation(),rr=w('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),nr=(u,t,g)=>t(e(g)),ir=w('<button type="button"> </button>'),or=w('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),lr=w("<option> </option>"),sr=(u,t,g,m)=>t(e(g).code,e(m)),dr=w('<button type="button"> </button>'),ur=w('<div class="mt-2 flex flex-wrap gap-1"></div>'),cr=w('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),gr=w("<option> </option>"),vr=(u,t,g,m)=>t(e(g).code,e(m)),fr=w('<button type="button"> </button>'),br=w('<div class="mt-2 flex flex-wrap gap-1"></div>'),mr=w('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),xr=(u,t,g)=>t(e(g)),_r=w('<button type="button"> </button>'),pr=w('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),yr=w(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function ra(u,t){Ke(t,!0);let g=fe(t,"isOpen",11,!1),m=fe(t,"availableRefs",19,()=>[]),v=fe(t,"isEdit",3,!1),x=k(""),_=k(""),p=k(""),h=k(Te([])),S=k(Te({})),N=k(Te({})),R=k(Te([])),D=k(Te([])),A=k(null);Ve(()=>{v()&&t.initialData&&(a(x,t.initialData.name,!0),a(_,t.initialData.fullName,!0),a(p,t.initialData.description,!0),a(h,[...t.initialData.descriptionRefs],!0),a(S,{...t.initialData.queries},!0),a(N,{...t.initialData.transformations},!0),a(R,[...t.initialData.tags],!0),a(D,[...t.initialData.existingReferences],!0),a(A,null))});function I(){a(x,""),a(_,""),a(p,""),a(h,[],!0),a(S,{},!0),a(N,{},!0),a(R,[],!0),a(D,[],!0),a(O,!1),a(H,!1),a(A,null)}function q(E){e(h).includes(E)?a(h,e(h).filter(d=>d!==E),!0):a(h,[...e(h),E],!0)}function be(E){e(R).some(d=>d.label===E.label)?a(R,e(R).filter(d=>d.label!==E.label),!0):a(R,[...e(R),E],!0)}function pe(E,d){if(!e(S)[E])return;const f=e(S)[E].refs;f.includes(d)?e(S)[E].refs=f.filter(y=>y!==d):e(S)[E].refs=[...f,d],a(S,{...e(S)},!0)}function X(E,d){if(!e(N)[E])return;const f=e(N)[E].refs;f.includes(d)?e(N)[E].refs=f.filter(y=>y!==d):e(N)[E].refs=[...f,d],a(N,{...e(N)},!0)}let O=k(!1),H=k(!1);Ve(()=>{if(t.queries.length>0&&!e(O)){const E={};t.queries.forEach(d=>{if(v()&&t.initialData&&t.initialData.queries[d.code]){const f=t.initialData.queries[d.code];E[d.code]={polytime:f.polytime,note:f.note||"",refs:[...f.refs]}}else E[d.code]={polytime:"unknown",note:"",refs:[]}}),a(S,E,!0),a(O,!0)}}),Ve(()=>{if(t.transformations.length>0&&!e(H)){const E={};t.transformations.forEach(d=>{if(v()&&t.initialData){let f=t.initialData.transformations[d.code];if(!f){const y=Object.keys(t.initialData.transformations).find(j=>t.initialData.transformations[j]!==void 0&&(j===d.code||d.code==="‚àßC"&&j==="AND_C"||d.code==="‚àßBC"&&j==="AND_BC"||d.code==="‚à®C"&&j==="OR_C"||d.code==="‚à®BC"&&j==="OR_BC"||d.code==="¬¨C"&&j==="NOT_C"));y&&(f=t.initialData.transformations[y])}E[d.code]=f?{polytime:f.polytime,note:f.note||"",refs:[...f.refs]}:{polytime:"unknown",note:"",refs:[]}}else E[d.code]={polytime:"unknown",note:"",refs:[]}}),a(N,E,!0),a(H,!0)}});var V=He(),G=qe(V);{var Q=E=>{var d=yr();d.__click=[aa,I,t];var f=i(d);f.__click=[ar];var y=i(f),j=i(y),K=i(j);n(j),at(2),n(y);var J=o(y,2),re=i(J);{var de=z=>{var C=rr(),he=i(C,!0);n(C),M(()=>F(he,e(A))),b(z,C)};P(re,z=>{e(A)&&z(de)})}var ie=o(re,2),xe=o(i(ie),2),ae=i(xe),ue=o(i(ae),2);Ze(ue),n(ae);var ce=o(ae,2),Y=o(i(ce),2);Ze(Y),n(ce),n(xe);var oe=o(xe,2),ne=o(i(oe),2);bt(ne),n(oe);var ye=o(oe,2);{var Fe=z=>{var C=or(),he=o(i(C),2);le(he,21,m,se,(Qe,Ee)=>{var me=ir();me.__click=[nr,q,Ee];var Le=i(me,!0);n(me),M(ke=>{Ce(me,1,ke),F(Le,e(Ee))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(h).includes(e(Ee))?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),b(Qe,me)}),n(he),n(C),b(z,C)};P(ye,z=>{m().length>0&&z(Fe)})}n(ie);var Ae=o(ie,2),Ie=o(i(Ae),2);le(Ie,21,()=>t.queries,se,(z,C)=>{var he=He(),Qe=qe(he);{var Ee=me=>{var Le=cr(),ke=i(Le),ze=i(ke),Pe=i(ze),ot=i(Pe,!0);n(Pe);var Be=o(Pe,2);le(Be,21,()=>t.polytimeOptions,se,(_e,Re)=>{var Se=lr(),Me=i(Se,!0);n(Se);var we={};M(()=>{F(Me,e(Re).label),we!==(we=e(Re).value)&&(Se.value=(Se.__value=e(Re).value)??"")}),b(_e,Se)}),n(Be),n(ze);var De=o(ze,2),$e=i(De),Ge=o($e,2);Ze(Ge),n(De),n(ke);var lt=o(ke,2);{var st=_e=>{var Re=ur();le(Re,21,m,se,(Se,Me)=>{var we=dr();we.__click=[sr,pe,C,Me];var dt=i(we,!0);n(we),M(ut=>{Ce(we,1,ut),F(dt,e(Me))},[()=>`px-2 py-0.5 text-xs rounded ${e(S)[e(C).code].refs.includes(e(Me))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Se,we)}),n(Re),b(_e,Re)};P(lt,_e=>{m().length>0&&_e(st)})}n(Le),M(()=>{Ue(Pe,"for",`query-${e(C).code??""}-polytime`),F(ot,e(C).name),Ue(Be,"id",`query-${e(C).code??""}-polytime`),Ue($e,"for",`query-${e(C).code??""}-note`),Ue(Ge,"id",`query-${e(C).code??""}-note`)}),it(Be,()=>e(S)[e(C).code].polytime,_e=>e(S)[e(C).code].polytime=_e),je(Ge,()=>e(S)[e(C).code].note,_e=>e(S)[e(C).code].note=_e),b(me,Le)};P(Qe,me=>{e(S)[e(C).code]&&me(Ee)})}b(z,he)}),n(Ie),n(Ae);var Oe=o(Ae,2),W=o(i(Oe),2);le(W,21,()=>t.transformations,se,(z,C)=>{var he=He(),Qe=qe(he);{var Ee=me=>{var Le=mr(),ke=i(Le),ze=i(ke),Pe=i(ze),ot=i(Pe,!0);n(Pe);var Be=o(Pe,2);le(Be,21,()=>t.polytimeOptions,se,(_e,Re)=>{var Se=gr(),Me=i(Se,!0);n(Se);var we={};M(()=>{F(Me,e(Re).label),we!==(we=e(Re).value)&&(Se.value=(Se.__value=e(Re).value)??"")}),b(_e,Se)}),n(Be),n(ze);var De=o(ze,2),$e=i(De),Ge=o($e,2);Ze(Ge),n(De),n(ke);var lt=o(ke,2);{var st=_e=>{var Re=br();le(Re,21,m,se,(Se,Me)=>{var we=fr();we.__click=[vr,X,C,Me];var dt=i(we,!0);n(we),M(ut=>{Ce(we,1,ut),F(dt,e(Me))},[()=>`px-2 py-0.5 text-xs rounded ${e(N)[e(C).code].refs.includes(e(Me))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Se,we)}),n(Re),b(_e,Re)};P(lt,_e=>{m().length>0&&_e(st)})}n(Le),M(()=>{Ue(Pe,"for",`transform-${e(C).code??""}-polytime`),F(ot,e(C).name),Ue(Be,"id",`transform-${e(C).code??""}-polytime`),Ue($e,"for",`transform-${e(C).code??""}-note`),Ue(Ge,"id",`transform-${e(C).code??""}-note`)}),it(Be,()=>e(N)[e(C).code].polytime,_e=>e(N)[e(C).code].polytime=_e),je(Ge,()=>e(N)[e(C).code].note,_e=>e(N)[e(C).code].note=_e),b(me,Le)};P(Qe,me=>{e(N)[e(C).code]&&me(Ee)})}b(z,he)}),n(W),n(Oe);var T=o(Oe,2);{var L=z=>{var C=pr(),he=o(i(C),2);le(he,21,()=>t.existingTags,se,(Qe,Ee)=>{var me=_r();me.__click=[xr,be,Ee];var Le=i(me,!0);n(me),M((ke,ze)=>{Ce(me,1,ke),Ya(me,`background-color: ${e(Ee).color??""}; color: white; ${ze??""}`),F(Le,e(Ee).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(R).some(ke=>ke.label===e(Ee).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(R).some(ke=>ke.label===e(Ee).label)?`ring-color: ${e(Ee).color};`:""]),b(Qe,me)}),n(he),n(C),b(z,C)};P(T,z=>{t.existingTags.length>0&&z(L)})}var ee=o(T,2),te=i(ee);te.__click=[aa,I,t];var Z=o(te,2);Z.__click=[tr,x,_,p,A,t,h,S,N,R,D,I];var ge=i(Z);n(Z),n(ee),n(J),n(f),n(d),M(z=>{F(K,`${v()?"Edit":"Add New"} Language`),Z.disabled=z,F(ge,`${v()?"Update":"Add"} Language`)},[()=>!e(x).trim()||!e(_).trim()||!e(p).trim()]),je(ue,()=>e(x),z=>a(x,z)),je(Y,()=>e(_),z=>a(_,z)),je(ne,()=>e(p),z=>a(p,z)),b(E,d)};P(G,E=>{g()&&E(Q)})}b(u,V),Xe()}rt(["click"]);function hr(u,t,g,m){e(t).trim()&&(g.onAdd(e(t).trim()),a(t,""),m(!1))}function na(u,t,g,m){t()||a(g,""),m.onClose()}var wr=u=>u.stopPropagation(),Er=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function kr(u,t){Ke(t,!0);let g=fe(t,"isOpen",15,!1),m=fe(t,"initialValue",3,""),v=fe(t,"isEditMode",3,!1),x=k(Te(m()));Ve(()=>{g()&&m()&&a(x,m())});const _=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var p=He(),h=qe(p);{var S=N=>{var R=Er();R.__click=[na,v,x,t];var D=i(R);D.__click=[wr];var A=i(D),I=i(A),q=i(I,!0);n(I);var be=o(I,2),pe=i(be,!0);n(be),n(A);var X=o(A,2),O=i(X),H=o(i(O),2);bt(H),Ue(H,"placeholder",_),at(2),n(O);var V=o(O,2),G=i(V);G.__click=[na,v,x,t];var Q=o(G,2);Q.__click=[hr,x,t,g];var E=i(Q,!0);n(Q),n(V),n(X),n(D),n(R),M(d=>{F(q,v()?"Edit Reference":"Add New Reference"),F(pe,v()?"Update BibTeX citation":"Paste BibTeX citation"),Q.disabled=d,F(E,v()?"Update Reference":"Add Reference")},[()=>!e(x).trim()]),je(H,()=>e(x),d=>a(x,d)),b(N,R)};P(h,N=>{g()&&N(S)})}b(u,p),Xe()}rt(["click"]);function Rr(u,t,g,m,v,x,_,p,h){!e(t).trim()||!e(g).trim()||(m.onAdd({shortName:e(t).trim(),name:e(g).trim(),description:e(v).trim(),refs:e(x)}),_()||p(),h(!1))}function ia(u,t,g,m){t()||g(),m.onClose()}var Sr=u=>u.stopPropagation(),Tr=(u,t,g)=>t(e(g)),Fr=w('<button type="button"> </button>'),Ar=w('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Dr=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-orange-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="sf-shortName" class="block text-sm font-medium text-gray-700 mb-2">Short Name <span class="text-red-500">*</span></label> <input id="sf-shortName" type="text" placeholder="e.g., Clique" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Brief label displayed on edges (e.g., "Clique", "PI")</p></div> <div><label for="sf-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name <span class="text-red-500">*</span></label> <input id="sf-name" type="text" placeholder="e.g., Clique Detection Instances" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Full human-readable name</p></div> <div><label for="sf-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="sf-description" rows="3" placeholder="Describe what this function separates..." class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-y"></textarea></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Ir(u,t){Ke(t,!0);let g=fe(t,"isOpen",15,!1),m=fe(t,"availableRefs",19,()=>[]),v=fe(t,"isEditMode",3,!1),x=k(""),_=k(""),p=k(""),h=k(Te([]));Ve(()=>{g()&&t.initialValue&&(a(x,t.initialValue.shortName,!0),a(_,t.initialValue.name,!0),a(p,t.initialValue.description,!0),a(h,[...t.initialValue.refs],!0))});function S(){a(x,""),a(_,""),a(p,""),a(h,[],!0)}function N(I){e(h).includes(I)?a(h,e(h).filter(q=>q!==I),!0):a(h,[...e(h),I],!0)}var R=He(),D=qe(R);{var A=I=>{var q=Dr();q.__click=[ia,v,S,t];var be=i(q);be.__click=[Sr];var pe=i(be),X=i(pe),O=i(X,!0);n(X);var H=o(X,2),V=i(H,!0);n(H),n(pe);var G=o(pe,2),Q=i(G),E=o(i(Q),2);Ze(E),at(2),n(Q);var d=o(Q,2),f=o(i(d),2);Ze(f),at(2),n(d);var y=o(d,2),j=o(i(y),2);bt(j),n(y);var K=o(y,2);{var J=ae=>{var ue=Ar(),ce=o(i(ue),2);le(ce,21,m,se,(Y,oe)=>{var ne=Fr();ne.__click=[Tr,N,oe];var ye=i(ne,!0);n(ne),M(Fe=>{Ce(ne,1,Fe),F(ye,e(oe))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(h).includes(e(oe))?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(Y,ne)}),n(ce),n(ue),b(ae,ue)};P(K,ae=>{m().length>0&&ae(J)})}var re=o(K,2),de=i(re);de.__click=[ia,v,S,t];var ie=o(de,2);ie.__click=[Rr,x,_,t,p,h,v,S,g];var xe=i(ie,!0);n(ie),n(re),n(G),n(be),n(q),M(ae=>{F(O,v()?"Edit Separating Function":"Add New Separating Function"),F(V,v()?"Update separating function details":"Define a new separating function"),ie.disabled=ae,F(xe,v()?"Update Function":"Add Function")},[()=>!e(x).trim()||!e(_).trim()]),je(E,()=>e(x),ae=>a(x,ae)),je(f,()=>e(_),ae=>a(_,ae)),je(j,()=>e(p),ae=>a(p,ae)),b(I,q)};P(D,I=>{g()&&I(A)})}b(u,R),Xe()}rt(["click"]);function Or(u,t,g,m,v,x,_,p,h,S){!e(t)||!e(g)||!e(m)||e(t)===e(g)||(v.onSave({sourceId:e(t),targetId:e(g),status:e(m),description:e(x)||void 0,refs:e(_),separatingFunctionIds:e(p).length>0?e(p):void 0}),h(),S(!1))}function oa(u,t,g){t(),g.onClose()}var Nr=u=>u.stopPropagation(),Lr=w("<option> </option>"),Mr=w("<option> </option>"),jr=w("<option> </option>"),Cr=w('<p class="text-xs text-gray-500 mt-1"> </p>'),zr=(u,t,g)=>t(e(g)),Pr=w('<button type="button"> </button>'),Br=w('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Ur=(u,t,g)=>t(e(g).shortName),qr=w('<button type="button"> </button>'),Qr=w('<p class="text-xs text-gray-500 mt-2"> </p>'),Vr=w('<fieldset class="border-t pt-4"><legend class="block text-sm font-medium text-gray-700 mb-2">Separating Functions (optional)</legend> <div class="flex flex-wrap gap-2"></div> <!></fieldset>'),Hr=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <!> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function Kr(u,t){Ke(t,!0);let g=fe(t,"isOpen",15,!1),m=fe(t,"availableRefs",19,()=>[]),v=fe(t,"availableSeparatingFunctions",19,()=>[]),x=fe(t,"baselineRelations",19,()=>new Map),_=k(""),p=k(""),h=k(""),S=k(""),N=k(Te([])),R=k(Te([]));Ve(()=>{g()&&t.initialData&&(a(_,t.initialData.sourceId,!0),a(p,t.initialData.targetId,!0),a(h,t.initialData.status,!0),a(S,t.initialData.description||"",!0),a(N,[...t.initialData.refs],!0),t.initialData.separatingFunctionIds?a(R,[...t.initialData.separatingFunctionIds],!0):t.initialData.separatingFunctions?a(R,t.initialData.separatingFunctions.map(X=>X.shortName),!0):a(R,[],!0))}),Ve(()=>{if(e(_)&&e(p)&&e(_)!==e(p)){const X=`${e(_)}->${e(p)}`,O=x().get(X);O&&(a(h,O.status,!0),a(N,[...O.refs],!0),O.separatingFunctionIds?a(R,[...O.separatingFunctionIds],!0):O.separatingFunctions?a(R,O.separatingFunctions.map(H=>H.shortName),!0):a(R,[],!0))}});function D(){a(_,""),a(p,""),a(h,""),a(S,""),a(N,[],!0),a(R,[],!0)}function A(X){e(N).includes(X)?a(N,e(N).filter(O=>O!==X),!0):a(N,[...e(N),X],!0)}function I(X){e(R).includes(X)?a(R,e(R).filter(O=>O!==X),!0):a(R,[...e(R),X],!0)}var q=He(),be=qe(q);{var pe=X=>{var O=Hr();O.__click=[oa,D,t];var H=i(O);H.__click=[Nr];var V=o(i(H),2),G=i(V),Q=i(G),E=o(i(Q),2),d=i(E);d.value=d.__value="";var f=o(d);le(f,17,()=>t.languages,se,(W,T)=>{var L=Lr(),ee=i(L,!0);n(L);var te={};M(()=>{F(ee,e(T).name),te!==(te=e(T).name)&&(L.value=(L.__value=e(T).name)??"")}),b(W,L)}),n(E),n(Q);var y=o(Q,2),j=o(i(y),2),K=i(j);K.value=K.__value="";var J=o(K);le(J,17,()=>t.languages,se,(W,T)=>{var L=Mr(),ee=i(L,!0);n(L);var te={};M(()=>{L.disabled=e(T).name===e(_),F(ee,e(T).name),te!==(te=e(T).name)&&(L.value=(L.__value=e(T).name)??"")}),b(W,L)}),n(j),n(y),n(G);var re=o(G,2),de=o(i(re),2),ie=i(de);ie.value=ie.__value="";var xe=o(ie);le(xe,17,()=>t.statusOptions,se,(W,T)=>{var L=jr(),ee=i(L,!0);n(L);var te={};M(()=>{F(ee,e(T).label),te!==(te=e(T).value)&&(L.value=(L.__value=e(T).value)??"")}),b(W,L)}),n(de);var ae=o(de,2);{var ue=W=>{const T=B(()=>t.statusOptions.find(Z=>Z.value===e(h)));var L=He(),ee=qe(L);{var te=Z=>{var ge=Cr(),z=i(ge,!0);n(ge),M(()=>F(z,e(T).description)),b(Z,ge)};P(ee,Z=>{e(T)&&Z(te)})}b(W,L)};P(ae,W=>{e(h)&&W(ue)})}n(re);var ce=o(re,2),Y=o(i(ce),2);bt(Y),n(ce);var oe=o(ce,2);{var ne=W=>{var T=Br(),L=o(i(T),2);le(L,21,m,se,(ee,te)=>{var Z=Pr();Z.__click=[zr,A,te];var ge=i(Z,!0);n(Z),M(z=>{Ce(Z,1,z),F(ge,e(te))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(N).includes(e(te))?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),b(ee,Z)}),n(L),n(T),b(W,T)};P(oe,W=>{m().length>0&&W(ne)})}var ye=o(oe,2);{var Fe=W=>{var T=Vr(),L=o(i(T),2);le(L,21,v,se,(Z,ge)=>{var z=qr();z.__click=[Ur,I,ge];var C=i(z,!0);n(z),M(he=>{Ce(z,1,he),Ue(z,"title",e(ge).name),F(C,e(ge).shortName)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(R).includes(e(ge).shortName)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(Z,z)}),n(L);var ee=o(L,2);{var te=Z=>{var ge=Qr(),z=i(ge);n(ge),M(C=>F(z,`Selected: ${C??""}`),[()=>e(R).join(", ")]),b(Z,ge)};P(ee,Z=>{e(R).length>0&&Z(te)})}n(T),b(W,T)};P(ye,W=>{v().length>0&&W(Fe)})}var Ae=o(ye,2),Ie=i(Ae);Ie.__click=[oa,D,t];var Oe=o(Ie,2);Oe.__click=[Or,_,p,h,t,S,N,R,D,g],n(Ae),n(V),n(H),n(O),M(()=>Oe.disabled=!e(_)||!e(p)||!e(h)||e(_)===e(p)),it(E,()=>e(_),W=>a(_,W)),it(j,()=>e(p),W=>a(p,W)),it(de,()=>e(h),W=>a(h,W)),je(Y,()=>e(S),W=>a(S,W)),b(X,O)};P(be,X=>{g()&&X(pe)})}b(u,q),Xe()}rt(["click"]);var Xr=w('<span class="text-sm font-bold text-gray-900"> </span>'),Gr=w('<span class="text-sm text-gray-600">( <!> )</span>'),Jr=(u,t)=>t.onToggleExpand(t.index),Yr=(u,t)=>t.onEdit(t.index),Wr=(u,t)=>t.onDelete(t.index),Zr=w("<div><!></div>"),$r=w('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function yt(u,t){Ke(t,!0);let g=fe(t,"colorScheme",3,"purple"),m=fe(t,"isExpanded",3,!1),v=fe(t,"renderMathTitle",3,!0),x=fe(t,"renderMathSubtitle",3,!0);const p={purple:{border:"border-purple-300",bg:"bg-purple-50",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300",divider:"border-purple-200"},orange:{border:"border-orange-300",bg:"bg-orange-50",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200 text-orange-800 border-orange-300",divider:"border-orange-200"},green:{border:"border-green-300",bg:"bg-green-50",text:"text-green-800",button:"bg-green-100 hover:bg-green-200 text-green-800 border-green-300",divider:"border-green-200"},yellow:{border:"border-yellow-300",bg:"bg-yellow-50",text:"text-yellow-800",button:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300",divider:"border-yellow-200"},blue:{border:"border-blue-300",bg:"bg-blue-50",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200 text-blue-800 border-blue-300",divider:"border-blue-200"}}[g()];var h=$r(),S=i(h),N=i(S),R=i(N),D=i(R);n(R);var A=o(R,2);{var I=d=>{We(d,{get text(){return t.title},className:"text-sm font-bold text-gray-900"})},q=d=>{var f=Xr(),y=i(f,!0);n(f),M(()=>F(y,t.title)),b(d,f)};P(A,d=>{v()?d(I):d(q,!1)})}var be=o(A,2);{var pe=d=>{var f=Gr(),y=o(i(f));{var j=J=>{We(J,{get text(){return t.subtitle},className:"inline"})},K=J=>{var re=Ha();M(()=>F(re,t.subtitle)),b(J,re)};P(y,J=>{x()?J(j):J(K,!1)})}at(),n(f),b(d,f)};P(be,d=>{t.subtitle&&d(pe)})}n(N);var X=o(N,2),O=i(X);O.__click=[Jr,t];var H=i(O,!0);n(O);var V=o(O,2);V.__click=[Yr,t];var G=o(V,2);G.__click=[Wr,t],n(X),n(S);var Q=o(S,2);{var E=d=>{var f=Zr(),y=i(f);{var j=K=>{var J=He(),re=qe(J);Ka(re,()=>t.children),b(K,J)};P(y,K=>{t.children&&K(j)})}n(f),M(()=>Ce(f,1,`mt-4 pt-4 border-t ${p.divider??""}`)),b(d,f)};P(Q,d=>{m()&&d(E)})}n(h),M(()=>{Ce(h,1,`border-2 ${p.border??""} ${p.bg??""} rounded-lg p-3`),Ce(R,1,`text-sm font-semibold ${p.text??""}`),F(D,`${t.type??""}:`),Ce(O,1,`px-2 py-1 text-xs ${p.button??""} rounded border`),Ue(O,"aria-label",m()?"Collapse":"Expand"),F(H,m()?"Collapse":"Expand")}),b(u,h),Xe()}rt(["click"]);var en=w('<div class="text-gray-500 text-xs"> </div>'),tn=w('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),an=w('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),rn=w('<div class="text-gray-500 text-xs"> </div>'),nn=w('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),on=w('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),ln=w('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div></div>'),sn=w('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),dn=w('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <!></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <!></div> <!> <!> <!></div>');function la(u,t){Ke(t,!0);let g=fe(t,"isExpanded",3,!1),m=fe(t,"isEdit",3,!1);const v=m()?"yellow":"green";{const x=p=>{var h=dn(),S=i(h),N=o(i(S),2);We(N,{get text(){return t.language.fullName},className:"text-gray-900 block"}),n(S);var R=o(S,2),D=o(i(R),2);We(D,{get text(){return t.language.description},className:"text-gray-900 block"}),n(R);var A=o(R,2);{var I=O=>{var H=an(),V=i(H),G=i(V);n(V);var Q=o(V,2);le(Q,21,()=>Object.entries(t.language.queries),se,(E,d)=>{var f=B(()=>ta(e(d),2));let y=()=>e(f)[0],j=()=>e(f)[1];var K=tn(),J=i(K),re=i(J,!0);n(J);var de=o(J,2),ie=i(de,!0);n(de);var xe=o(de,2);{var ae=Y=>{We(Y,{get text(){return j().note},className:"text-gray-500 italic text-xs block"})};P(xe,Y=>{j().note&&Y(ae)})}var ue=o(xe,2);{var ce=Y=>{var oe=en(),ne=i(oe);n(oe),M(ye=>F(ne,`Refs: [${ye??""}]`),[()=>j().refs.join(", ")]),b(Y,oe)};P(ue,Y=>{j().refs.length>0&&Y(ce)})}n(K),M(()=>{F(re,y()),F(ie,j().polytime)}),b(E,K)}),n(Q),n(H),M(E=>F(G,`Query Support (${E??""}):`),[()=>Object.keys(t.language.queries).length]),b(O,H)};P(A,O=>{t.language.queries&&Object.keys(t.language.queries).length>0&&O(I)})}var q=o(A,2);{var be=O=>{var H=on(),V=i(H),G=i(V);n(V);var Q=o(V,2);le(Q,21,()=>Object.entries(t.language.transformations),se,(E,d)=>{var f=B(()=>ta(e(d),2));let y=()=>e(f)[0],j=()=>e(f)[1];var K=nn(),J=i(K),re=i(J,!0);n(J);var de=o(J,2),ie=i(de,!0);n(de);var xe=o(de,2);{var ae=Y=>{We(Y,{get text(){return j().note},className:"text-gray-500 italic text-xs block"})};P(xe,Y=>{j().note&&Y(ae)})}var ue=o(xe,2);{var ce=Y=>{var oe=rn(),ne=i(oe);n(oe),M(ye=>F(ne,`Refs: [${ye??""}]`),[()=>j().refs.join(", ")]),b(Y,oe)};P(ue,Y=>{j().refs.length>0&&Y(ce)})}n(K),M(()=>{F(re,y()),F(ie,j().polytime)}),b(E,K)}),n(Q),n(H),M(E=>F(G,`Transformation Support (${E??""}):`),[()=>Object.keys(t.language.transformations).length]),b(O,H)};P(q,O=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&O(be)})}var pe=o(q,2);{var X=O=>{var H=sn(),V=i(H),G=i(V);n(V);var Q=o(V,2);le(Q,21,()=>t.language.tags,se,(E,d)=>{var f=ln(),y=i(f),j=i(y,!0);n(y);var K=o(y,2),J=i(K,!0);n(K),n(f),M(()=>{F(j,e(d).label),F(J,e(d).description||"No description")}),b(E,f)}),n(Q),n(H),M(()=>F(G,`Tags (${t.language.tags.length??""}):`)),b(O,H)};P(pe,O=>{t.language.tags.length>0&&O(X)})}n(h),b(p,h)};let _=B(()=>m()?"Edit Language":"New Language");yt(u,{get type(){return e(_)},get title(){return t.language.name},get subtitle(){return t.language.description},get colorScheme(){return v},get index(){return t.index},get isExpanded(){return g()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:x,$$slots:{default:!0}})}Xe()}var un=w('<pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto"> </pre>');function cn(u,t){let g=fe(t,"isExpanded",3,!1);yt(u,{type:"Reference",get title(){return`new-${t.index??""}`},renderMathTitle:!1,renderMathSubtitle:!1,colorScheme:"purple",get index(){return t.index},get isExpanded(){return g()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:v=>{var x=un(),_=i(x,!0);n(x),M(()=>F(_,t.reference)),b(v,x)},$$slots:{default:!0}})}var gn=w('<div><span class="text-xs font-semibold text-gray-700">Description:</span> <!></div>'),vn=w('<div><span class="text-xs font-semibold text-gray-700">References:</span> <span class="text-xs text-gray-600 ml-2"> </span></div>'),fn=w('<div class="space-y-2"><div><span class="text-xs font-semibold text-gray-700">Short Name:</span> <!></div> <div><span class="text-xs font-semibold text-gray-700">Full Name:</span> <!></div> <!> <!></div>');function bn(u,t){Ke(t,!0),yt(u,{type:"SF",get title(){return t.separatingFunction.shortName},get subtitle(){return t.separatingFunction.name},colorScheme:"orange",get index(){return t.index},get isExpanded(){return t.isExpanded},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:m=>{var v=fn(),x=i(v),_=o(i(x),2);We(_,{get text(){return t.separatingFunction.shortName},className:"text-xs text-gray-900 ml-2 inline"}),n(x);var p=o(x,2),h=o(i(p),2);We(h,{get text(){return t.separatingFunction.name},className:"text-xs text-gray-900 ml-2 inline"}),n(p);var S=o(p,2);{var N=A=>{var I=gn(),q=o(i(I),2);We(q,{get text(){return t.separatingFunction.description},className:"text-xs text-gray-700 mt-1 block"}),n(I),b(A,I)};P(S,A=>{t.separatingFunction.description&&A(N)})}var R=o(S,2);{var D=A=>{var I=vn(),q=o(i(I),2),be=i(q,!0);n(q),n(I),M(pe=>F(be,pe),[()=>t.separatingFunction.refs.join(", ")]),b(A,I)};P(R,A=>{t.separatingFunction.refs&&t.separatingFunction.refs.length>0&&A(D)})}n(v),b(m,v)},$$slots:{default:!0}}),Xe()}var mn=w('<div class="text-gray-500 text-xs mt-1"> </div>'),xn=w('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600 text-xs"> </div> <div class="text-gray-500 italic text-xs"> </div> <!></div>'),_n=w('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),pn=w('<div><div class="font-semibold text-gray-700 mb-1">References:</div> <div class="text-gray-600"> </div></div>'),yn=w('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Transformation Status:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!></div>');function hn(u,t){Ke(t,!0);let g=fe(t,"isExpanded",3,!1),m=fe(t,"isModified",3,!1);const v=tt(t.relationship.sourceId,t.relationship.targetId),x=`${t.relationship.sourceId} ‚Üí ${t.relationship.targetId}`;var _=He(),p=qe(_);{var h=S=>{yt(S,{type:"Relationship",get title(){return x},get subtitle(){return t.relationship.status},colorScheme:"blue",get index(){return t.index},get isExpanded(){return g()},get onToggleExpand(){return t.onToggleExpand},onEdit:()=>t.onEdit(t.index),onDelete:()=>t.onDelete(t.index,v),children:R=>{var D=yn(),A=i(D),I=o(i(A),2),q=i(I),be=i(q,!0);n(q),n(I),n(A);var pe=o(A,2);{var X=V=>{var G=_n(),Q=i(G),E=i(Q);n(Q);var d=o(Q,2);le(d,21,()=>t.relationship.separatingFunctions,se,(f,y)=>{var j=xn(),K=i(j),J=i(K,!0);n(K);var re=o(K,2),de=i(re);n(re);var ie=o(re,2),xe=i(ie,!0);n(ie);var ae=o(ie,2);{var ue=ce=>{var Y=mn(),oe=i(Y);n(Y),M(ne=>F(oe,`Refs: [${ne??""}]`),[()=>e(y).refs.join(", ")]),b(ce,Y)};P(ae,ce=>{e(y).refs&&e(y).refs.length>0&&ce(ue)})}n(j),M(()=>{F(J,e(y).name),F(de,`Short: ${e(y).shortName??""}`),F(xe,e(y).description)}),b(f,j)}),n(d),n(G),M(()=>F(E,`Separating Functions (${t.relationship.separatingFunctions.length??""}):`)),b(V,G)};P(pe,V=>{t.relationship.separatingFunctions&&t.relationship.separatingFunctions.length>0&&V(X)})}var O=o(pe,2);{var H=V=>{var G=pn(),Q=o(i(G),2),E=i(Q,!0);n(Q),n(G),M(d=>F(E,d),[()=>t.relationship.refs.join(", ")]),b(V,G)};P(O,V=>{t.relationship.refs&&t.relationship.refs.length>0&&V(H)})}n(D),M(()=>F(be,t.relationship.status)),b(R,D)},$$slots:{default:!0}})};P(p,S=>{m()&&S(h)})}b(u,_),Xe()}var wn=w('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),En=w(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!> <!></div></div>`);function kn(u,t){Ke(t,!0);const g=B(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.newSeparatingFunctions.length>0||t.relationships.filter(D=>t.modifiedRelations.has(tt(D.sourceId,D.targetId))).length>0);var m=En(),v=o(i(m),4),x=i(v);le(x,17,()=>t.newReferences,se,(D,A,I)=>{{let q=B(()=>t.expandedReferenceIndex===I);cn(D,{get reference(){return e(A)},index:I,get isExpanded(){return e(q)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var _=o(x,2);le(_,17,()=>t.newSeparatingFunctions,se,(D,A,I)=>{{let q=B(()=>t.expandedSeparatingFunctionIndex===I);bn(D,{get separatingFunction(){return e(A)},index:I,get isExpanded(){return e(q)},get onToggleExpand(){return t.onToggleExpandSeparatingFunction},get onEdit(){return t.onEditSeparatingFunction},get onDelete(){return t.onDeleteSeparatingFunction}})}});var p=o(_,2);le(p,17,()=>t.languagesToAdd,se,(D,A,I)=>{{let q=B(()=>t.expandedLanguageToAddIndex===I);la(D,{get language(){return e(A)},index:I,get isExpanded(){return e(q)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var h=o(p,2);le(h,17,()=>t.languagesToEdit,se,(D,A,I)=>{{let q=B(()=>t.expandedLanguageToEditIndex===I);la(D,{get language(){return e(A)},index:I,get isExpanded(){return e(q)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var S=o(h,2);le(S,17,()=>t.relationships,se,(D,A,I)=>{const q=B(()=>t.modifiedRelations.has(tt(e(A).sourceId,e(A).targetId)));{let be=B(()=>t.expandedRelationshipIndex===I);hn(D,{get relationship(){return e(A)},index:I,get isModified(){return e(q)},get isExpanded(){return e(be)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var N=o(S,2);{var R=D=>{var A=wn();b(D,A)};P(N,D=>{e(g)||D(R)})}n(v),n(m),b(u,m),Xe()}var Rn=w('<div class="grid grid-cols-2 md:grid-cols-5 gap-3"><button type="button" class="px-3 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">New Language</button> <button type="button" class="px-3 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">Edit Language</button> <button type="button" class="px-3 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Relationship</button> <button type="button" class="px-3 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">Reference</button> <button type="button" class="px-3 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors">Separator</button></div>');function Sn(u,t){var g=Rn(),m=i(g);m.__click=function(...h){t.onAddLanguage?.apply(this,h)};var v=o(m,2);v.__click=function(...h){t.onEditLanguage?.apply(this,h)};var x=o(v,2);x.__click=function(...h){t.onManageRelationships?.apply(this,h)};var _=o(x,2);_.__click=function(...h){t.onAddReference?.apply(this,h)};var p=o(_,2);p.__click=function(...h){t.onAddSeparatingFunction?.apply(this,h)},n(g),b(u,g)}rt(["click"]);var Tn=w('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function Fn(u,t){let g=fe(t,"disabled",3,!1);var m=Tn(),v=i(m);at(2),n(m),M(()=>v.disabled=g()),b(u,m)}function sa(u,t,g){const m=!e(t);a(t,m),m&&a(g,Lt(),!0)}function An(u,t){a(t,null)}var Dn=w('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),In=w('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),On=w('<div class="text-xs font-medium text-amber-600">Superseded</div>'),Nn=w('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),Ln=(u,t,g)=>t(e(g)),Mn=w('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),jn=w('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),Cn=w('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),zn=(u,t)=>a(t,!1),Pn=u=>u.stopPropagation(),Bn=w("<option> </option>"),Un=(u,t,g)=>{a(t,""),a(g,!1)},qn=(u,t,g,m)=>{e(t)&&(a(g,!1),a(m,!0))},Qn=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),Vn=w('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">üóÇÔ∏è</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!> <!>',1);function Zn(u,t){Ke(t,!0);const g="kcm_contribute_queue_v1",m="kcm_contributor_info_v1",v=r=>typeof r=="string",x=r=>Array.isArray(r)?r.filter(v):[],_=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():La(),p=r=>typeof r=="string"&&r.trim().length>0?r:null;function h(r){if(!r||typeof r!="object")return{};const s={};for(const[l,c]of Object.entries(r)){if(!c||typeof c!="object")continue;const U=v(c.polytime)?c.polytime:"unknown",Ne=v(c.note)?c.note:void 0,Je=x(c.refs),$={polytime:U,refs:Je};Ne&&($.note=Ne),s[l]=$}return s}function S(r){if(!Array.isArray(r))return[];const s=[];for(const l of r){if(!l||typeof l!="object")continue;const c=l;v(c.label)&&s.push({label:c.label,color:v(c.color)?c.color:"#6366f1",description:v(c.description)?c.description:void 0,refs:x(c.refs)})}return s}function N(r){return Array.isArray(r)?r.map(s=>{if(!s||typeof s!="object")return null;const l=s;return!v(l.name)||!v(l.fullName)||!v(l.description)?null:{name:l.name,fullName:l.fullName,description:l.description,descriptionRefs:x(l.descriptionRefs),queries:h(l.queries),transformations:h(l.transformations),tags:S(l.tags),existingReferences:x(l.existingReferences)}}).filter(s=>s!==null):[]}function R(r){if(!Array.isArray(r))return[];const s=[];for(const l of r){if(!l||typeof l!="object")continue;const c=l;!v(c.shortName)||!v(c.name)||!v(c.description)||s.push({shortName:c.shortName,name:c.name,description:c.description,refs:x(c.refs)})}return s}function D(r){if(!Array.isArray(r))return[];const s=[];for(const l of r){if(!l||typeof l!="object")continue;const c=l;!v(c.shortName)||!v(c.name)||!v(c.description)||s.push({shortName:c.shortName,name:c.name,description:c.description,refs:x(c.refs)})}return s}function A(r){return Array.isArray(r)?r.map(s=>{if(!s||typeof s!="object")return null;const l=s;if(!v(l.sourceId)||!v(l.targetId)||!v(l.status))return null;const c=R(l.separatingFunctions),U={sourceId:l.sourceId,targetId:l.targetId,status:l.status,refs:x(l.refs)};return c.length>0&&(U.separatingFunctions=c),U}).filter(s=>s!==null):[]}const I=r=>({...r,descriptionRefs:[...r.descriptionRefs],queries:Object.fromEntries(Object.entries(r.queries).map(([s,l])=>[s,{...l,refs:[...l.refs]}])),transformations:Object.fromEntries(Object.entries(r.transformations).map(([s,l])=>[s,{...l,refs:[...l.refs]}])),tags:r.tags.map(s=>({...s,refs:[...s.refs]})),existingReferences:[...r.existingReferences]}),q=r=>({...r,refs:[...r.refs],separatingFunctions:r.separatingFunctions?r.separatingFunctions.map(s=>({...s,refs:[...s.refs]})):void 0}),be=r=>({...r,refs:[...r.refs]}),pe=r=>{try{return new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(new Date(r))}catch{return r}},X=r=>{const s=[];return r.summary.languagesToAdd&&s.push(`${r.summary.languagesToAdd} new ${r.summary.languagesToAdd===1?"language":"languages"}`),r.summary.languagesToEdit&&s.push(`${r.summary.languagesToEdit} edit${r.summary.languagesToEdit===1?"":"s"}`),r.summary.relationships&&s.push(`${r.summary.relationships} relation${r.summary.relationships===1?"":"s"}`),r.summary.newReferences&&s.push(`${r.summary.newReferences} reference${r.summary.newReferences===1?"":"s"}`),s.length>0?s.join(" ¬∑ "):"No changes"},O=Object.values(t.data.polytimeOptions),H=t.data.relationTypes.map(r=>({value:r.id,label:r.name,description:r.description??""})),V=Na(t.data.adjacencyMatrix);let G=k(""),Q=k(""),E=k(""),d=k(Te([])),f=k(Te([])),y=k(Te([])),j=k(null),K=k(null),J=k(null),re=k(null),de=k(null),ie=k(!1),xe=k(!1),ae=k(!1),ue=k(""),ce=k(!1),Y=k(!1),oe=k(!1),ne=k(null),ye=k(null),Fe=k(null),Ae=k(null),Ie=k(null),Oe=k(Te(new Set)),W=k(!1),T=k(Te([])),L=k(Te([])),ee=k(Te([])),te=k(""),Z=k(null),ge=k(Te([])),z=k(!1);const C=B(()=>e(d).length>0||e(f).length>0||e(y).filter(r=>e(Oe).has(tt(r.sourceId,r.targetId))).length>0||e(T).length>0||e(L).length>0||e(ee).length>0);let he=!1;Ve(()=>{const r=e(C);r&&!he&&!e(te)&&a(te,_(),!0),!r&&he&&(a(te,_(),!0),a(Z,null)),he=r}),za(()=>{a(ge,Lt(),!0);try{const r=localStorage.getItem(g);if(r){const l=JSON.parse(r);a(d,N(l?.languagesToAdd),!0),a(f,N(l?.languagesToEdit),!0),a(y,A(l?.relationships),!0),a(T,x(l?.newReferences),!0),a(L,D(l?.newSeparatingFunctions),!0),a(ee,S(l?.customTags),!0),a(Oe,new Set(x(l?.modifiedRelations)),!0),a(te,p(l?.submissionId)??"",!0),a(Z,p(l?.supersedesSubmissionId),!0)}const s=localStorage.getItem(m);if(s){const l=JSON.parse(s);v(l?.email)&&a(G,l.email,!0),v(l?.github)&&a(Q,l.github,!0),v(l?.note)&&a(E,l.note,!0)}}catch(r){console.warn("Failed to restore queued changes from storage",r)}finally{a(W,!0)}e(te)||a(te,_(),!0)});function Qe(r){const s=r(e(Oe));a(Oe,new Set(s),!0)}function Ee(r){const s=tt(r.sourceId,r.targetId);Qe(l=>{const c=new Set(l);return c.add(s),c})}function me(r){Qe(s=>{if(!s.has(r))return s;const l=new Set(s);return l.delete(r),l})}Ve(()=>{if(!e(W)||!$t)return;if(e(te)||a(te,_(),!0),e(d).length===0&&e(f).length===0&&e(y).length===0&&e(T).length===0&&e(ee).length===0&&e(Oe).size===0){try{localStorage.removeItem(g)}catch(l){console.warn("Failed to clear queued changes from storage",l)}a(Z,null);return}const s={languagesToAdd:e(d),languagesToEdit:e(f),relationships:e(y),newReferences:e(T),newSeparatingFunctions:e(L),customTags:e(ee),modifiedRelations:Array.from(e(Oe)),submissionId:e(te),supersedesSubmissionId:e(Z)??null};try{localStorage.setItem(g,JSON.stringify(s))}catch(l){console.warn("Failed to persist queued changes",l)}}),Ve(()=>{if(!e(W)||!$t)return;const r={email:e(G),github:e(Q),note:e(E)};try{localStorage.setItem(m,JSON.stringify(r))}catch(s){console.warn("Failed to persist contributor info",s)}});function Le(r){return a(d,[...e(d),r],!0),{success:!0}}function ke(r){const s=e(f).findIndex(l=>l.name===r.name);return s>=0?(e(f)[s]=r,a(f,[...e(f)],!0)):a(f,[...e(f),r],!0),{success:!0}}function ze(r){a(T,[...e(T),r],!0)}function Pe(r){a(L,[...e(L),r],!0)}function ot(r){a(ye,r,!0),a(Y,!0)}function Be(r){e(ye)!==null&&(e(L)[e(ye)]=r,a(L,[...e(L)],!0),a(ye,null))}let De=k(null);function $e(r){a(De,{languages:e(d).slice(r+1),editedLanguages:e(f).slice(r+1),references:e(T).slice(r+1),separatingFunctions:[],relationships:e(y).filter((s,l)=>l>r),tags:e(ee).slice(r+1)},!0),a(d,e(d).slice(0,r+1),!0),a(f,e(f).slice(0,r+1),!0),a(T,e(T).slice(0,r+1),!0),a(y,e(y).slice(0,r+1),!0),a(ee,e(ee).slice(0,r+1),!0),a(ne,r,!0),a(ce,!0)}function Ge(r){e(ne)!==null&&(e(T)[e(ne)]=r,a(T,[...e(T)],!0),e(De)&&(a(d,[...e(d),...e(De).languages],!0),a(f,[...e(f),...e(De).editedLanguages],!0),a(T,[...e(T),...e(De).references],!0),a(y,[...e(y),...e(De).relationships],!0),a(ee,[...e(ee),...e(De).tags],!0)),a(ne,null),a(De,null))}function lt(r){a(Fe,r,!0),a(ie,!0)}function st(r){return e(Fe)!==null&&(e(d)[e(Fe)]=r,a(d,[...e(d)],!0),a(Fe,null)),{success:!0}}function _e(r){a(Ae,r,!0),a(xe,!0)}function Re(r){return e(Ae)!==null&&(e(f)[e(Ae)]=r,a(f,[...e(f)],!0),a(Ae,null)),{success:!0}}function Se(r){a(Ie,r,!0),a(oe,!0)}function Me(r){e(Ie)!==null&&(e(y)[e(Ie)]=r,a(y,[...e(y)],!0),Ee(r),a(Ie,null))}function we(r){if(e(Ie)!==null){Me(r);return}const s=tt(r.sourceId,r.targetId),l=e(y).findIndex(c=>tt(c.sourceId,c.targetId)===s);l>=0?(e(y)[l]=r,a(y,[...e(y)],!0)):a(y,[...e(y),r],!0),Ee(r)}function dt(r){const s=new Set(t.data.existingReferences.map(c=>c.id));for(let c=0;c<r;c++){const U=ea(e(T)[c],s);s.add(U)}const l=ea(e(T)[r],s);a(T,e(T).filter((c,U)=>U!==r),!0),e(d).forEach(c=>{c.descriptionRefs=c.descriptionRefs.filter(U=>U!==l)}),e(f).forEach(c=>{c.descriptionRefs=c.descriptionRefs.filter(U=>U!==l)}),e(y).forEach(c=>{c.refs=c.refs.filter(U=>U!==l),c.separatingFunctions?.forEach(U=>{U.refs=U.refs.filter(Ne=>Ne!==l)})}),e(ee).forEach(c=>{c.refs=c.refs.filter(U=>U!==l)}),e(L).forEach(c=>{c.refs=c.refs.filter(U=>U!==l)}),a(d,[...e(d)],!0),a(f,[...e(f)],!0),a(y,[...e(y)],!0),a(ee,[...e(ee)],!0),a(L,[...e(L)],!0)}function ut(r){const l=e(L)[r].shortName;a(L,e(L).filter((c,U)=>U!==r),!0),e(y).forEach(c=>{c.separatingFunctionIds&&(c.separatingFunctionIds=c.separatingFunctionIds.filter(U=>U!==l))}),a(y,[...e(y)],!0)}function ua(r){const s=r.payload;a(d,s.languagesToAdd.map(I),!0),a(f,s.languagesToEdit.map(I),!0),a(y,s.relationships.map(q),!0),a(T,[...s.newReferences],!0),a(ee,s.customTags.map(be),!0),a(Oe,new Set(s.modifiedRelations),!0),a(G,s.contributor.email,!0),a(Q,s.contributor.github,!0),a(E,s.contributor.note,!0),a(Z,s.submissionId,!0),a(te,_(),!0),a(ge,Lt(),!0),a(z,!1),a(ne,null),a(De,null),a(Fe,null),a(Ae,null),a(Ie,null),a(j,null),a(K,null),a(J,null),a(re,null)}function ca(r){r.preventDefault(),window.location.href="/"}var Mt=Vn();Xa(r=>{Ja.title="Contribute - Knowledge Compilation Map"});var ht=qe(Mt),jt=i(ht),Ct=o(i(jt),2),zt=o(i(Ct),2),wt=i(zt),Et=i(wt),kt=o(i(Et),2),Rt=i(kt),Pt=o(i(Rt),2);Ze(Pt),n(Rt);var Bt=o(Rt,2),Ut=o(i(Bt),2);Ze(Ut),n(Bt),n(kt);var qt=o(kt,2),Qt=o(i(qt),2);bt(Qt),at(2),n(qt),n(Et);var St=o(Et,2),Vt=i(St);{var ga=r=>{var s=Dn(),l=o(i(s),2);l.__click=[An,Z],n(s),b(r,s)};P(Vt,r=>{e(Z)&&r(ga)})}var Tt=o(Vt,2);Tt.__click=[sa,z,ge];var va=o(i(Tt),2);n(Tt),n(St);var Ht=o(St,2);{var fa=r=>{var s=Cn(),l=i(s),c=o(i(l),2);c.__click=[sa,z,ge],n(l);var U=o(l,2);{var Ne=$=>{var ve=In();b($,ve)},Je=$=>{var ve=jn();le(ve,21,()=>e(ge),se,(mt,Ye)=>{const ct=B(()=>X(e(Ye))),et=B(()=>pe(e(Ye).createdAt));var gt=Mn(),vt=i(gt),Ft=i(vt),At=i(Ft),_a=i(At,!0);n(At);var Dt=o(At,2),pa=i(Dt,!0);n(Dt);var ya=o(Dt,2);{var ha=nt=>{var xt=On();b(nt,xt)},wa=nt=>{var xt=He(),ka=qe(xt);{var Ra=It=>{var Sa=Nn();b(It,Sa)};P(ka,It=>{e(Ye).payload.submissionId===e(Z)&&It(Ra)},!0)}b(nt,xt)};P(ya,nt=>{e(Ye).supersededBySubmissionId?nt(ha):nt(wa,!1)})}n(Ft);var Ea=o(Ft,2);Ea.__click=[Ln,ua,Ye],n(vt),n(gt),M(()=>{F(_a,e(et)),F(pa,e(ct))}),b(mt,gt)}),n(ve),b($,ve)};P(U,$=>{e(ge).length===0?$(Ne):$(Je,!1)})}n(s),b(r,s)};P(Ht,r=>{e(z)&&r(fa)})}var Kt=o(Ht,2);kn(Kt,{get languagesToAdd(){return e(d)},get languagesToEdit(){return e(f)},get newReferences(){return e(T)},get newSeparatingFunctions(){return e(L)},get relationships(){return e(y)},get modifiedRelations(){return e(Oe)},get expandedLanguageToAddIndex(){return e(j)},get expandedLanguageToEditIndex(){return e(K)},get expandedReferenceIndex(){return e(re)},get expandedSeparatingFunctionIndex(){return e(de)},get expandedRelationshipIndex(){return e(J)},onToggleExpandLanguageToAdd:r=>a(j,e(j)===r?null:r,!0),onToggleExpandLanguageToEdit:r=>a(K,e(K)===r?null:r,!0),onToggleExpandReference:r=>a(re,e(re)===r?null:r,!0),onToggleExpandSeparatingFunction:r=>a(de,e(de)===r?null:r,!0),onToggleExpandRelationship:r=>a(J,e(J)===r?null:r,!0),onEditLanguageToAdd:lt,onEditLanguageToEdit:_e,onDeleteLanguageToAdd:r=>a(d,e(d).filter((s,l)=>l!==r),!0),onDeleteLanguageToEdit:r=>a(f,e(f).filter((s,l)=>l!==r),!0),onEditReference:$e,onDeleteReference:dt,onEditSeparatingFunction:ot,onDeleteSeparatingFunction:ut,onEditRelationship:Se,onDeleteRelationship:(r,s)=>{a(y,e(y).filter((l,c)=>c!==r),!0),me(s)}});var Xt=o(Kt,2);Sn(Xt,{onAddLanguage:()=>a(ie,!0),onEditLanguage:()=>a(ae,!0),onManageRelationships:()=>a(oe,!0),onAddReference:()=>a(ce,!0),onAddSeparatingFunction:()=>a(Y,!0)});var ba=o(Xt,2);{let r=B(()=>!e(C));Fn(ba,{get disabled(){return e(r)}})}n(wt),n(zt),n(Ct),n(jt),n(ht);var Gt=o(ht,2);{let r=B(()=>e(Fe)!==null?st:Le),s=B(()=>e(Fe)!==null),l=B(()=>e(Fe)!==null?e(d)[e(Fe)]:void 0),c=B(()=>Object.values(t.data.queries).map(ve=>({code:ve.code,name:ve.label}))),U=B(()=>Object.values(t.data.transformations).map(ve=>({code:ve.code,name:ve.label}))),Ne=B(()=>O.map(ve=>({value:ve.code,label:ve.label,description:ve.description||""}))),Je=B(()=>[...t.data.existingTags,...e(ee)].map(ve=>({label:ve.label,color:ve.color||"#6366f1",description:"",refs:[]}))),$=B(()=>pt(t.data.existingReferences,e(T)));ra(Gt,{onClose:()=>{a(ie,!1),a(Fe,null)},get onAdd(){return e(r)},get isEdit(){return e(s)},get initialData(){return e(l)},get queries(){return e(c)},get transformations(){return e(U)},get polytimeOptions(){return e(Ne)},get existingTags(){return e(Je)},get availableRefs(){return e($)},get isOpen(){return e(ie)},set isOpen(ve){a(ie,ve,!0)}})}var Jt=o(Gt,2);{let r=B(()=>e(Ae)!==null?Re:ke),s=B(()=>e(Ae)!==null?e(f)[e(Ae)]:e(ue)?Ma(t.data.languages.find($=>$.name===e(ue))):void 0),l=B(()=>Object.values(t.data.queries).map($=>({code:$.code,name:$.label}))),c=B(()=>Object.values(t.data.transformations).map($=>({code:$.code,name:$.label}))),U=B(()=>O.map($=>({value:$.code,label:$.label,description:$.description||""}))),Ne=B(()=>[...t.data.existingTags,...e(ee)].map($=>({label:$.label,color:$.color||"#6366f1",description:"",refs:[]}))),Je=B(()=>pt(t.data.existingReferences,e(T)));ra(Jt,{onClose:()=>{a(xe,!1),a(ue,""),a(Ae,null)},get onAdd(){return e(r)},isEdit:!0,get initialData(){return e(s)},get queries(){return e(l)},get transformations(){return e(c)},get polytimeOptions(){return e(U)},get existingTags(){return e(Ne)},get availableRefs(){return e(Je)},get isOpen(){return e(xe)},set isOpen($){a(xe,$,!0)}})}var Yt=o(Jt,2);{var ma=r=>{var s=Qn();s.__click=[zn,ae];var l=i(s);l.__click=[Pn];var c=o(i(l),2),U=o(i(c),2),Ne=i(U);Ne.value=Ne.__value="";var Je=o(Ne);le(Je,17,()=>t.data.languages,se,(Ye,ct)=>{var et=Bn(),gt=i(et,!0);n(et);var vt={};M(()=>{F(gt,e(ct).name),vt!==(vt=e(ct).name)&&(et.value=(et.__value=e(ct).name)??"")}),b(Ye,et)}),n(U);var $=o(U,2),ve=i($);ve.__click=[Un,ue,ae];var mt=o(ve,2);mt.__click=[qn,ue,ae,xe],n($),n(c),n(l),n(s),M(()=>mt.disabled=!e(ue)),it(U,()=>e(ue),Ye=>a(ue,Ye)),b(r,s)};P(Yt,r=>{e(ae)&&r(ma)})}var Wt=o(Yt,2);{let r=B(()=>e(ne)!==null?Ge:ze),s=B(()=>e(ne)!==null?e(T)[e(ne)]:""),l=B(()=>e(ne)!==null);kr(Wt,{onClose:()=>{a(ce,!1),a(ne,null),a(De,null)},get onAdd(){return e(r)},get initialValue(){return e(s)},get isEditMode(){return e(l)},get isOpen(){return e(ce)},set isOpen(c){a(ce,c,!0)}})}var Zt=o(Wt,2);{let r=B(()=>e(ye)!==null?Be:Pe),s=B(()=>e(ye)!==null?e(L)[e(ye)]:void 0),l=B(()=>pt(t.data.existingReferences,e(T))),c=B(()=>e(ye)!==null);Ir(Zt,{onClose:()=>{a(Y,!1),a(ye,null)},get onAdd(){return e(r)},get initialValue(){return e(s)},get availableRefs(){return e(l)},get isEditMode(){return e(c)},get isOpen(){return e(Y)},set isOpen(U){a(Y,U,!0)}})}var xa=o(Zt,2);{let r=B(()=>e(Ie)!==null?e(y)[e(Ie)]:void 0),s=B(()=>Ca(t.data.languages,e(d),e(f))),l=B(()=>pt(t.data.existingReferences,e(T))),c=B(()=>ja(t.data.existingSeparatingFunctions,e(L)));Kr(xa,{onClose:()=>{a(oe,!1),a(Ie,null)},onSave:we,get initialData(){return e(r)},get languages(){return e(s)},get statusOptions(){return H},get availableRefs(){return e(l)},get availableSeparatingFunctions(){return e(c)},get baselineRelations(){return V},get isOpen(){return e(oe)},set isOpen(U){a(oe,U,!0)}})}M(()=>Ce(va,0,`h-3 w-3 transition-transform ${e(z)?"rotate-180":""}`)),Ga("submit",wt,ca),je(Pt,()=>e(G),r=>a(G,r)),je(Ut,()=>e(Q),r=>a(Q,r)),je(Qt,()=>e(E),r=>a(E,r)),b(u,Mt),Xe()}rt(["click"]);export{Zn as component,Wn as universal};
