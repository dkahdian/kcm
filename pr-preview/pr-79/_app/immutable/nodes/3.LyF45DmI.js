import{d as za,a as At,b as Ba,r as Va,c as Ha,C as Ka,T as Ga,Q as Xa,e as le,i as se,g as Mt,f as Ct,M as We,h as Ot,j as ra,k as na,s as ia,l as Ja,m as oa,v as la,n as jt,o as Wa}from"../chunks/g8jzJzrz.js";import"../chunks/DsnmJJEf.js";import{s as O,o as Ya}from"../chunks/BVtKIfkr.js";import{a$ as Za,aT as $a,u as er,r as tr,h as ar,k as ft,be as rr,ba as rt,K as Ke,X as k,y as Se,a4 as Qe,z as r,v as e,Z as He,_ as Ve,Q as m,R as Ge,M as h,V as i,Y as n,al as at,T as o,bf as bt,O as j,aW as M,aX as nr,a0 as ir,bg as sa,N as or,bh as lr,$ as sr}from"../chunks/B_N74zmh.js";import{p as ce,i as U}from"../chunks/B1J5pDa2.js";import{r as Ye,s as Be,b as ot,a as Ue,c as dr}from"../chunks/CxGUFWFB.js";function Pe(s,t,d=t){var v=new WeakSet;Za(s,"input",async g=>{var c=g?s.defaultValue:s.value;if(c=Nt(s)?Lt(c):c,d(c),ft!==null&&v.add(ft),await $a(),c!==(c=t())){var f=s.selectionStart,x=s.selectionEnd;s.value=c??"",x!==null&&(s.selectionStart=f,s.selectionEnd=Math.min(x,s.value.length))}}),(ar&&s.defaultValue!==s.value||er(t)==null&&s.value)&&(d(Nt(s)?Lt(s.value):s.value),ft!==null&&v.add(ft)),tr(()=>{var g=t();if(s===document.activeElement){var c=rr??ft;if(v.has(c))return}Nt(s)&&g===Lt(s.value)||s.type==="date"&&!g&&!s.value||g!==s.value&&(s.value=g??"")})}function Nt(s){var t=s.type;return t==="number"||t==="range"}function Lt(s){return s===""?null:+s}const ma={},ur=za.separatingFunctions;for(const s of ur)ma[s.shortName]=s;const cr=Object.values(ma),gr=()=>{const s=At.map(c=>c.name),t=Ba.map(c=>({id:c.id,title:c.title})),d=new Map;for(const c of At)if(c.tags)for(const f of c.tags)d.has(f.label)||d.set(f.label,{label:f.label,color:f.color});const v=Array.from(d.values()),g=cr.map(c=>({shortName:c.shortName,name:c.name,description:c.description}));return{existingLanguageIds:s,existingReferences:t,existingSeparatingFunctions:g,existingTags:v,languages:At,queries:Xa,transformations:Ga,complexityOptions:Ka,adjacencyMatrix:Ha,relationTypes:Va}},vr=!1,gi=Object.freeze(Object.defineProperty({__proto__:null,load:gr,prerender:vr},Symbol.toStringTag,{value:"Module"}));async function fr(s,t,d,v,g,c,f,x,b,w,T,D){if(!e(t).trim()||!e(d).trim()||!e(v).trim()){r(g,"Please fill out all required fields.");return}try{const E=await c.onAdd({name:e(t).trim(),fullName:e(d).trim(),description:e(v).trim(),descriptionRefs:e(f),queries:e(x),transformations:e(b),tags:e(w),existingReferences:e(T)}),I=E&&typeof E=="object"&&"success"in E?E:void 0;if(I&&!I.success){r(g,I.error??"Unable to add language. Please review your input.",!0);return}r(g,null),D(),c.onClose?.()}catch(E){r(g,E instanceof Error?E.message:"Unexpected error while adding the language.",!0)}}function da(s,t,d){t(),d.onClose()}var br=s=>s.stopPropagation(),mr=h('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),xr=(s,t,d)=>t(e(d)),pr=h('<button type="button"> </button>'),_r=h('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),yr=h("<option> </option>"),hr=(s,t,d,v)=>t(e(d).code,e(v)),wr=h('<button type="button"> </button>'),Er=h('<div class="mt-2 flex flex-wrap gap-1"></div>'),kr=h('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Rr=h("<option> </option>"),Sr=(s,t,d,v)=>t(e(d).code,e(v)),Tr=h('<button type="button"> </button>'),Ir=h('<div class="mt-2 flex flex-wrap gap-1"></div>'),Fr=h('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Dr=(s,t,d)=>t(e(d)),Ar=h('<button type="button"> </button>'),Or=h('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),Nr=h(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function ua(s,t){Ke(t,!0);let d=ce(t,"isOpen",11,!1),v=ce(t,"availableRefs",19,()=>[]),g=ce(t,"isEdit",3,!1),c=k(""),f=k(""),x=k(""),b=k(Se([])),w=k(Se({})),T=k(Se({})),D=k(Se([])),E=k(Se([])),I=k(null);Qe(()=>{g()&&t.initialData&&(r(c,t.initialData.name,!0),r(f,t.initialData.fullName,!0),r(x,t.initialData.description,!0),r(b,[...t.initialData.descriptionRefs],!0),r(w,{...t.initialData.queries},!0),r(T,{...t.initialData.transformations},!0),r(D,[...t.initialData.tags],!0),r(E,[...t.initialData.existingReferences],!0),r(I,null))});function R(){r(c,""),r(f,""),r(x,""),r(b,[],!0),r(w,{},!0),r(T,{},!0),r(D,[],!0),r(E,[],!0),r(N,!1),r(V,!1),r(I,null)}function Q(_){e(b).includes(_)?r(b,e(b).filter(u=>u!==_),!0):r(b,[...e(b),_],!0)}function re(_){e(D).some(u=>u.label===_.label)?r(D,e(D).filter(u=>u.label!==_.label),!0):r(D,[...e(D),_],!0)}function me(_,u){if(!e(w)[_])return;const y=e(w)[_].refs;y.includes(u)?e(w)[_].refs=y.filter(q=>q!==u):e(w)[_].refs=[...y,u],r(w,{...e(w)},!0)}function G(_,u){if(!e(T)[_])return;const y=e(T)[_].refs;y.includes(u)?e(T)[_].refs=y.filter(q=>q!==u):e(T)[_].refs=[...y,u],r(T,{...e(T)},!0)}let N=k(!1),V=k(!1);Qe(()=>{if(t.queries.length>0&&!e(N)){const _={};t.queries.forEach(u=>{if(g()&&t.initialData&&t.initialData.queries[u.code]){const y=t.initialData.queries[u.code];_[u.code]={complexity:y.complexity,note:y.note||"",refs:[...y.refs]}}else _[u.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(w,_,!0),r(N,!0)}}),Qe(()=>{if(t.transformations.length>0&&!e(V)){const _={};t.transformations.forEach(u=>{if(g()&&t.initialData){let y=t.initialData.transformations[u.code];if(!y){const q=Object.keys(t.initialData.transformations).find(L=>t.initialData.transformations[L]!==void 0&&(L===u.code||u.code==="‚àßC"&&L==="AND_C"||u.code==="‚àßBC"&&L==="AND_BC"||u.code==="‚à®C"&&L==="OR_C"||u.code==="‚à®BC"&&L==="OR_BC"||u.code==="¬¨C"&&L==="NOT_C"));q&&(y=t.initialData.transformations[q])}_[u.code]=y?{complexity:y.complexity,note:y.note||"",refs:[...y.refs]}:{complexity:"unknown-to-us",note:"",refs:[]}}else _[u.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(T,_,!0),r(V,!0)}});var Z=He(),ee=Ve(Z);{var H=_=>{var u=Nr();u.__click=[da,R,t];var y=i(u);y.__click=[br];var q=i(y),L=i(q),X=i(L);n(L),at(2),n(q);var K=o(q,2),de=i(K);{var ge=P=>{var C=mr(),Ie=i(C,!0);n(C),j(()=>O(Ie,e(I))),m(P,C)};U(de,P=>{e(I)&&P(ge)})}var xe=o(de,2),ye=o(i(xe),2),te=i(ye),Re=o(i(te),2);Ye(Re),n(te);var ve=o(te,2),$=o(i(ve),2);Ye($),n(ve),n(ye);var ie=o(ye,2),pe=o(i(ie),2);bt(pe),n(ie);var fe=o(ie,2);{var Le=P=>{var C=_r(),Ie=o(i(C),2);le(Ie,21,v,se,(we,oe)=>{var ae=pr();ae.__click=[xr,Q,oe];var Fe=i(ae,!0);n(ae),j(Ee=>{Ue(ae,1,Ee),O(Fe,e(oe))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(b).includes(e(oe))?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),m(we,ae)}),n(Ie),n(C),m(P,C)};U(fe,P=>{v().length>0&&P(Le)})}n(xe);var Te=o(xe,2),Me=o(i(Te),2);le(Me,21,()=>t.queries,se,(P,C)=>{var Ie=He(),we=Ve(Ie);{var oe=ae=>{var Fe=kr(),Ee=i(Fe),Ce=i(Ee),je=i(Ce),nt=i(je,!0);n(je);var ze=o(je,2);le(ze,21,()=>t.complexityOptions,se,(be,De)=>{var Ae=yr(),qe=i(Ae,!0);n(Ae);var ke={};j(()=>{O(qe,e(De).label),ke!==(ke=e(De).value)&&(Ae.value=(Ae.__value=e(De).value)??"")}),m(be,Ae)}),n(ze),n(Ce);var $e=o(Ce,2),et=i($e),Xe=o(et,2);Ye(Xe),n($e),n(Ee);var lt=o(Ee,2);{var st=be=>{var De=Er();le(De,21,v,se,(Ae,qe)=>{var ke=wr();ke.__click=[hr,me,C,qe];var dt=i(ke,!0);n(ke),j(ut=>{Ue(ke,1,ut),O(dt,e(qe))},[()=>`px-2 py-0.5 text-xs rounded ${e(w)[e(C).code].refs.includes(e(qe))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),m(Ae,ke)}),n(De),m(be,De)};U(lt,be=>{v().length>0&&be(st)})}n(Fe),j(()=>{Be(je,"for",`query-${e(C).code??""}-complexity`),O(nt,e(C).name),Be(ze,"id",`query-${e(C).code??""}-complexity`),Be(et,"for",`query-${e(C).code??""}-note`),Be(Xe,"id",`query-${e(C).code??""}-note`)}),ot(ze,()=>e(w)[e(C).code].complexity,be=>e(w)[e(C).code].complexity=be),Pe(Xe,()=>e(w)[e(C).code].note,be=>e(w)[e(C).code].note=be),m(ae,Fe)};U(we,ae=>{e(w)[e(C).code]&&ae(oe)})}m(P,Ie)}),n(Me),n(Te);var Ne=o(Te,2),z=o(i(Ne),2);le(z,21,()=>t.transformations,se,(P,C)=>{var Ie=He(),we=Ve(Ie);{var oe=ae=>{var Fe=Fr(),Ee=i(Fe),Ce=i(Ee),je=i(Ce),nt=i(je,!0);n(je);var ze=o(je,2);le(ze,21,()=>t.complexityOptions,se,(be,De)=>{var Ae=Rr(),qe=i(Ae,!0);n(Ae);var ke={};j(()=>{O(qe,e(De).label),ke!==(ke=e(De).value)&&(Ae.value=(Ae.__value=e(De).value)??"")}),m(be,Ae)}),n(ze),n(Ce);var $e=o(Ce,2),et=i($e),Xe=o(et,2);Ye(Xe),n($e),n(Ee);var lt=o(Ee,2);{var st=be=>{var De=Ir();le(De,21,v,se,(Ae,qe)=>{var ke=Tr();ke.__click=[Sr,G,C,qe];var dt=i(ke,!0);n(ke),j(ut=>{Ue(ke,1,ut),O(dt,e(qe))},[()=>`px-2 py-0.5 text-xs rounded ${e(T)[e(C).code].refs.includes(e(qe))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),m(Ae,ke)}),n(De),m(be,De)};U(lt,be=>{v().length>0&&be(st)})}n(Fe),j(()=>{Be(je,"for",`transform-${e(C).code??""}-complexity`),O(nt,e(C).name),Be(ze,"id",`transform-${e(C).code??""}-complexity`),Be(et,"for",`transform-${e(C).code??""}-note`),Be(Xe,"id",`transform-${e(C).code??""}-note`)}),ot(ze,()=>e(T)[e(C).code].complexity,be=>e(T)[e(C).code].complexity=be),Pe(Xe,()=>e(T)[e(C).code].note,be=>e(T)[e(C).code].note=be),m(ae,Fe)};U(we,ae=>{e(T)[e(C).code]&&ae(oe)})}m(P,Ie)}),n(z),n(Ne);var W=o(Ne,2);{var B=P=>{var C=Or(),Ie=o(i(C),2);le(Ie,21,()=>t.existingTags,se,(we,oe)=>{var ae=Ar();ae.__click=[Dr,re,oe];var Fe=i(ae,!0);n(ae),j((Ee,Ce)=>{Ue(ae,1,Ee),dr(ae,`background-color: ${e(oe).color??""}; color: white; ${Ce??""}`),O(Fe,e(oe).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(D).some(Ee=>Ee.label===e(oe).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(D).some(Ee=>Ee.label===e(oe).label)?`ring-color: ${e(oe).color};`:""]),m(we,ae)}),n(Ie),n(C),m(P,C)};U(W,P=>{t.existingTags.length>0&&P(B)})}var _e=o(W,2),Y=i(_e);Y.__click=[da,R,t];var ne=o(Y,2);ne.__click=[fr,c,f,x,I,t,b,w,T,D,E,R];var he=i(ne);n(ne),n(_e),n(K),n(y),n(u),j(P=>{O(X,`${g()?"Edit":"Add New"} Language`),ne.disabled=P,O(he,`${g()?"Update":"Add"} Language`)},[()=>!e(c).trim()||!e(f).trim()||!e(x).trim()]),Pe(Re,()=>e(c),P=>r(c,P)),Pe($,()=>e(f),P=>r(f,P)),Pe(pe,()=>e(x),P=>r(x,P)),m(_,u)};U(ee,_=>{d()&&_(H)})}m(s,Z),Ge()}rt(["click"]);function Lr(s,t,d,v){e(t).trim()&&(d.onAdd(e(t).trim()),r(t,""),v(!1))}function ca(s,t,d,v){t()||r(d,""),v.onClose()}var Mr=s=>s.stopPropagation(),Cr=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function jr(s,t){Ke(t,!0);let d=ce(t,"isOpen",15,!1),v=ce(t,"initialValue",3,""),g=ce(t,"isEditMode",3,!1),c=k(Se(v()));Qe(()=>{d()&&v()&&r(c,v())});const f=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var x=He(),b=Ve(x);{var w=T=>{var D=Cr();D.__click=[ca,g,c,t];var E=i(D);E.__click=[Mr];var I=i(E),R=i(I),Q=i(R,!0);n(R);var re=o(R,2),me=i(re,!0);n(re),n(I);var G=o(I,2),N=i(G),V=o(i(N),2);bt(V),Be(V,"placeholder",f),at(2),n(N);var Z=o(N,2),ee=i(Z);ee.__click=[ca,g,c,t];var H=o(ee,2);H.__click=[Lr,c,t,d];var _=i(H,!0);n(H),n(Z),n(G),n(E),n(D),j(u=>{O(Q,g()?"Edit Reference":"Add New Reference"),O(me,g()?"Update BibTeX citation":"Paste BibTeX citation"),H.disabled=u,O(_,g()?"Update Reference":"Add Reference")},[()=>!e(c).trim()]),Pe(V,()=>e(c),u=>r(c,u)),m(T,D)};U(b,T=>{d()&&T(w)})}m(s,x),Ge()}rt(["click"]);function qr(s,t,d,v,g,c,f,x,b){!e(t).trim()||!e(d).trim()||(v.onAdd({shortName:e(t).trim(),name:e(d).trim(),description:e(g).trim(),refs:e(c)}),f()||x(),b(!1))}function ga(s,t,d,v){t()||d(),v.onClose()}var Pr=s=>s.stopPropagation(),Qr=(s,t,d)=>t(e(d)),Ur=h('<button type="button"> </button>'),zr=h('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Br=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-orange-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="sf-shortName" class="block text-sm font-medium text-gray-700 mb-2">Short Name <span class="text-red-500">*</span></label> <input id="sf-shortName" type="text" placeholder="e.g., Clique" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Brief label displayed on edges (e.g., "Clique", "PI")</p></div> <div><label for="sf-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name <span class="text-red-500">*</span></label> <input id="sf-name" type="text" placeholder="e.g., Clique Detection Instances" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Full human-readable name</p></div> <div><label for="sf-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="sf-description" rows="3" placeholder="Describe what this function separates..." class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-y"></textarea></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Vr(s,t){Ke(t,!0);let d=ce(t,"isOpen",15,!1),v=ce(t,"availableRefs",19,()=>[]),g=ce(t,"isEditMode",3,!1),c=k(""),f=k(""),x=k(""),b=k(Se([]));Qe(()=>{d()&&t.initialValue&&(r(c,t.initialValue.shortName,!0),r(f,t.initialValue.name,!0),r(x,t.initialValue.description,!0),r(b,[...t.initialValue.refs],!0))});function w(){r(c,""),r(f,""),r(x,""),r(b,[],!0)}function T(R){e(b).includes(R)?r(b,e(b).filter(Q=>Q!==R),!0):r(b,[...e(b),R],!0)}var D=He(),E=Ve(D);{var I=R=>{var Q=Br();Q.__click=[ga,g,w,t];var re=i(Q);re.__click=[Pr];var me=i(re),G=i(me),N=i(G,!0);n(G);var V=o(G,2),Z=i(V,!0);n(V),n(me);var ee=o(me,2),H=i(ee),_=o(i(H),2);Ye(_),at(2),n(H);var u=o(H,2),y=o(i(u),2);Ye(y),at(2),n(u);var q=o(u,2),L=o(i(q),2);bt(L),n(q);var X=o(q,2);{var K=te=>{var Re=zr(),ve=o(i(Re),2);le(ve,21,v,se,($,ie)=>{var pe=Ur();pe.__click=[Qr,T,ie];var fe=i(pe,!0);n(pe),j(Le=>{Ue(pe,1,Le),O(fe,e(ie))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(b).includes(e(ie))?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),m($,pe)}),n(ve),n(Re),m(te,Re)};U(X,te=>{v().length>0&&te(K)})}var de=o(X,2),ge=i(de);ge.__click=[ga,g,w,t];var xe=o(ge,2);xe.__click=[qr,c,f,t,x,b,g,w,d];var ye=i(xe,!0);n(xe),n(de),n(ee),n(re),n(Q),j(te=>{O(N,g()?"Edit Separating Function":"Add New Separating Function"),O(Z,g()?"Update separating function details":"Define a new separating function"),xe.disabled=te,O(ye,g()?"Update Function":"Add Function")},[()=>!e(c).trim()||!e(f).trim()]),Pe(_,()=>e(c),te=>r(c,te)),Pe(y,()=>e(f),te=>r(f,te)),Pe(L,()=>e(x),te=>r(x,te)),m(R,Q)};U(E,R=>{d()&&R(I)})}m(s,D),Ge()}rt(["click"]);function Hr(s,t,d,v,g,c,f,x,b,w){!e(t)||!e(d)||!e(v)||e(t)===e(d)||(g.onSave({sourceId:e(t),targetId:e(d),status:e(v),description:e(c)||void 0,refs:e(f),separatingFunctionIds:e(x).length>0?e(x):void 0}),b(),w(!1))}function va(s,t,d){t(),d.onClose()}var Kr=s=>s.stopPropagation(),Gr=h("<option> </option>"),Xr=h("<option> </option>"),Jr=h("<option> </option>"),Wr=h('<p class="text-xs text-gray-500 mt-1"> </p>'),Yr=(s,t,d)=>t(e(d)),Zr=h('<button type="button"> </button>'),$r=h('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),en=(s,t,d)=>t(e(d).shortName),tn=h('<button type="button"> </button>'),an=h('<p class="text-xs text-gray-500 mt-2"> </p>'),rn=h('<fieldset class="border-t pt-4"><legend class="block text-sm font-medium text-gray-700 mb-2">Separating Functions (optional)</legend> <div class="flex flex-wrap gap-2"></div> <!></fieldset>'),nn=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <!> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function on(s,t){Ke(t,!0);let d=ce(t,"isOpen",15,!1),v=ce(t,"availableRefs",19,()=>[]),g=ce(t,"availableSeparatingFunctions",19,()=>[]),c=ce(t,"baselineRelations",19,()=>new Map),f=k(""),x=k(""),b=k(""),w=k(""),T=k(Se([])),D=k(Se([]));Qe(()=>{d()&&t.initialData&&(r(f,t.initialData.sourceId,!0),r(x,t.initialData.targetId,!0),r(b,t.initialData.status,!0),r(w,t.initialData.description||"",!0),r(T,[...t.initialData.refs],!0),r(D,t.initialData.separatingFunctionIds?[...t.initialData.separatingFunctionIds]:[],!0))}),Qe(()=>{if(e(f)&&e(x)&&e(f)!==e(x)){const G=`${e(f)}->${e(x)}`,N=c().get(G);N&&(r(b,N.status,!0),r(T,[...N.refs],!0),r(D,N.separatingFunctionIds?[...N.separatingFunctionIds]:[],!0))}});function E(){r(f,""),r(x,""),r(b,""),r(w,""),r(T,[],!0),r(D,[],!0)}function I(G){e(T).includes(G)?r(T,e(T).filter(N=>N!==G),!0):r(T,[...e(T),G],!0)}function R(G){e(D).includes(G)?r(D,e(D).filter(N=>N!==G),!0):r(D,[...e(D),G],!0)}var Q=He(),re=Ve(Q);{var me=G=>{var N=nn();N.__click=[va,E,t];var V=i(N);V.__click=[Kr];var Z=o(i(V),2),ee=i(Z),H=i(ee),_=o(i(H),2),u=i(_);u.value=u.__value="";var y=o(u);le(y,17,()=>t.languages,se,(z,W)=>{var B=Gr(),_e=i(B,!0);n(B);var Y={};j(()=>{O(_e,e(W).name),Y!==(Y=e(W).id)&&(B.value=(B.__value=e(W).id)??"")}),m(z,B)}),n(_),n(H);var q=o(H,2),L=o(i(q),2),X=i(L);X.value=X.__value="";var K=o(X);le(K,17,()=>t.languages,se,(z,W)=>{var B=Xr(),_e=i(B,!0);n(B);var Y={};j(()=>{B.disabled=e(W).id===e(f),O(_e,e(W).name),Y!==(Y=e(W).id)&&(B.value=(B.__value=e(W).id)??"")}),m(z,B)}),n(L),n(q),n(ee);var de=o(ee,2),ge=o(i(de),2),xe=i(ge);xe.value=xe.__value="";var ye=o(xe);le(ye,17,()=>t.statusOptions,se,(z,W)=>{var B=Jr(),_e=i(B,!0);n(B);var Y={};j(()=>{O(_e,e(W).label),Y!==(Y=e(W).value)&&(B.value=(B.__value=e(W).value)??"")}),m(z,B)}),n(ge);var te=o(ge,2);{var Re=z=>{const W=M(()=>t.statusOptions.find(ne=>ne.value===e(b)));var B=He(),_e=Ve(B);{var Y=ne=>{var he=Wr(),P=i(he,!0);n(he),j(()=>O(P,e(W).description)),m(ne,he)};U(_e,ne=>{e(W)&&ne(Y)})}m(z,B)};U(te,z=>{e(b)&&z(Re)})}n(de);var ve=o(de,2),$=o(i(ve),2);bt($),n(ve);var ie=o(ve,2);{var pe=z=>{var W=$r(),B=o(i(W),2);le(B,21,v,se,(_e,Y)=>{var ne=Zr();ne.__click=[Yr,I,Y];var he=i(ne,!0);n(ne),j(P=>{Ue(ne,1,P),O(he,e(Y))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(T).includes(e(Y))?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),m(_e,ne)}),n(B),n(W),m(z,W)};U(ie,z=>{v().length>0&&z(pe)})}var fe=o(ie,2);{var Le=z=>{var W=rn(),B=o(i(W),2);le(B,21,g,se,(ne,he)=>{var P=tn();P.__click=[en,R,he];var C=i(P,!0);n(P),j(Ie=>{Ue(P,1,Ie),Be(P,"title",e(he).name),O(C,e(he).shortName)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(D).includes(e(he).shortName)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),m(ne,P)}),n(B);var _e=o(B,2);{var Y=ne=>{var he=an(),P=i(he);n(he),j(C=>O(P,`Selected: ${C??""}`),[()=>e(D).join(", ")]),m(ne,he)};U(_e,ne=>{e(D).length>0&&ne(Y)})}n(W),m(z,W)};U(fe,z=>{g().length>0&&z(Le)})}var Te=o(fe,2),Me=i(Te);Me.__click=[va,E,t];var Ne=o(Me,2);Ne.__click=[Hr,f,x,b,t,w,T,D,E,d],n(Te),n(Z),n(V),n(N),j(()=>Ne.disabled=!e(f)||!e(x)||!e(b)||e(f)===e(x)),ot(_,()=>e(f),z=>r(f,z)),ot(L,()=>e(x),z=>r(x,z)),ot(ge,()=>e(b),z=>r(b,z)),Pe($,()=>e(w),z=>r(w,z)),m(G,N)};U(re,G=>{d()&&G(me)})}m(s,Q),Ge()}rt(["click"]);function Ze(s,t){return`${s}->${t}`}function ln(s){const t=new Map,{languageIds:d,matrix:v}=s;for(let g=0;g<d.length;g++)for(let c=0;c<d.length;c++){const f=v[g][c];if(f){const x=d[g],b=d[c],w=f.separatingFunctionIds&&Array.isArray(f.separatingFunctionIds)?[...f.separatingFunctionIds]:void 0;t.set(Ze(x,b),{status:f.status,refs:f.refs?[...f.refs]:[],separatingFunctionIds:w})}}return t}function pt(s,t){const d=s.map(c=>c.id),v=new Set(d),g=t.map(c=>{const f=Mt(c,v);return v.add(f),f});return[...d,...g]}function sn(s,t,d){const v=s.map(f=>({id:f.id,name:f.name})),g=t.map(f=>({id:Ct(f.name),name:f.name})),c=d.map(f=>({id:Ct(f.name),name:f.name}));return[...v,...g,...c]}function dn(s){return{name:s.name,fullName:s.fullName||"",description:s.description||"",descriptionRefs:s.descriptionRefs||[],queries:s.properties?.queries||{},transformations:s.properties?.transformations||{},tags:(s.tags||[]).map(t=>({...t,color:t.color||"#6366f1"})),existingReferences:s.references?.map(t=>t.id)||[]}}function un(s,t){const d=s.map(g=>({shortName:g.shortName,name:g.name,description:g.description})),v=t.map(g=>({shortName:g.shortName,name:g.name,description:g.description}));return[...d,...v]}var cn=h('<span class="text-sm font-bold text-gray-900"> </span>'),gn=h('<span class="text-sm text-gray-600">( <!> )</span>'),vn=(s,t)=>t.onToggleExpand(t.index),fn=(s,t)=>t.onEdit(t.index),bn=(s,t)=>t.onDelete(t.index),mn=h("<div><!></div>"),xn=h('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function _t(s,t){Ke(t,!0);let d=ce(t,"colorScheme",3,"purple"),v=ce(t,"isExpanded",3,!1),g=ce(t,"renderMathTitle",3,!0),c=ce(t,"renderMathSubtitle",3,!0);const x={purple:{border:"border-purple-300",bg:"bg-purple-50",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300",divider:"border-purple-200"},orange:{border:"border-orange-300",bg:"bg-orange-50",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200 text-orange-800 border-orange-300",divider:"border-orange-200"},green:{border:"border-green-300",bg:"bg-green-50",text:"text-green-800",button:"bg-green-100 hover:bg-green-200 text-green-800 border-green-300",divider:"border-green-200"},yellow:{border:"border-yellow-300",bg:"bg-yellow-50",text:"text-yellow-800",button:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300",divider:"border-yellow-200"},blue:{border:"border-blue-300",bg:"bg-blue-50",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200 text-blue-800 border-blue-300",divider:"border-blue-200"}}[d()];var b=xn(),w=i(b),T=i(w),D=i(T),E=i(D);n(D);var I=o(D,2);{var R=u=>{We(u,{get text(){return t.title},className:"text-sm font-bold text-gray-900"})},Q=u=>{var y=cn(),q=i(y,!0);n(y),j(()=>O(q,t.title)),m(u,y)};U(I,u=>{g()?u(R):u(Q,!1)})}var re=o(I,2);{var me=u=>{var y=gn(),q=o(i(y));{var L=K=>{We(K,{get text(){return t.subtitle},className:"inline"})},X=K=>{var de=nr();j(()=>O(de,t.subtitle)),m(K,de)};U(q,K=>{c()?K(L):K(X,!1)})}at(),n(y),m(u,y)};U(re,u=>{t.subtitle&&u(me)})}n(T);var G=o(T,2),N=i(G);N.__click=[vn,t];var V=i(N,!0);n(N);var Z=o(N,2);Z.__click=[fn,t];var ee=o(Z,2);ee.__click=[bn,t],n(G),n(w);var H=o(w,2);{var _=u=>{var y=mn(),q=i(y);{var L=X=>{var K=He(),de=Ve(K);ir(de,()=>t.children),m(X,K)};U(q,X=>{t.children&&X(L)})}n(y),j(()=>Ue(y,1,`mt-4 pt-4 border-t ${x.divider??""}`)),m(u,y)};U(H,u=>{v()&&u(_)})}n(b),j(()=>{Ue(b,1,`border-2 ${x.border??""} ${x.bg??""} rounded-lg p-3`),Ue(D,1,`text-sm font-semibold ${x.text??""}`),O(E,`${t.type??""}:`),Ue(N,1,`px-2 py-1 text-xs ${x.button??""} rounded border`),Be(N,"aria-label",v()?"Collapse":"Expand"),O(V,v()?"Collapse":"Expand")}),m(s,b),Ge()}rt(["click"]);var pn=h('<div class="text-gray-500 text-xs"> </div>'),_n=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),yn=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),hn=h('<div class="text-gray-500 text-xs"> </div>'),wn=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),En=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),kn=h('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div></div>'),Rn=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),Sn=h('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <!></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <!></div> <!> <!> <!></div>');function fa(s,t){Ke(t,!0);let d=ce(t,"isExpanded",3,!1),v=ce(t,"isEdit",3,!1);const g=v()?"yellow":"green";{const c=x=>{var b=Sn(),w=i(b),T=o(i(w),2);We(T,{get text(){return t.language.fullName},className:"text-gray-900 block"}),n(w);var D=o(w,2),E=o(i(D),2);We(E,{get text(){return t.language.description},className:"text-gray-900 block"}),n(D);var I=o(D,2);{var R=N=>{var V=yn(),Z=i(V),ee=i(Z);n(Z);var H=o(Z,2);le(H,21,()=>Object.entries(t.language.queries),se,(_,u)=>{var y=M(()=>sa(e(u),2));let q=()=>e(y)[0],L=()=>e(y)[1];var X=_n(),K=i(X),de=i(K,!0);n(K);var ge=o(K,2),xe=i(ge,!0);n(ge);var ye=o(ge,2);{var te=$=>{We($,{get text(){return L().note},className:"text-gray-500 italic text-xs block"})};U(ye,$=>{L().note&&$(te)})}var Re=o(ye,2);{var ve=$=>{var ie=pn(),pe=i(ie);n(ie),j(fe=>O(pe,`Refs: [${fe??""}]`),[()=>L().refs.join(", ")]),m($,ie)};U(Re,$=>{L().refs.length>0&&$(ve)})}n(X),j(()=>{O(de,q()),O(xe,L().complexity)}),m(_,X)}),n(H),n(V),j(_=>O(ee,`Query Support (${_??""}):`),[()=>Object.keys(t.language.queries).length]),m(N,V)};U(I,N=>{t.language.queries&&Object.keys(t.language.queries).length>0&&N(R)})}var Q=o(I,2);{var re=N=>{var V=En(),Z=i(V),ee=i(Z);n(Z);var H=o(Z,2);le(H,21,()=>Object.entries(t.language.transformations),se,(_,u)=>{var y=M(()=>sa(e(u),2));let q=()=>e(y)[0],L=()=>e(y)[1];var X=wn(),K=i(X),de=i(K,!0);n(K);var ge=o(K,2),xe=i(ge,!0);n(ge);var ye=o(ge,2);{var te=$=>{We($,{get text(){return L().note},className:"text-gray-500 italic text-xs block"})};U(ye,$=>{L().note&&$(te)})}var Re=o(ye,2);{var ve=$=>{var ie=hn(),pe=i(ie);n(ie),j(fe=>O(pe,`Refs: [${fe??""}]`),[()=>L().refs.join(", ")]),m($,ie)};U(Re,$=>{L().refs.length>0&&$(ve)})}n(X),j(()=>{O(de,q()),O(xe,L().complexity)}),m(_,X)}),n(H),n(V),j(_=>O(ee,`Transformation Support (${_??""}):`),[()=>Object.keys(t.language.transformations).length]),m(N,V)};U(Q,N=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&N(re)})}var me=o(Q,2);{var G=N=>{var V=Rn(),Z=i(V),ee=i(Z);n(Z);var H=o(Z,2);le(H,21,()=>t.language.tags,se,(_,u)=>{var y=kn(),q=i(y),L=i(q,!0);n(q);var X=o(q,2),K=i(X,!0);n(X),n(y),j(()=>{O(L,e(u).label),O(K,e(u).description||"No description")}),m(_,y)}),n(H),n(V),j(()=>O(ee,`Tags (${t.language.tags.length??""}):`)),m(N,V)};U(me,N=>{t.language.tags.length>0&&N(G)})}n(b),m(x,b)};let f=M(()=>v()?"Edit Language":"New Language");_t(s,{get type(){return e(f)},get title(){return t.language.name},get subtitle(){return t.language.description},get colorScheme(){return g},get index(){return t.index},get isExpanded(){return d()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:c,$$slots:{default:!0}})}Ge()}var Tn=h('<pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto"> </pre>');function In(s,t){let d=ce(t,"isExpanded",3,!1);_t(s,{type:"Reference",get title(){return`new-${t.index??""}`},renderMathTitle:!1,renderMathSubtitle:!1,colorScheme:"purple",get index(){return t.index},get isExpanded(){return d()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:g=>{var c=Tn(),f=i(c,!0);n(c),j(()=>O(f,t.reference)),m(g,c)},$$slots:{default:!0}})}var Fn=h('<div><span class="text-xs font-semibold text-gray-700">Description:</span> <!></div>'),Dn=h('<div><span class="text-xs font-semibold text-gray-700">References:</span> <span class="text-xs text-gray-600 ml-2"> </span></div>'),An=h('<div class="space-y-2"><div><span class="text-xs font-semibold text-gray-700">Short Name:</span> <!></div> <div><span class="text-xs font-semibold text-gray-700">Full Name:</span> <!></div> <!> <!></div>');function On(s,t){Ke(t,!0),_t(s,{type:"SF",get title(){return t.separatingFunction.shortName},get subtitle(){return t.separatingFunction.name},colorScheme:"orange",get index(){return t.index},get isExpanded(){return t.isExpanded},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:v=>{var g=An(),c=i(g),f=o(i(c),2);We(f,{get text(){return t.separatingFunction.shortName},className:"text-xs text-gray-900 ml-2 inline"}),n(c);var x=o(c,2),b=o(i(x),2);We(b,{get text(){return t.separatingFunction.name},className:"text-xs text-gray-900 ml-2 inline"}),n(x);var w=o(x,2);{var T=I=>{var R=Fn(),Q=o(i(R),2);We(Q,{get text(){return t.separatingFunction.description},className:"text-xs text-gray-700 mt-1 block"}),n(R),m(I,R)};U(w,I=>{t.separatingFunction.description&&I(T)})}var D=o(w,2);{var E=I=>{var R=Dn(),Q=o(i(R),2),re=i(Q,!0);n(Q),n(R),j(me=>O(re,me),[()=>t.separatingFunction.refs.join(", ")]),m(I,R)};U(D,I=>{t.separatingFunction.refs&&t.separatingFunction.refs.length>0&&I(E)})}n(g),m(v,g)},$$slots:{default:!0}}),Ge()}var Nn=h('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="text-gray-600"> </div></div>'),Ln=h('<div><div class="font-semibold text-gray-700 mb-1">References:</div> <div class="text-gray-600"> </div></div>'),Mn=h('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Transformation Status:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!></div>');function Cn(s,t){Ke(t,!0);let d=ce(t,"isExpanded",3,!1),v=ce(t,"isModified",3,!1);const g=new Map(t.languages.map(E=>[E.id,E.name])),c=Ze(t.relationship.sourceId,t.relationship.targetId),f=g.get(t.relationship.sourceId)??t.relationship.sourceId,x=g.get(t.relationship.targetId)??t.relationship.targetId,b=`${f} ‚Üí ${x}`;var w=He(),T=Ve(w);{var D=E=>{_t(E,{type:"Relationship",get title(){return b},get subtitle(){return t.relationship.status},colorScheme:"blue",get index(){return t.index},get isExpanded(){return d()},get onToggleExpand(){return t.onToggleExpand},onEdit:()=>t.onEdit(t.index),onDelete:()=>t.onDelete(t.index,c),children:R=>{var Q=Mn(),re=i(Q),me=o(i(re),2),G=i(me),N=i(G,!0);n(G),n(me),n(re);var V=o(re,2);{var Z=_=>{var u=Nn(),y=i(u),q=i(y);n(y);var L=o(y,2),X=i(L,!0);n(L),n(u),j(K=>{O(q,`Separating Functions (${t.relationship.separatingFunctionIds.length??""}):`),O(X,K)},[()=>t.relationship.separatingFunctionIds.join(", ")]),m(_,u)};U(V,_=>{t.relationship.separatingFunctionIds&&t.relationship.separatingFunctionIds.length>0&&_(Z)})}var ee=o(V,2);{var H=_=>{var u=Ln(),y=o(i(u),2),q=i(y,!0);n(y),n(u),j(L=>O(q,L),[()=>t.relationship.refs.join(", ")]),m(_,u)};U(ee,_=>{t.relationship.refs&&t.relationship.refs.length>0&&_(H)})}n(Q),j(()=>O(N,t.relationship.status)),m(R,Q)},$$slots:{default:!0}})};U(T,E=>{v()&&E(D)})}m(s,w),Ge()}var jn=h('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),qn=h(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!> <!></div></div>`);function Pn(s,t){Ke(t,!0);const d=M(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.newSeparatingFunctions.length>0||t.relationships.filter(E=>t.modifiedRelations.has(Ze(E.sourceId,E.targetId))).length>0);var v=qn(),g=o(i(v),4),c=i(g);le(c,17,()=>t.newReferences,se,(E,I,R)=>{{let Q=M(()=>t.expandedReferenceIndex===R);In(E,{get reference(){return e(I)},index:R,get isExpanded(){return e(Q)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var f=o(c,2);le(f,17,()=>t.newSeparatingFunctions,se,(E,I,R)=>{{let Q=M(()=>t.expandedSeparatingFunctionIndex===R);On(E,{get separatingFunction(){return e(I)},index:R,get isExpanded(){return e(Q)},get onToggleExpand(){return t.onToggleExpandSeparatingFunction},get onEdit(){return t.onEditSeparatingFunction},get onDelete(){return t.onDeleteSeparatingFunction}})}});var x=o(f,2);le(x,17,()=>t.languagesToAdd,se,(E,I,R)=>{{let Q=M(()=>t.expandedLanguageToAddIndex===R);fa(E,{get language(){return e(I)},index:R,get isExpanded(){return e(Q)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var b=o(x,2);le(b,17,()=>t.languagesToEdit,se,(E,I,R)=>{{let Q=M(()=>t.expandedLanguageToEditIndex===R);fa(E,{get language(){return e(I)},index:R,get isExpanded(){return e(Q)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var w=o(b,2);le(w,17,()=>t.relationships,se,(E,I,R)=>{const Q=M(()=>t.modifiedRelations.has(Ze(e(I).sourceId,e(I).targetId)));{let re=M(()=>t.expandedRelationshipIndex===R);Cn(E,{get languages(){return t.languages},get relationship(){return e(I)},index:R,get isModified(){return e(Q)},get isExpanded(){return e(re)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var T=o(w,2);{var D=E=>{var I=jn();m(E,I)};U(T,E=>{e(d)||E(D)})}n(g),n(v),m(s,v),Ge()}var Qn=h('<div class="grid grid-cols-2 md:grid-cols-5 gap-3"><button type="button" class="px-3 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">New Language</button> <button type="button" class="px-3 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">Edit Language</button> <button type="button" class="px-3 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Relationship</button> <button type="button" class="px-3 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">Reference</button> <button type="button" class="px-3 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors">Separator</button></div>');function Un(s,t){var d=Qn(),v=i(d);v.__click=function(...b){t.onAddLanguage?.apply(this,b)};var g=o(v,2);g.__click=function(...b){t.onEditLanguage?.apply(this,b)};var c=o(g,2);c.__click=function(...b){t.onManageRelationships?.apply(this,b)};var f=o(c,2);f.__click=function(...b){t.onAddReference?.apply(this,b)};var x=o(f,2);x.__click=function(...b){t.onAddSeparatingFunction?.apply(this,b)},n(d),m(s,d)}rt(["click"]);var zn=h('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function Bn(s,t){let d=ce(t,"disabled",3,!1);var v=zn(),g=i(v);at(2),n(v),j(()=>g.disabled=d()),m(s,v)}function ba(s,t,d){const v=!e(t);r(t,v),v&&r(d,jt(),!0)}function Vn(s,t){r(t,null)}var Hn=h('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),Kn=h('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),Gn=h('<div class="text-xs font-medium text-amber-600">Superseded</div>'),Xn=h('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),Jn=(s,t,d)=>t(e(d)),Wn=h('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),Yn=h('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),Zn=h('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),$n=(s,t)=>r(t,!1),ei=s=>s.stopPropagation(),ti=h("<option> </option>"),ai=(s,t,d)=>{r(t,""),r(d,!1)},ri=(s,t,d,v)=>{e(t)&&(r(d,!1),r(v,!0))},ni=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),ii=h('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">üóÇÔ∏è</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!> <!>',1);function vi(s,t){Ke(t,!0);const d=a=>typeof a=="string",v=a=>Array.isArray(a)?a.filter(d):[],g=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():la(),c=a=>typeof a=="string"&&a.trim().length>0?a:null;function f(a){if(!Array.isArray(a))return[];const l=[];for(const p of a){if(!p||typeof p!="object")continue;const S=p;d(S.label)&&l.push({label:S.label,color:d(S.color)?S.color:"#6366f1",description:d(S.description)?S.description:void 0,refs:v(S.refs)})}return l}const x=a=>({...a,descriptionRefs:[...a.descriptionRefs],queries:Object.fromEntries(Object.entries(a.queries).map(([l,p])=>[l,{...p,refs:[...p.refs]}])),transformations:Object.fromEntries(Object.entries(a.transformations).map(([l,p])=>[l,{...p,refs:[...p.refs]}])),tags:a.tags.map(l=>({...l,refs:[...l.refs]})),existingReferences:[...a.existingReferences]}),b=a=>({...a,description:a.description,refs:[...a.refs],separatingFunctionIds:a.separatingFunctionIds?[...a.separatingFunctionIds]:void 0}),w=a=>({shortName:a.shortName,name:a.name,description:a.description,refs:[...a.refs]}),T=a=>{switch(a.kind){case"language:new":case"language:edit":return{...a,payload:x(a.payload)};case"relationship":return{...a,payload:b(a.payload)};case"separator":return{...a,payload:w(a.payload)};case"reference":default:return{...a,payload:a.payload}}};function D(a){if(!Array.isArray(a.queueEntries)||a.queueEntries.length===0)throw new Error("Submission history entry is missing queueEntries.");return a.queueEntries.map(T)}const E=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():la();function I(a){r(u,[...e(u),a],!0)}function R(a,l,p){r(u,e(u).map(S=>S.id===a&&S.kind===l?{...S,payload:p}:S),!0)}function Q(a){r(u,e(u).filter(l=>l.id!==a),!0)}const re=a=>({...a,refs:[...a.refs]}),me=a=>{try{return new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(new Date(a))}catch{return a}},G=a=>{const l=[];return a.summary.languagesToAdd&&l.push(`${a.summary.languagesToAdd} new ${a.summary.languagesToAdd===1?"language":"languages"}`),a.summary.languagesToEdit&&l.push(`${a.summary.languagesToEdit} edit${a.summary.languagesToEdit===1?"":"s"}`),a.summary.relationships&&l.push(`${a.summary.relationships} relation${a.summary.relationships===1?"":"s"}`),a.summary.newReferences&&l.push(`${a.summary.newReferences} reference${a.summary.newReferences===1?"":"s"}`),l.length>0?l.join(" ¬∑ "):"No changes"},N=Object.values(t.data.complexityOptions),V=t.data.relationTypes.map(a=>({value:a.id,label:a.name,description:a.description??""})),Z=ln(t.data.adjacencyMatrix);let ee=k(""),H=k(""),_=k(""),u=k(Se([])),y=k(Se([])),q=k(Se([])),L=k(Se([])),X=k(null),K=k(null),de=k(null),ge=k(null),xe=k(null),ye=k(!1),te=k(!1),Re=k(!1),ve=k(""),$=k(!1),ie=k(!1),pe=k(!1),fe=k(null),Le=k(null),Te=k(null),Me=k(null),Ne=k(null),z=k(Se(new Set)),W=k(!1),B=k(Se([])),_e=k(Se([])),Y=k(Se([]));const ne=M(()=>e(y).map(a=>a.payload)),he=M(()=>e(q).map(a=>a.payload)),P=M(()=>e(B).map(a=>a.bibtex)),C=M(()=>e(_e).map(a=>a.payload)),Ie=M(()=>e(L).map(a=>a.payload));let we=k(""),oe=k(null),ae=k(Se([])),Fe=k(!1);const Ee=M(()=>e(u).length>0||e(Y).length>0||e(z).size>0);let Ce=!1;Qe(()=>{const a=e(Ee);a&&!Ce&&!e(we)&&r(we,g(),!0),!a&&Ce&&(r(we,g(),!0),r(oe,null)),Ce=a}),Ya(()=>{r(ae,jt(),!0);try{const a=Wa();a&&(r(u,a.entries.map(T),!0),r(Y,f(a.customTags),!0),r(z,new Set(v(a.modifiedRelations)),!0),r(we,c(a.submissionId)??"",!0),r(oe,c(a.supersedesSubmissionId),!0));const l=localStorage.getItem(na);if(l){const p=JSON.parse(l);d(p?.email)&&r(ee,p.email,!0),d(p?.github)&&r(H,p.github,!0),d(p?.note)&&r(_,p.note,!0)}}catch(a){console.warn("Failed to restore queued changes from storage",a)}finally{r(W,!0)}e(we)||r(we,g(),!0)});function je(a){const l=a(e(z));r(z,new Set(l),!0)}function nt(a){const l=Ze(a.sourceId,a.targetId);je(p=>{const S=new Set(p);return S.add(l),S})}function ze(a){je(l=>{if(!l.has(a))return l;const p=new Set(l);return p.delete(a),p})}Qe(()=>{const a=[],l=[],p=[],S=[],F=[];for(const A of e(u))switch(A.kind){case"language:new":a.push({queueEntryId:A.id,payload:x(A.payload)});break;case"language:edit":l.push({queueEntryId:A.id,payload:x(A.payload)});break;case"relationship":p.push({queueEntryId:A.id,payload:b(A.payload)});break;case"reference":S.push({queueEntryId:A.id,bibtex:A.payload});break;case"separator":F.push({queueEntryId:A.id,payload:w(A.payload)});break}r(y,a,!0),r(q,l,!0),r(L,p,!0),r(B,S,!0),r(_e,F,!0)}),Qe(()=>{if(!e(W)||!Ot)return;if(e(we)||r(we,g(),!0),e(u).length===0&&e(Y).length===0&&e(z).size===0){try{localStorage.removeItem(ra)}catch(p){console.warn("Failed to clear queued changes from storage",p)}r(oe,null);return}const l={entries:e(u).map(T),customTags:e(Y).map(re),modifiedRelations:Array.from(e(z)),submissionId:e(we),supersedesSubmissionId:e(oe)??null};try{localStorage.setItem(ra,JSON.stringify(l))}catch(p){console.warn("Failed to persist queued changes",p)}}),Qe(()=>{if(!e(W)||!Ot)return;const a={email:e(ee),github:e(H),note:e(_)};try{localStorage.setItem(na,JSON.stringify(a))}catch(l){console.warn("Failed to persist contributor info",l)}}),Qe(()=>{if(!e(W)||!Ot)return;if(!e(Ee)){ia(null);return}const a={entries:e(u).map(T),customTags:e(Y).map(re),modifiedRelations:Array.from(e(z)),submissionId:e(we),supersedesSubmissionId:e(oe)??null};try{const l=Ja(oa,a);ia(l)}catch(l){console.error("Failed to build preview dataset:",l)}});function $e(a){return I({id:E(),kind:"language:new",payload:x(a)}),{success:!0}}function et(a){const l=e(q).find(p=>p.payload.name===a.name);return l?R(l.queueEntryId,"language:edit",x(a)):I({id:E(),kind:"language:edit",payload:x(a)}),{success:!0}}function Xe(a){I({id:E(),kind:"reference",payload:a})}function lt(a){I({id:E(),kind:"separator",payload:w(a)})}function st(a){r(Le,a,!0),r(ie,!0)}function be(a){if(e(Le)!==null){const l=e(_e)[e(Le)];l&&R(l.queueEntryId,"separator",w(a)),r(Le,null)}}function De(a){r(fe,a,!0),r($,!0)}function Ae(a){if(e(fe)!==null){const l=e(B)[e(fe)];l&&R(l.queueEntryId,"reference",a),r(fe,null)}}function qe(a){r(Te,a,!0),r(ye,!0)}function ke(a){if(e(Te)!==null){const l=e(y)[e(Te)];l&&R(l.queueEntryId,"language:new",x(a)),r(Te,null)}return{success:!0}}function dt(a){r(Me,a,!0),r(te,!0)}function ut(a){if(e(Me)!==null){const l=e(q)[e(Me)];l&&R(l.queueEntryId,"language:edit",x(a)),r(Me,null)}return{success:!0}}function xa(a){r(Ne,a,!0),r(pe,!0)}function pa(a){if(e(Ne)!==null){const l=e(L)[e(Ne)];l&&(R(l.queueEntryId,"relationship",b(a)),nt(a)),r(Ne,null)}}function _a(a){if(e(Ne)!==null){pa(a);return}const l=Ze(a.sourceId,a.targetId),p=e(L).find(S=>Ze(S.payload.sourceId,S.payload.targetId)===l);p?R(p.queueEntryId,"relationship",b(a)):I({id:E(),kind:"relationship",payload:b(a)}),nt(a)}function ya(a){const l=e(y)[a];l&&qt(l.queueEntryId,l.payload.name)}function ha(a){const l=e(q)[a];l&&qt(l.queueEntryId,l.payload.name)}function wa(a){const l=e(L)[a];l&&(Q(l.queueEntryId),ze(Ze(l.payload.sourceId,l.payload.targetId)))}function qt(a,l){const p=Ct(l),S=e(L).filter(A=>A.payload.sourceId===p||A.payload.targetId===p).map(A=>A.queueEntryId),F=new Set([a,...S]);r(u,e(u).filter(A=>!F.has(A.id)),!0),je(A=>{if(A.size===0)return A;const Oe=new Set(A);for(const J of Array.from(Oe))(J.startsWith(`${l}->`)||J.endsWith(`->${l}`))&&Oe.delete(J);return Oe})}function Ea(a){const l=e(B)[a];if(!l)return;const p=new Set(t.data.existingReferences.map(F=>F.id));for(let F=0;F<a;F++){const A=Mt(e(B)[F].bibtex,p);p.add(A)}const S=Mt(l.bibtex,p);r(u,e(u).map(F=>{if(F.kind==="language:new"||F.kind==="language:edit"){if(!F.payload.descriptionRefs.includes(S))return F;const A=x(F.payload);return A.descriptionRefs=A.descriptionRefs.filter(Oe=>Oe!==S),{...F,payload:A}}if(F.kind==="relationship"){if(!F.payload.refs.includes(S))return F;const A=b(F.payload);return A.refs=A.refs.filter(Oe=>Oe!==S),{...F,payload:A}}if(F.kind==="separator"){if(!F.payload.refs.includes(S))return F;const A=w(F.payload);return A.refs=A.refs.filter(Oe=>Oe!==S),{...F,payload:A}}return F}),!0),Q(l.queueEntryId),r(Y,e(Y).map(F=>({...F,refs:F.refs.filter(A=>A!==S)})),!0)}function ka(a){const l=e(_e)[a];if(!l)return;const p=l.payload.shortName;Q(l.queueEntryId),r(u,e(u).map(S=>{if(S.kind!=="relationship"||!S.payload.separatingFunctionIds||!S.payload.separatingFunctionIds.includes(p))return S;const F=b(S.payload);return F.separatingFunctionIds=(F.separatingFunctionIds||[]).filter(A=>A!==p),{...S,payload:F}}),!0)}function Ra(a){try{const l=a.payload;r(u,D(l),!0),r(Y,l.customTags.map(re),!0),r(z,new Set(l.modifiedRelations),!0),r(ee,l.contributor.email,!0),r(H,l.contributor.github,!0),r(_,l.contributor.note,!0),r(oe,l.submissionId,!0),r(we,g(),!0),r(ae,jt(),!0),r(Fe,!1),r(fe,null),r(Te,null),r(Me,null),r(Ne,null),r(X,null),r(K,null),r(de,null),r(ge,null)}catch(l){console.error("Failed to load submission from history",l),alert("Unable to load this submission. It was saved before ordered queues were supported.")}}function Sa(a){a.preventDefault(),window.location.href="/"}var Pt=ii();or(a=>{sr.title="Contribute - Knowledge Compilation Map"});var yt=Ve(Pt),Qt=i(yt),Ut=o(i(Qt),2),zt=o(i(Ut),2),ht=i(zt),wt=i(ht),Et=o(i(wt),2),kt=i(Et),Bt=o(i(kt),2);Ye(Bt),n(kt);var Vt=o(kt,2),Ht=o(i(Vt),2);Ye(Ht),n(Vt),n(Et);var Kt=o(Et,2),Gt=o(i(Kt),2);bt(Gt),at(2),n(Kt),n(wt);var Rt=o(wt,2),Xt=i(Rt);{var Ta=a=>{var l=Hn(),p=o(i(l),2);p.__click=[Vn,oe],n(l),m(a,l)};U(Xt,a=>{e(oe)&&a(Ta)})}var St=o(Xt,2);St.__click=[ba,Fe,ae];var Ia=o(i(St),2);n(St),n(Rt);var Jt=o(Rt,2);{var Fa=a=>{var l=Zn(),p=i(l),S=o(i(p),2);S.__click=[ba,Fe,ae],n(p);var F=o(p,2);{var A=J=>{var ue=Kn();m(J,ue)},Oe=J=>{var ue=Yn();le(ue,21,()=>e(ae),se,(mt,Je)=>{const ct=M(()=>G(e(Je))),tt=M(()=>me(e(Je).createdAt));var gt=Wn(),vt=i(gt),Tt=i(vt),It=i(Tt),Na=i(It,!0);n(It);var Ft=o(It,2),La=i(Ft,!0);n(Ft);var Ma=o(Ft,2);{var Ca=it=>{var xt=Gn();m(it,xt)},ja=it=>{var xt=He(),Pa=Ve(xt);{var Qa=Dt=>{var Ua=Xn();m(Dt,Ua)};U(Pa,Dt=>{e(Je).payload.submissionId===e(oe)&&Dt(Qa)},!0)}m(it,xt)};U(Ma,it=>{e(Je).supersededBySubmissionId?it(Ca):it(ja,!1)})}n(Tt);var qa=o(Tt,2);qa.__click=[Jn,Ra,Je],n(vt),n(gt),j(()=>{O(Na,e(tt)),O(La,e(ct))}),m(mt,gt)}),n(ue),m(J,ue)};U(F,J=>{e(ae).length===0?J(A):J(Oe,!1)})}n(l),m(a,l)};U(Jt,a=>{e(Fe)&&a(Fa)})}var Wt=o(Jt,2);Pn(Wt,{get languages(){return oa.languages},get languagesToAdd(){return e(ne)},get languagesToEdit(){return e(he)},get newReferences(){return e(P)},get newSeparatingFunctions(){return e(C)},get relationships(){return e(Ie)},get modifiedRelations(){return e(z)},get expandedLanguageToAddIndex(){return e(X)},get expandedLanguageToEditIndex(){return e(K)},get expandedReferenceIndex(){return e(ge)},get expandedSeparatingFunctionIndex(){return e(xe)},get expandedRelationshipIndex(){return e(de)},onToggleExpandLanguageToAdd:a=>r(X,e(X)===a?null:a,!0),onToggleExpandLanguageToEdit:a=>r(K,e(K)===a?null:a,!0),onToggleExpandReference:a=>r(ge,e(ge)===a?null:a,!0),onToggleExpandSeparatingFunction:a=>r(xe,e(xe)===a?null:a,!0),onToggleExpandRelationship:a=>r(de,e(de)===a?null:a,!0),onEditLanguageToAdd:qe,onEditLanguageToEdit:dt,onDeleteLanguageToAdd:ya,onDeleteLanguageToEdit:ha,onEditReference:De,onDeleteReference:Ea,onEditSeparatingFunction:st,onDeleteSeparatingFunction:ka,onEditRelationship:xa,onDeleteRelationship:a=>wa(a)});var Yt=o(Wt,2);Un(Yt,{onAddLanguage:()=>r(ye,!0),onEditLanguage:()=>r(Re,!0),onManageRelationships:()=>r(pe,!0),onAddReference:()=>r($,!0),onAddSeparatingFunction:()=>r(ie,!0)});var Da=o(Yt,2);{let a=M(()=>!e(Ee));Bn(Da,{get disabled(){return e(a)}})}n(ht),n(zt),n(Ut),n(Qt),n(yt);var Zt=o(yt,2);{let a=M(()=>e(Te)!==null?ke:$e),l=M(()=>e(Te)!==null),p=M(()=>e(Te)!==null?e(y)[e(Te)]?.payload:void 0),S=M(()=>Object.values(t.data.queries).map(ue=>({code:ue.code,name:ue.label}))),F=M(()=>Object.values(t.data.transformations).map(ue=>({code:ue.code,name:ue.label}))),A=M(()=>N.map(ue=>({value:ue.code,label:ue.label,description:ue.description||""}))),Oe=M(()=>[...t.data.existingTags,...e(Y)].map(ue=>({label:ue.label,color:ue.color||"#6366f1",description:"",refs:[]}))),J=M(()=>pt(t.data.existingReferences,e(P)));ua(Zt,{onClose:()=>{r(ye,!1),r(Te,null)},get onAdd(){return e(a)},get isEdit(){return e(l)},get initialData(){return e(p)},get queries(){return e(S)},get transformations(){return e(F)},get complexityOptions(){return e(A)},get existingTags(){return e(Oe)},get availableRefs(){return e(J)},get isOpen(){return e(ye)},set isOpen(ue){r(ye,ue,!0)}})}var $t=o(Zt,2);{let a=M(()=>e(Me)!==null?ut:et),l=M(()=>e(Me)!==null?e(q)[e(Me)]?.payload:e(ve)?dn(t.data.languages.find(J=>J.name===e(ve))):void 0),p=M(()=>Object.values(t.data.queries).map(J=>({code:J.code,name:J.label}))),S=M(()=>Object.values(t.data.transformations).map(J=>({code:J.code,name:J.label}))),F=M(()=>N.map(J=>({value:J.code,label:J.label,description:J.description||""}))),A=M(()=>[...t.data.existingTags,...e(Y)].map(J=>({label:J.label,color:J.color||"#6366f1",description:"",refs:[]}))),Oe=M(()=>pt(t.data.existingReferences,e(P)));ua($t,{onClose:()=>{r(te,!1),r(ve,""),r(Me,null)},get onAdd(){return e(a)},isEdit:!0,get initialData(){return e(l)},get queries(){return e(p)},get transformations(){return e(S)},get complexityOptions(){return e(F)},get existingTags(){return e(A)},get availableRefs(){return e(Oe)},get isOpen(){return e(te)},set isOpen(J){r(te,J,!0)}})}var ea=o($t,2);{var Aa=a=>{var l=ni();l.__click=[$n,Re];var p=i(l);p.__click=[ei];var S=o(i(p),2),F=o(i(S),2),A=i(F);A.value=A.__value="";var Oe=o(A);le(Oe,17,()=>t.data.languages,se,(Je,ct)=>{var tt=ti(),gt=i(tt,!0);n(tt);var vt={};j(()=>{O(gt,e(ct).name),vt!==(vt=e(ct).name)&&(tt.value=(tt.__value=e(ct).name)??"")}),m(Je,tt)}),n(F);var J=o(F,2),ue=i(J);ue.__click=[ai,ve,Re];var mt=o(ue,2);mt.__click=[ri,ve,Re,te],n(J),n(S),n(p),n(l),j(()=>mt.disabled=!e(ve)),ot(F,()=>e(ve),Je=>r(ve,Je)),m(a,l)};U(ea,a=>{e(Re)&&a(Aa)})}var ta=o(ea,2);{let a=M(()=>e(fe)!==null?Ae:Xe),l=M(()=>e(fe)!==null?e(B)[e(fe)]?.bibtex??"":""),p=M(()=>e(fe)!==null);jr(ta,{onClose:()=>{r($,!1),r(fe,null)},get onAdd(){return e(a)},get initialValue(){return e(l)},get isEditMode(){return e(p)},get isOpen(){return e($)},set isOpen(S){r($,S,!0)}})}var aa=o(ta,2);{let a=M(()=>e(Le)!==null?be:lt),l=M(()=>e(Le)!==null?e(_e)[e(Le)]?.payload:void 0),p=M(()=>pt(t.data.existingReferences,e(P))),S=M(()=>e(Le)!==null);Vr(aa,{onClose:()=>{r(ie,!1),r(Le,null)},get onAdd(){return e(a)},get initialValue(){return e(l)},get availableRefs(){return e(p)},get isEditMode(){return e(S)},get isOpen(){return e(ie)},set isOpen(F){r(ie,F,!0)}})}var Oa=o(aa,2);{let a=M(()=>e(Ne)!==null?e(L)[e(Ne)]?.payload:void 0),l=M(()=>sn(t.data.languages,e(ne),e(he))),p=M(()=>pt(t.data.existingReferences,e(P))),S=M(()=>un(t.data.existingSeparatingFunctions,e(C)));on(Oa,{onClose:()=>{r(pe,!1),r(Ne,null)},onSave:_a,get initialData(){return e(a)},get languages(){return e(l)},get statusOptions(){return V},get availableRefs(){return e(p)},get availableSeparatingFunctions(){return e(S)},get baselineRelations(){return Z},get isOpen(){return e(pe)},set isOpen(F){r(pe,F,!0)}})}j(()=>Ue(Ia,0,`h-3 w-3 transition-transform ${e(Fe)?"rotate-180":""}`)),lr("submit",ht,Sa),Pe(Bt,()=>e(ee),a=>r(ee,a)),Pe(Ht,()=>e(H),a=>r(H,a)),Pe(Gt,()=>e(_),a=>r(_,a)),m(s,Pt),Ge()}rt(["click"]);export{vi as component,gi as universal};
