import{d as qa,a as jt,b as Pa,r as Qa,c as za,C as Ba,T as Ua,Q as Va,e as de,i as se,f as Ha,g as ht,h as Ut,M as qe,j as qt,k as la,l as da,s as sa,m as Ka,n as ua,o as Vt,p as Xa,q as Ga}from"../chunks/OX4tncTk.js";import"../chunks/DsnmJJEf.js";import{s as R,o as Ya}from"../chunks/BVtKIfkr.js";import{a$ as Ja,aT as Wa,u as Za,r as $a,h as er,k as mt,be as tr,ba as lt,K as Ke,X as S,y as Re,a4 as je,z as n,v as e,Z as Ge,_ as He,Q as b,R as Xe,M as _,V as i,Y as a,al as ot,T as o,bf as wt,O as D,aW as j,aX as ar,a0 as rr,bg as ca,N as nr,bh as ir,$ as or}from"../chunks/B_N74zmh.js";import{p as ge,i as P}from"../chunks/DOwogY83.js";import{r as Ze,s as Ne,b as ct,a as Pe,c as lr}from"../chunks/CxGUFWFB.js";function Ce(r,t,u=t){var g=new WeakSet;Ja(r,"input",async v=>{var s=v?r.defaultValue:r.value;if(s=Pt(r)?Qt(s):s,u(s),mt!==null&&g.add(mt),await Wa(),s!==(s=t())){var m=r.selectionStart,h=r.selectionEnd;r.value=s??"",h!==null&&(r.selectionStart=m,r.selectionEnd=Math.min(h,r.value.length))}}),(er&&r.defaultValue!==r.value||Za(t)==null&&r.value)&&(u(Pt(r)?Qt(r.value):r.value),mt!==null&&g.add(mt)),$a(()=>{var v=t();if(r===document.activeElement){var s=tr??mt;if(g.has(s))return}Pt(r)&&v===Qt(r.value)||r.type==="date"&&!v&&!r.value||v!==r.value&&(r.value=v??"")})}function Pt(r){var t=r.type;return t==="number"||t==="range"}function Qt(r){return r===""?null:+r}const ha={},dr=qa.separatingFunctions;for(const r of dr)ha[r.shortName]=r;const sr=Object.values(ha),ur=()=>{const r=jt.map(s=>s.name),t=Pa.map(s=>({id:s.id,title:s.title,bibtex:s.bibtex})),u=new Map;for(const s of jt)if(s.tags)for(const m of s.tags)u.has(m.label)||u.set(m.label,{label:m.label,color:m.color});const g=Array.from(u.values()),v=sr.map(s=>({shortName:s.shortName,name:s.name,description:s.description}));return{existingLanguageIds:r,existingReferences:t,existingSeparatingFunctions:v,existingTags:g,languages:jt,queries:Va,transformations:Ua,complexityOptions:Ba,adjacencyMatrix:za,relationTypes:Qa}},cr=!1,ki=Object.freeze(Object.defineProperty({__proto__:null,load:ur,prerender:cr},Symbol.toStringTag,{value:"Module"}));async function gr(r,t,u,g,v,s,m,h,x,w,E,p){if(!e(t).trim()||!e(u).trim()||!e(g).trim()){n(v,"Please fill out all required fields.");return}try{const M=await s.onAdd({name:e(t).trim(),fullName:e(u).trim(),description:e(g).trim(),descriptionRefs:e(m),queries:e(h),transformations:e(x),tags:e(w),existingReferences:e(E)}),z=M&&typeof M=="object"&&"success"in M?M:void 0;if(z&&!z.success){n(v,z.error??"Unable to add language. Please review your input.",!0);return}n(v,null),p(),s.onClose?.()}catch(M){n(v,M instanceof Error?M.message:"Unexpected error while adding the language.",!0)}}function ga(r,t,u){t(),u.onClose()}var vr=r=>r.stopPropagation(),fr=_('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),br=(r,t,u)=>t(e(u).id),xr=_('<button type="button"> </button>'),mr=_('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),pr=_("<option> </option>"),_r=(r,t,u,g)=>t(e(u).code,e(g).id),yr=_('<button type="button"> </button>'),hr=_('<div class="mt-2 flex flex-wrap gap-1"></div>'),wr=_('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Er=_("<option> </option>"),kr=(r,t,u,g)=>t(e(u).code,e(g).id),Rr=_('<button type="button"> </button>'),Sr=_('<div class="mt-2 flex flex-wrap gap-1"></div>'),Ir=_('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Tr=(r,t,u)=>t(e(u)),Fr=_('<button type="button"> </button>'),Dr=_('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),Ar=_(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function va(r,t){Ke(t,!0);let u=ge(t,"isOpen",11,!1),g=ge(t,"availableRefs",19,()=>[]),v=ge(t,"isEdit",3,!1),s=S(""),m=S(""),h=S(""),x=S(Re([])),w=S(Re({})),E=S(Re({})),p=S(Re([])),M=S(Re([])),z=S(null);je(()=>{u()&&v()&&t.initialData&&(n(s,t.initialData.name,!0),n(m,t.initialData.fullName,!0),n(h,t.initialData.description,!0),n(x,[...t.initialData.descriptionRefs],!0),n(w,{...t.initialData.queries},!0),n(E,{...t.initialData.transformations},!0),n(p,[...t.initialData.tags],!0),n(M,[...t.initialData.existingReferences],!0),n(z,null))});function k(){n(s,""),n(m,""),n(h,""),n(x,[],!0),n(w,{},!0),n(E,{},!0),n(p,[],!0),n(M,[],!0),n(V,!1),n(X,!1),n(z,null)}function A(F){e(x).includes(F)?n(x,e(x).filter(c=>c!==F),!0):n(x,[...e(x),F],!0)}function Q(F){e(p).some(c=>c.label===F.label)?n(p,e(p).filter(c=>c.label!==F.label),!0):n(p,[...e(p),F],!0)}function K(F,c){if(!e(w)[F])return;const f=e(w)[F].refs;f.includes(c)?e(w)[F].refs=f.filter(y=>y!==c):e(w)[F].refs=[...f,c],n(w,{...e(w)},!0)}function re(F,c){if(!e(E)[F])return;const f=e(E)[F].refs;f.includes(c)?e(E)[F].refs=f.filter(y=>y!==c):e(E)[F].refs=[...f,c],n(E,{...e(E)},!0)}let V=S(!1),X=S(!1);je(()=>{if(t.queries.length>0&&!e(V)){const F={};t.queries.forEach(c=>{if(v()&&t.initialData&&t.initialData.queries[c.code]){const f=t.initialData.queries[c.code];F[c.code]={complexity:f.complexity,note:f.note||"",refs:[...f.refs]}}else F[c.code]={complexity:"unknown-to-us",note:"",refs:[]}}),n(w,F,!0),n(V,!0)}}),je(()=>{if(t.transformations.length>0&&!e(X)){const F={};t.transformations.forEach(c=>{if(v()&&t.initialData){let f=t.initialData.transformations[c.code];if(!f){const y=Object.keys(t.initialData.transformations).find(I=>t.initialData.transformations[I]!==void 0&&(I===c.code||c.code==="∧C"&&I==="AND_C"||c.code==="∧BC"&&I==="AND_BC"||c.code==="∨C"&&I==="OR_C"||c.code==="∨BC"&&I==="OR_BC"||c.code==="¬C"&&I==="NOT_C"));y&&(f=t.initialData.transformations[y])}F[c.code]=f?{complexity:f.complexity,note:f.note||"",refs:[...f.refs]}:{complexity:"unknown-to-us",note:"",refs:[]}}else F[c.code]={complexity:"unknown-to-us",note:"",refs:[]}}),n(E,F,!0),n(X,!0)}});var oe=Ge(),ue=He(oe);{var te=F=>{var c=Ar();c.__click=[ga,k,t];var f=i(c);f.__click=[vr];var y=i(f),I=i(y),L=i(I);a(I),ot(2),a(y);var B=o(y,2),Z=i(B);{var q=J=>{var N=fr(),Ee=i(N,!0);a(N),D(()=>R(Ee,e(z))),b(J,N)};P(Z,J=>{e(z)&&J(q)})}var H=o(Z,2),G=o(i(H),2),Y=i(G),$=o(i(Y),2);Ze($),a(Y);var ke=o(Y,2),fe=o(i(ke),2);Ze(fe),a(ke),a(G);var ne=o(G,2),ce=o(i(ne),2);wt(ce),a(ne);var Qe=o(ne,2);{var me=J=>{var N=mr(),Ee=o(i(N),2);de(Ee,21,g,se,(ze,Se)=>{var be=xr();be.__click=[br,A,Se];var Oe=i(be,!0);a(be),D(Ie=>{Pe(be,1,Ie),Ne(be,"title",e(Se).title),R(Oe,e(Se).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(Se).id)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),b(ze,be)}),a(Ee),a(N),b(J,N)};P(Qe,J=>{g().length>0&&J(me)})}a(H);var we=o(H,2),le=o(i(we),2);de(le,21,()=>t.queries,se,(J,N)=>{var Ee=Ge(),ze=He(Ee);{var Se=be=>{var Oe=wr(),Ie=i(Oe),Be=i(Ie),Ue=i(Be),gt=i(Ue,!0);a(Ue);var Ve=o(Ue,2);de(Ve,21,()=>t.complexityOptions,se,(ye,Te)=>{var Fe=pr(),Me=i(Fe,!0);a(Fe);var _e={};D(()=>{R(Me,e(Te).label),_e!==(_e=e(Te).value)&&(Fe.value=(Fe.__value=e(Te).value)??"")}),b(ye,Fe)}),a(Ve),a(Be);var tt=o(Be,2),at=i(tt),Ye=o(at,2);Ze(Ye),a(tt),a(Ie);var vt=o(Ie,2);{var dt=ye=>{var Te=hr();de(Te,21,g,se,(Fe,Me)=>{var _e=yr();_e.__click=[_r,K,N,Me];var rt=i(_e,!0);a(_e),D(st=>{Pe(_e,1,st),Ne(_e,"title",e(Me).title),R(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(w)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Fe,_e)}),a(Te),b(ye,Te)};P(vt,ye=>{g().length>0&&ye(dt)})}a(Oe),D(()=>{Ne(Ue,"for",`query-${e(N).code??""}-complexity`),R(gt,e(N).name),Ne(Ve,"id",`query-${e(N).code??""}-complexity`),Ne(at,"for",`query-${e(N).code??""}-note`),Ne(Ye,"id",`query-${e(N).code??""}-note`)}),ct(Ve,()=>e(w)[e(N).code].complexity,ye=>e(w)[e(N).code].complexity=ye),Ce(Ye,()=>e(w)[e(N).code].note,ye=>e(w)[e(N).code].note=ye),b(be,Oe)};P(ze,be=>{e(w)[e(N).code]&&be(Se)})}b(J,Ee)}),a(le),a(we);var he=o(we,2),Le=o(i(he),2);de(Le,21,()=>t.transformations,se,(J,N)=>{var Ee=Ge(),ze=He(Ee);{var Se=be=>{var Oe=Ir(),Ie=i(Oe),Be=i(Ie),Ue=i(Be),gt=i(Ue,!0);a(Ue);var Ve=o(Ue,2);de(Ve,21,()=>t.complexityOptions,se,(ye,Te)=>{var Fe=Er(),Me=i(Fe,!0);a(Fe);var _e={};D(()=>{R(Me,e(Te).label),_e!==(_e=e(Te).value)&&(Fe.value=(Fe.__value=e(Te).value)??"")}),b(ye,Fe)}),a(Ve),a(Be);var tt=o(Be,2),at=i(tt),Ye=o(at,2);Ze(Ye),a(tt),a(Ie);var vt=o(Ie,2);{var dt=ye=>{var Te=Sr();de(Te,21,g,se,(Fe,Me)=>{var _e=Rr();_e.__click=[kr,re,N,Me];var rt=i(_e,!0);a(_e),D(st=>{Pe(_e,1,st),Ne(_e,"title",e(Me).title),R(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(E)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Fe,_e)}),a(Te),b(ye,Te)};P(vt,ye=>{g().length>0&&ye(dt)})}a(Oe),D(()=>{Ne(Ue,"for",`transform-${e(N).code??""}-complexity`),R(gt,e(N).name),Ne(Ve,"id",`transform-${e(N).code??""}-complexity`),Ne(at,"for",`transform-${e(N).code??""}-note`),Ne(Ye,"id",`transform-${e(N).code??""}-note`)}),ct(Ve,()=>e(E)[e(N).code].complexity,ye=>e(E)[e(N).code].complexity=ye),Ce(Ye,()=>e(E)[e(N).code].note,ye=>e(E)[e(N).code].note=ye),b(be,Oe)};P(ze,be=>{e(E)[e(N).code]&&be(Se)})}b(J,Ee)}),a(Le),a(he);var W=o(he,2);{var ie=J=>{var N=Dr(),Ee=o(i(N),2);de(Ee,21,()=>t.existingTags,se,(ze,Se)=>{var be=Fr();be.__click=[Tr,Q,Se];var Oe=i(be,!0);a(be),D((Ie,Be)=>{Pe(be,1,Ie),lr(be,`background-color: ${e(Se).color??""}; color: white; ${Be??""}`),R(Oe,e(Se).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(p).some(Ie=>Ie.label===e(Se).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(p).some(Ie=>Ie.label===e(Se).label)?`ring-color: ${e(Se).color};`:""]),b(ze,be)}),a(Ee),a(N),b(J,N)};P(W,J=>{t.existingTags.length>0&&J(ie)})}var ee=o(W,2),Ae=i(ee);Ae.__click=[ga,k,t];var ve=o(Ae,2);ve.__click=[gr,s,m,h,z,t,x,w,E,p,M,k];var pe=i(ve);a(ve),a(ee),a(B),a(f),a(c),D(J=>{R(L,`${v()?"Edit":"Add New"} Language`),ve.disabled=J,R(pe,`${v()?"Update":"Add"} Language`)},[()=>!e(s).trim()||!e(m).trim()||!e(h).trim()]),Ce($,()=>e(s),J=>n(s,J)),Ce(fe,()=>e(m),J=>n(m,J)),Ce(ce,()=>e(h),J=>n(h,J)),b(F,c)};P(ue,F=>{u()&&F(te)})}b(r,oe),Xe()}lt(["click"]);function Nr(r,t,u,g){e(t).trim()&&(u.onAdd(e(t).trim()),n(t,""),g(!1))}function fa(r,t,u,g){t()||n(u,""),g.onClose()}var Mr=r=>r.stopPropagation(),Lr=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Or(r,t){Ke(t,!0);let u=ge(t,"isOpen",15,!1),g=ge(t,"initialValue",3,""),v=ge(t,"isEditMode",3,!1),s=S(Re(g()));je(()=>{u()&&g()&&n(s,g())});const m=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var h=Ge(),x=He(h);{var w=E=>{var p=Lr();p.__click=[fa,v,s,t];var M=i(p);M.__click=[Mr];var z=i(M),k=i(z),A=i(k,!0);a(k);var Q=o(k,2),K=i(Q,!0);a(Q),a(z);var re=o(z,2),V=i(re),X=o(i(V),2);wt(X),Ne(X,"placeholder",m),ot(2),a(V);var oe=o(V,2),ue=i(oe);ue.__click=[fa,v,s,t];var te=o(ue,2);te.__click=[Nr,s,t,u];var F=i(te,!0);a(te),a(oe),a(re),a(M),a(p),D(c=>{R(A,v()?"Edit Reference":"Add New Reference"),R(K,v()?"Update BibTeX citation":"Paste BibTeX citation"),te.disabled=c,R(F,v()?"Update Reference":"Add Reference")},[()=>!e(s).trim()]),Ce(X,()=>e(s),c=>n(s,c)),b(E,p)};P(x,E=>{u()&&E(w)})}b(r,h),Xe()}lt(["click"]);function Cr(r,t,u,g,v,s,m,h,x){!e(t).trim()||!e(u).trim()||(g.onAdd({shortName:e(t).trim(),name:e(u).trim(),description:e(v).trim(),refs:e(s)}),m()||h(),x(!1))}function ba(r,t,u,g){t()||u(),g.onClose()}var jr=r=>r.stopPropagation(),qr=(r,t,u)=>t(e(u).id),Pr=_('<button type="button"> </button>'),Qr=_('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),zr=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-orange-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="sf-shortName" class="block text-sm font-medium text-gray-700 mb-2">Short Name <span class="text-red-500">*</span></label> <input id="sf-shortName" type="text" placeholder="e.g., Clique" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Brief label displayed on edges (e.g., "Clique", "PI")</p></div> <div><label for="sf-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name <span class="text-red-500">*</span></label> <input id="sf-name" type="text" placeholder="e.g., Clique Detection Instances" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Full human-readable name</p></div> <div><label for="sf-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="sf-description" rows="3" placeholder="Describe what this function separates..." class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-y"></textarea></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Br(r,t){Ke(t,!0);let u=ge(t,"isOpen",15,!1),g=ge(t,"availableRefs",19,()=>[]),v=ge(t,"isEditMode",3,!1),s=S(""),m=S(""),h=S(""),x=S(Re([]));je(()=>{u()&&t.initialValue&&(n(s,t.initialValue.shortName,!0),n(m,t.initialValue.name,!0),n(h,t.initialValue.description,!0),n(x,[...t.initialValue.refs],!0))});function w(){n(s,""),n(m,""),n(h,""),n(x,[],!0)}function E(k){e(x).includes(k)?n(x,e(x).filter(A=>A!==k),!0):n(x,[...e(x),k],!0)}var p=Ge(),M=He(p);{var z=k=>{var A=zr();A.__click=[ba,v,w,t];var Q=i(A);Q.__click=[jr];var K=i(Q),re=i(K),V=i(re,!0);a(re);var X=o(re,2),oe=i(X,!0);a(X),a(K);var ue=o(K,2),te=i(ue),F=o(i(te),2);Ze(F),ot(2),a(te);var c=o(te,2),f=o(i(c),2);Ze(f),ot(2),a(c);var y=o(c,2),I=o(i(y),2);wt(I),a(y);var L=o(y,2);{var B=Y=>{var $=Qr(),ke=o(i($),2);de(ke,21,g,se,(fe,ne)=>{var ce=Pr();ce.__click=[qr,E,ne];var Qe=i(ce,!0);a(ce),D(me=>{Pe(ce,1,me),Ne(ce,"title",e(ne).title),R(Qe,e(ne).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(ne).id)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(fe,ce)}),a(ke),a($),b(Y,$)};P(L,Y=>{g().length>0&&Y(B)})}var Z=o(L,2),q=i(Z);q.__click=[ba,v,w,t];var H=o(q,2);H.__click=[Cr,s,m,t,h,x,v,w,u];var G=i(H,!0);a(H),a(Z),a(ue),a(Q),a(A),D(Y=>{R(V,v()?"Edit Separating Function":"Add New Separating Function"),R(oe,v()?"Update separating function details":"Define a new separating function"),H.disabled=Y,R(G,v()?"Update Function":"Add Function")},[()=>!e(s).trim()||!e(m).trim()]),Ce(F,()=>e(s),Y=>n(s,Y)),Ce(f,()=>e(m),Y=>n(m,Y)),Ce(I,()=>e(h),Y=>n(h,Y)),b(k,A)};P(M,k=>{u()&&k(z)})}b(r,p),Xe()}lt(["click"]);function Ur(r,t,u,g,v,s,m,h,x,w){!e(t)||!e(u)||!e(g)||e(t)===e(u)||(v.onSave({sourceId:e(t),targetId:e(u),status:e(g),description:e(s)||void 0,refs:e(m),separatingFunctionIds:e(h).length>0?e(h):void 0}),x(),w(!1))}function xa(r,t,u){t(),u.onClose()}var Vr=r=>r.stopPropagation(),Hr=_("<option> </option>"),Kr=_("<option> </option>"),Xr=_("<option> </option>"),Gr=_('<p class="text-xs text-gray-500 mt-1"> </p>'),Yr=(r,t,u)=>t(e(u).id),Jr=_('<button type="button"> </button>'),Wr=_('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Zr=(r,t,u)=>t(e(u).shortName),$r=_('<button type="button"> </button>'),en=_('<p class="text-xs text-gray-500 mt-2"> </p>'),tn=_('<fieldset class="border-t pt-4"><legend class="block text-sm font-medium text-gray-700 mb-2">Separating Functions (optional)</legend> <div class="flex flex-wrap gap-2"></div> <!></fieldset>'),an=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <!> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function rn(r,t){Ke(t,!0);let u=ge(t,"isOpen",15,!1),g=ge(t,"availableRefs",19,()=>[]),v=ge(t,"availableSeparatingFunctions",19,()=>[]),s=ge(t,"baselineRelations",19,()=>new Map),m=S(""),h=S(""),x=S(""),w=S(""),E=S(Re([])),p=S(Re([])),M=S(!1);je(()=>{u()&&t.initialData?(n(M,!0),n(m,t.initialData.sourceId,!0),n(h,t.initialData.targetId,!0),n(x,t.initialData.status,!0),n(w,t.initialData.description||"",!0),n(E,[...t.initialData.refs],!0),n(p,t.initialData.separatingFunctionIds?[...t.initialData.separatingFunctionIds]:[],!0)):u()&&!t.initialData&&n(M,!1)}),je(()=>{if(!e(M)&&e(m)&&e(h)&&e(m)!==e(h)){const V=`${e(m)}->${e(h)}`,X=s().get(V);X?(n(x,X.status,!0),n(w,X.description||"",!0),n(E,[...X.refs],!0),n(p,X.separatingFunctionIds?[...X.separatingFunctionIds]:[],!0)):(n(x,""),n(w,""),n(E,[],!0),n(p,[],!0))}});function z(){n(m,""),n(h,""),n(x,""),n(w,""),n(E,[],!0),n(p,[],!0),n(M,!1)}function k(V){e(E).includes(V)?n(E,e(E).filter(X=>X!==V),!0):n(E,[...e(E),V],!0)}function A(V){e(p).includes(V)?n(p,e(p).filter(X=>X!==V),!0):n(p,[...e(p),V],!0)}var Q=Ge(),K=He(Q);{var re=V=>{var X=an();X.__click=[xa,z,t];var oe=i(X);oe.__click=[Vr];var ue=o(i(oe),2),te=i(ue),F=i(te),c=o(i(F),2),f=i(c);f.value=f.__value="";var y=o(f);de(y,17,()=>t.languages,se,(W,ie)=>{var ee=Hr(),Ae=i(ee,!0);a(ee);var ve={};D(()=>{R(Ae,e(ie).name),ve!==(ve=e(ie).id)&&(ee.value=(ee.__value=e(ie).id)??"")}),b(W,ee)}),a(c),a(F);var I=o(F,2),L=o(i(I),2),B=i(L);B.value=B.__value="";var Z=o(B);de(Z,17,()=>t.languages,se,(W,ie)=>{var ee=Kr(),Ae=i(ee,!0);a(ee);var ve={};D(()=>{ee.disabled=e(ie).id===e(m),R(Ae,e(ie).name),ve!==(ve=e(ie).id)&&(ee.value=(ee.__value=e(ie).id)??"")}),b(W,ee)}),a(L),a(I),a(te);var q=o(te,2),H=o(i(q),2),G=i(H);G.value=G.__value="";var Y=o(G);de(Y,17,()=>t.statusOptions,se,(W,ie)=>{var ee=Xr(),Ae=i(ee,!0);a(ee);var ve={};D(()=>{R(Ae,e(ie).label),ve!==(ve=e(ie).value)&&(ee.value=(ee.__value=e(ie).value)??"")}),b(W,ee)}),a(H);var $=o(H,2);{var ke=W=>{const ie=j(()=>t.statusOptions.find(pe=>pe.value===e(x)));var ee=Ge(),Ae=He(ee);{var ve=pe=>{var J=Gr(),N=i(J,!0);a(J),D(()=>R(N,e(ie).description)),b(pe,J)};P(Ae,pe=>{e(ie)&&pe(ve)})}b(W,ee)};P($,W=>{e(x)&&W(ke)})}a(q);var fe=o(q,2),ne=o(i(fe),2);wt(ne),a(fe);var ce=o(fe,2);{var Qe=W=>{var ie=Wr(),ee=o(i(ie),2);de(ee,21,g,se,(Ae,ve)=>{var pe=Jr();pe.__click=[Yr,k,ve];var J=i(pe,!0);a(pe),D(N=>{Pe(pe,1,N),Ne(pe,"title",e(ve).title),R(J,e(ve).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(E).includes(e(ve).id)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),b(Ae,pe)}),a(ee),a(ie),b(W,ie)};P(ce,W=>{g().length>0&&W(Qe)})}var me=o(ce,2);{var we=W=>{var ie=tn(),ee=o(i(ie),2);de(ee,21,v,se,(pe,J)=>{var N=$r();N.__click=[Zr,A,J];var Ee=i(N,!0);a(N),D(ze=>{Pe(N,1,ze),Ne(N,"title",e(J).name),R(Ee,e(J).shortName)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(p).includes(e(J).shortName)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(pe,N)}),a(ee);var Ae=o(ee,2);{var ve=pe=>{var J=en(),N=i(J);a(J),D(Ee=>R(N,`Selected: ${Ee??""}`),[()=>e(p).join(", ")]),b(pe,J)};P(Ae,pe=>{e(p).length>0&&pe(ve)})}a(ie),b(W,ie)};P(me,W=>{v().length>0&&W(we)})}var le=o(me,2),he=i(le);he.__click=[xa,z,t];var Le=o(he,2);Le.__click=[Ur,m,h,x,t,w,E,p,z,u],a(le),a(ue),a(oe),a(X),D(()=>Le.disabled=!e(m)||!e(h)||!e(x)||e(m)===e(h)),ct(c,()=>e(m),W=>n(m,W)),ct(L,()=>e(h),W=>n(h,W)),ct(H,()=>e(x),W=>n(x,W)),Ce(ne,()=>e(w),W=>n(w,W)),b(V,X)};P(K,V=>{u()&&V(re)})}b(r,Q),Xe()}lt(["click"]);function $e(r,t){return`${r}->${t}`}function ma(r,t=!1){const u={};if(r)for(const[g,v]of Object.entries(r)){const s=t?Ha(g):g;u[s]={complexity:v.complexity,note:v.note,refs:Array.isArray(v.refs)?[...v.refs]:[]}}return u}function nn(r){const t=new Map,{languageIds:u,matrix:g}=r;for(let v=0;v<u.length;v++)for(let s=0;s<u.length;s++){const m=g[v][s];if(m){const h=u[v],x=u[s],w=m.separatingFunctionIds&&Array.isArray(m.separatingFunctionIds)?[...m.separatingFunctionIds]:void 0;t.set($e(h,x),{status:m.status,description:m.description,refs:m.refs?[...m.refs]:[],separatingFunctionIds:w,derived:m.derived})}}return t}function Rt(r,t){const u=new Set(r.map(s=>s.id)),g=r.map(s=>({id:s.id,title:s.title,bibtex:s.bibtex})),v=t.map(s=>{const m=ht(s,u);u.add(m);const h=s.match(/title\s*=\s*\{([^}]+)\}/i),x=s.match(/author\s*=\s*\{([^}]+)\}/i),w=s.match(/year\s*=\s*\{?(\d{4})\}?/i);let E=h?.[1]||"Untitled";return x&&(E=`${x[1].split(/\s+and\s+/i)[0].split(",")[0].trim()}${w?` (${w[1]})`:""}: ${E}`),{id:m,title:E,bibtex:s}});return[...g,...v]}function on(r,t,u){const g=r.map(m=>({id:m.id,name:m.name})),v=t.map(m=>({id:Ut(m.name),name:m.name})),s=u.map(m=>({id:Ut(m.name),name:m.name}));return[...g,...v,...s]}function ln(r){return{name:r.name,fullName:r.fullName||"",description:r.description||"",descriptionRefs:r.descriptionRefs||[],queries:r.properties?.queries||{},transformations:r.properties?.transformations||{},tags:(r.tags||[]).map(t=>({...t,color:t.color||"#6366f1"})),existingReferences:r.references?.map(t=>t.id)||[]}}function dn(r,t){const u=r.map(v=>({shortName:v.shortName,name:v.name,description:v.description})),g=t.map(v=>({shortName:v.shortName,name:v.name,description:v.description}));return[...u,...g]}var sn=_('<span class="text-sm font-bold text-gray-900"> </span>'),un=_('<span class="text-sm text-gray-600">( <!> )</span>'),cn=(r,t)=>t.onToggleExpand(t.index),gn=(r,t)=>t.onEdit(t.index),vn=(r,t)=>t.onDelete(t.index),fn=_("<div><!></div>"),bn=_('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function St(r,t){Ke(t,!0);let u=ge(t,"colorScheme",3,"purple"),g=ge(t,"isExpanded",3,!1),v=ge(t,"renderMathTitle",3,!0),s=ge(t,"renderMathSubtitle",3,!0);const h={purple:{border:"border-purple-300",bg:"bg-purple-50",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300",divider:"border-purple-200"},orange:{border:"border-orange-300",bg:"bg-orange-50",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200 text-orange-800 border-orange-300",divider:"border-orange-200"},green:{border:"border-green-300",bg:"bg-green-50",text:"text-green-800",button:"bg-green-100 hover:bg-green-200 text-green-800 border-green-300",divider:"border-green-200"},yellow:{border:"border-yellow-300",bg:"bg-yellow-50",text:"text-yellow-800",button:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300",divider:"border-yellow-200"},blue:{border:"border-blue-300",bg:"bg-blue-50",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200 text-blue-800 border-blue-300",divider:"border-blue-200"}}[u()];var x=bn(),w=i(x),E=i(w),p=i(E),M=i(p);a(p);var z=o(p,2);{var k=c=>{qe(c,{get text(){return t.title},className:"text-sm font-bold text-gray-900"})},A=c=>{var f=sn(),y=i(f,!0);a(f),D(()=>R(y,t.title)),b(c,f)};P(z,c=>{v()?c(k):c(A,!1)})}var Q=o(z,2);{var K=c=>{var f=un(),y=o(i(f));{var I=B=>{qe(B,{get text(){return t.subtitle},className:"inline"})},L=B=>{var Z=ar();D(()=>R(Z,t.subtitle)),b(B,Z)};P(y,B=>{s()?B(I):B(L,!1)})}ot(),a(f),b(c,f)};P(Q,c=>{t.subtitle&&c(K)})}a(E);var re=o(E,2),V=i(re);V.__click=[cn,t];var X=i(V,!0);a(V);var oe=o(V,2);oe.__click=[gn,t];var ue=o(oe,2);ue.__click=[vn,t],a(re),a(w);var te=o(w,2);{var F=c=>{var f=fn(),y=i(f);{var I=L=>{var B=Ge(),Z=He(B);rr(Z,()=>t.children),b(L,B)};P(y,L=>{t.children&&L(I)})}a(f),D(()=>Pe(f,1,`mt-4 pt-4 border-t ${h.divider??""}`)),b(c,f)};P(te,c=>{g()&&c(F)})}a(x),D(()=>{Pe(x,1,`border-2 ${h.border??""} ${h.bg??""} rounded-lg p-3`),Pe(p,1,`text-sm font-semibold ${h.text??""}`),R(M,`${t.type??""}:`),Pe(V,1,`px-2 py-1 text-xs ${h.button??""} rounded border`),Ne(V,"aria-label",g()?"Collapse":"Expand"),R(X,g()?"Collapse":"Expand")}),b(r,x),Xe()}lt(["click"]);var xn=_('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),mn=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),pn=_('<span class="inline-block bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs border border-gray-300"> </span>'),_n=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),yn=_('<div class="text-gray-500 text-xs"> </div>'),hn=_('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),wn=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),En=_('<div class="text-gray-500 text-xs"> </div>'),kn=_('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),Rn=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Sn=_('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div></div>'),In=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),Tn=_('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div> <!> <!> <!> <!> <!></div>');function pa(r,t){Ke(t,!0);let u=ge(t,"isExpanded",3,!1),g=ge(t,"isEdit",3,!1);const v=g()?"yellow":"green";{const s=h=>{var x=Tn(),w=i(x),E=o(i(w),2),p=i(E);qe(p,{get text(){return t.language.fullName},className:"text-gray-900 block"}),a(E),a(w);var M=o(w,2),z=o(i(M),2),k=i(z);qe(k,{get text(){return t.language.description},className:"text-gray-900 block"}),a(z),a(M);var A=o(M,2);{var Q=c=>{var f=mn(),y=i(f),I=i(y);a(y);var L=o(y,2);de(L,21,()=>t.language.descriptionRefs,se,(B,Z)=>{var q=xn(),H=i(q,!0);a(q),D(()=>R(H,e(Z))),b(B,q)}),a(L),a(f),D(()=>R(I,`Description References (${t.language.descriptionRefs.length??""}):`)),b(c,f)};P(A,c=>{t.language.descriptionRefs&&t.language.descriptionRefs.length>0&&c(Q)})}var K=o(A,2);{var re=c=>{var f=_n(),y=i(f),I=i(y);a(y);var L=o(y,2);de(L,21,()=>t.language.existingReferences,se,(B,Z)=>{var q=pn(),H=i(q,!0);a(q),D(()=>R(H,e(Z))),b(B,q)}),a(L),a(f),D(()=>R(I,`Existing References (${t.language.existingReferences.length??""}):`)),b(c,f)};P(K,c=>{t.language.existingReferences&&t.language.existingReferences.length>0&&c(re)})}var V=o(K,2);{var X=c=>{var f=wn(),y=i(f),I=i(y);a(y);var L=o(y,2);de(L,21,()=>Object.entries(t.language.queries),se,(B,Z)=>{var q=j(()=>ca(e(Z),2));let H=()=>e(q)[0],G=()=>e(q)[1];var Y=hn(),$=i(Y),ke=i($,!0);a($);var fe=o($,2),ne=i(fe,!0);a(fe);var ce=o(fe,2);{var Qe=le=>{qe(le,{get text(){return G().note},className:"text-gray-500 italic text-xs block"})};P(ce,le=>{G().note&&le(Qe)})}var me=o(ce,2);{var we=le=>{var he=yn(),Le=i(he);a(he),D(W=>R(Le,`Refs: [${W??""}]`),[()=>G().refs.join(", ")]),b(le,he)};P(me,le=>{G().refs.length>0&&le(we)})}a(Y),D(()=>{R(ke,H()),R(ne,G().complexity)}),b(B,Y)}),a(L),a(f),D(B=>R(I,`Query Support (${B??""}):`),[()=>Object.keys(t.language.queries).length]),b(c,f)};P(V,c=>{t.language.queries&&Object.keys(t.language.queries).length>0&&c(X)})}var oe=o(V,2);{var ue=c=>{var f=Rn(),y=i(f),I=i(y);a(y);var L=o(y,2);de(L,21,()=>Object.entries(t.language.transformations),se,(B,Z)=>{var q=j(()=>ca(e(Z),2));let H=()=>e(q)[0],G=()=>e(q)[1];var Y=kn(),$=i(Y),ke=i($,!0);a($);var fe=o($,2),ne=i(fe,!0);a(fe);var ce=o(fe,2);{var Qe=le=>{qe(le,{get text(){return G().note},className:"text-gray-500 italic text-xs block"})};P(ce,le=>{G().note&&le(Qe)})}var me=o(ce,2);{var we=le=>{var he=En(),Le=i(he);a(he),D(W=>R(Le,`Refs: [${W??""}]`),[()=>G().refs.join(", ")]),b(le,he)};P(me,le=>{G().refs.length>0&&le(we)})}a(Y),D(()=>{R(ke,H()),R(ne,G().complexity)}),b(B,Y)}),a(L),a(f),D(B=>R(I,`Transformation Support (${B??""}):`),[()=>Object.keys(t.language.transformations).length]),b(c,f)};P(oe,c=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&c(ue)})}var te=o(oe,2);{var F=c=>{var f=In(),y=i(f),I=i(y);a(y);var L=o(y,2);de(L,21,()=>t.language.tags,se,(B,Z)=>{var q=Sn(),H=i(q),G=i(H,!0);a(H);var Y=o(H,2),$=i(Y,!0);a(Y),a(q),D(()=>{R(G,e(Z).label),R($,e(Z).description||"No description")}),b(B,q)}),a(L),a(f),D(()=>R(I,`Tags (${t.language.tags.length??""}):`)),b(c,f)};P(te,c=>{t.language.tags.length>0&&c(F)})}a(x),b(h,x)};let m=j(()=>g()?"Edit Language":"New Language");St(r,{get type(){return e(m)},get title(){return t.language.name},get subtitle(){return t.language.description},get colorScheme(){return v},get index(){return t.index},get isExpanded(){return u()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:s,$$slots:{default:!0}})}Xe()}var Fn=_('<div><div class="font-semibold text-gray-700 mb-1">Title:</div> <div class="bg-white p-2 rounded border text-gray-900"> </div></div>'),Dn=_('<div><div class="font-semibold text-gray-700 mb-1">Author(s):</div> <div class="bg-white p-2 rounded border text-gray-900"> </div></div>'),An=_('<div><div class="font-semibold text-gray-700 mb-1">Year:</div> <div class="bg-white p-2 rounded border text-gray-900"> </div></div>'),Nn=_('<div><div class="font-semibold text-gray-700 mb-1">Entry Type:</div> <div class="bg-white p-2 rounded border"><span class="capitalize text-gray-600"> </span></div></div>'),Mn=_('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Generated ID:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-purple-700"> </span></div></div> <!> <!> <!> <!> <div><div class="font-semibold text-gray-700 mb-1">Raw BibTeX:</div> <pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto whitespace-pre-wrap"> </pre></div></div>');function Ln(r,t){Ke(t,!0);function u(h){const x={},w=h.match(/@(\w+)\s*\{/);w&&(x.type=w[1].toLowerCase());const E=h.match(/title\s*=\s*[{"]([^}"]+)[}"]/i);E&&(x.title=E[1].replace(/[{}]/g,""));const p=h.match(/author\s*=\s*[{"]([^}"]+)[}"]/i);p&&(x.author=p[1].replace(/[{}]/g,""));const M=h.match(/year\s*=\s*[{"]?(\d{4})[}"]?/i);return M&&(x.year=M[1]),x}let g=ge(t,"existingReferenceIds",19,()=>[]),v=ge(t,"isExpanded",3,!1);const s=u(t.reference),m=ht(t.reference,new Set(g()));{const h=w=>{var E=Mn(),p=i(E),M=o(i(p),2),z=i(M),k=i(z,!0);a(z),a(M),a(p);var A=o(p,2);{var Q=f=>{var y=Fn(),I=o(i(y),2),L=i(I,!0);a(I),a(y),D(()=>R(L,s.title)),b(f,y)};P(A,f=>{s.title&&f(Q)})}var K=o(A,2);{var re=f=>{var y=Dn(),I=o(i(y),2),L=i(I,!0);a(I),a(y),D(()=>R(L,s.author)),b(f,y)};P(K,f=>{s.author&&f(re)})}var V=o(K,2);{var X=f=>{var y=An(),I=o(i(y),2),L=i(I,!0);a(I),a(y),D(()=>R(L,s.year)),b(f,y)};P(V,f=>{s.year&&f(X)})}var oe=o(V,2);{var ue=f=>{var y=Nn(),I=o(i(y),2),L=i(I),B=i(L,!0);a(L),a(I),a(y),D(()=>R(B,s.type)),b(f,y)};P(oe,f=>{s.type&&f(ue)})}var te=o(oe,2),F=o(i(te),2),c=i(F,!0);a(F),a(te),a(E),D(()=>{R(k,m),R(c,t.reference)}),b(w,E)};let x=j(()=>s.title||"BibTeX entry");St(r,{type:"Reference",get title(){return m},get subtitle(){return e(x)},renderMathTitle:!1,renderMathSubtitle:!1,colorScheme:"purple",get index(){return t.index},get isExpanded(){return v()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:h,$$slots:{default:!0}})}Xe()}var On=_('<div><span class="text-xs font-semibold text-gray-700">Description:</span> <!></div>'),Cn=_('<div><span class="text-xs font-semibold text-gray-700">References:</span> <span class="text-xs text-gray-600 ml-2"> </span></div>'),jn=_('<div class="space-y-2"><div><span class="text-xs font-semibold text-gray-700">Short Name:</span> <!></div> <div><span class="text-xs font-semibold text-gray-700">Full Name:</span> <!></div> <!> <!></div>');function qn(r,t){Ke(t,!0),St(r,{type:"SF",get title(){return t.separatingFunction.shortName},get subtitle(){return t.separatingFunction.name},colorScheme:"orange",get index(){return t.index},get isExpanded(){return t.isExpanded},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:g=>{var v=jn(),s=i(v),m=o(i(s),2);qe(m,{get text(){return t.separatingFunction.shortName},className:"text-xs text-gray-900 ml-2 inline"}),a(s);var h=o(s,2),x=o(i(h),2);qe(x,{get text(){return t.separatingFunction.name},className:"text-xs text-gray-900 ml-2 inline"}),a(h);var w=o(h,2);{var E=z=>{var k=On(),A=o(i(k),2);qe(A,{get text(){return t.separatingFunction.description},className:"text-xs text-gray-700 mt-1 block"}),a(k),b(z,k)};P(w,z=>{t.separatingFunction.description&&z(E)})}var p=o(w,2);{var M=z=>{var k=Cn(),A=o(i(k),2),Q=i(A,!0);a(A),a(k),D(K=>R(Q,K),[()=>t.separatingFunction.refs.join(", ")]),b(z,k)};P(p,z=>{t.separatingFunction.refs&&t.separatingFunction.refs.length>0&&z(M)})}a(v),b(g,v)},$$slots:{default:!0}}),Xe()}var Pn=_('<div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div>'),Qn=_('<span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs border border-orange-300"> </span>'),zn=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Bn=_('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),Un=_('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Vn=_('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Source Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Target Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Classification:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!> <!></div>');function Hn(r,t){Ke(t,!0);let u=ge(t,"isExpanded",3,!1),g=ge(t,"isModified",3,!1);const v=new Map(t.languages.map(M=>[M.id,M.name])),s=$e(t.relationship.sourceId,t.relationship.targetId),m=v.get(t.relationship.sourceId)??t.relationship.sourceId,h=v.get(t.relationship.targetId)??t.relationship.targetId,x=`${m} → ${h}`;var w=Ge(),E=He(w);{var p=M=>{St(M,{type:"Relationship",get title(){return x},get subtitle(){return t.relationship.status},colorScheme:"blue",get index(){return t.index},get isExpanded(){return u()},get onToggleExpand(){return t.onToggleExpand},onEdit:()=>t.onEdit(t.index),onDelete:()=>t.onDelete(t.index,s),children:k=>{var A=Vn(),Q=i(A),K=o(i(Q),2),re=i(K);qe(re,{get text(){return m},className:"font-medium text-gray-900"}),a(K),a(Q);var V=o(Q,2),X=o(i(V),2),oe=i(X);qe(oe,{get text(){return h},className:"font-medium text-gray-900"}),a(X),a(V);var ue=o(V,2),te=o(i(ue),2),F=i(te),c=i(F,!0);a(F),a(te),a(ue);var f=o(ue,2);{var y=q=>{var H=Pn(),G=o(i(H),2),Y=i(G);qe(Y,{get text(){return t.relationship.description},className:"text-gray-700"}),a(G),a(H),b(q,H)};P(f,q=>{t.relationship.description&&q(y)})}var I=o(f,2);{var L=q=>{var H=zn(),G=i(H),Y=i(G);a(G);var $=o(G,2);de($,21,()=>t.relationship.separatingFunctionIds,se,(ke,fe)=>{var ne=Qn(),ce=i(ne,!0);a(ne),D(()=>R(ce,e(fe))),b(ke,ne)}),a($),a(H),D(()=>R(Y,`Separating Functions (${t.relationship.separatingFunctionIds.length??""}):`)),b(q,H)};P(I,q=>{t.relationship.separatingFunctionIds&&t.relationship.separatingFunctionIds.length>0&&q(L)})}var B=o(I,2);{var Z=q=>{var H=Un(),G=i(H),Y=i(G);a(G);var $=o(G,2);de($,21,()=>t.relationship.refs,se,(ke,fe)=>{var ne=Bn(),ce=i(ne,!0);a(ne),D(()=>R(ce,e(fe))),b(ke,ne)}),a($),a(H),D(()=>R(Y,`References (${t.relationship.refs.length??""}):`)),b(q,H)};P(B,q=>{t.relationship.refs&&t.relationship.refs.length>0&&q(Z)})}a(A),D(()=>R(c,t.relationship.status)),b(k,A)},$$slots:{default:!0}})};P(E,M=>{g()&&M(p)})}b(r,w),Xe()}var Kn=_('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),Xn=_(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!> <!></div></div>`);function Gn(r,t){Ke(t,!0);let u=ge(t,"existingReferenceIds",19,()=>[]);const g=j(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.newSeparatingFunctions.length>0||t.relationships.filter(k=>t.modifiedRelations.has($e(k.sourceId,k.targetId))).length>0);function v(k){const A=[...u()],Q=new Set(A);for(let K=0;K<k;K++){const re=ht(t.newReferences[K],Q);A.push(re),Q.add(re)}return A}var s=Xn(),m=o(i(s),4),h=i(m);de(h,17,()=>t.newReferences,se,(k,A,Q)=>{{let K=j(()=>v(Q)),re=j(()=>t.expandedReferenceIndex===Q);Ln(k,{get reference(){return e(A)},index:Q,get existingReferenceIds(){return e(K)},get isExpanded(){return e(re)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var x=o(h,2);de(x,17,()=>t.newSeparatingFunctions,se,(k,A,Q)=>{{let K=j(()=>t.expandedSeparatingFunctionIndex===Q);qn(k,{get separatingFunction(){return e(A)},index:Q,get isExpanded(){return e(K)},get onToggleExpand(){return t.onToggleExpandSeparatingFunction},get onEdit(){return t.onEditSeparatingFunction},get onDelete(){return t.onDeleteSeparatingFunction}})}});var w=o(x,2);de(w,17,()=>t.languagesToAdd,se,(k,A,Q)=>{{let K=j(()=>t.expandedLanguageToAddIndex===Q);pa(k,{get language(){return e(A)},index:Q,get isExpanded(){return e(K)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var E=o(w,2);de(E,17,()=>t.languagesToEdit,se,(k,A,Q)=>{{let K=j(()=>t.expandedLanguageToEditIndex===Q);pa(k,{get language(){return e(A)},index:Q,get isExpanded(){return e(K)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var p=o(E,2);de(p,17,()=>t.relationships,se,(k,A,Q)=>{const K=j(()=>t.modifiedRelations.has($e(e(A).sourceId,e(A).targetId)));{let re=j(()=>t.expandedRelationshipIndex===Q);Hn(k,{get languages(){return t.languages},get relationship(){return e(A)},index:Q,get isModified(){return e(K)},get isExpanded(){return e(re)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var M=o(p,2);{var z=k=>{var A=Kn();b(k,A)};P(M,k=>{e(g)||k(z)})}a(m),a(s),b(r,s),Xe()}var Yn=_('<div class="grid grid-cols-2 md:grid-cols-5 gap-3"><button type="button" class="px-3 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">New Language</button> <button type="button" class="px-3 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">Edit Language</button> <button type="button" class="px-3 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Relationship</button> <button type="button" class="px-3 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">Reference</button> <button type="button" class="px-3 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors">Separator</button></div>');function Jn(r,t){var u=Yn(),g=i(u);g.__click=function(...x){t.onAddLanguage?.apply(this,x)};var v=o(g,2);v.__click=function(...x){t.onEditLanguage?.apply(this,x)};var s=o(v,2);s.__click=function(...x){t.onManageRelationships?.apply(this,x)};var m=o(s,2);m.__click=function(...x){t.onAddReference?.apply(this,x)};var h=o(m,2);h.__click=function(...x){t.onAddSeparatingFunction?.apply(this,x)},a(u),b(r,u)}lt(["click"]);var Wn=_('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function Zn(r,t){let u=ge(t,"disabled",3,!1);var g=Wn(),v=i(g);ot(2),a(g),D(()=>v.disabled=u()),b(r,g)}function et(r){return typeof r=="string"}function wa(r){return Array.isArray(r)?r.filter(et):[]}function $n(r){return Array.isArray(r)?r.filter(t=>typeof t=="object"&&t!==null).map(t=>({label:et(t.label)?t.label:"",color:et(t.color)?t.color:"#6366f1",description:et(t.description)?t.description:void 0,refs:wa(t.refs)})):[]}function _a(r){return!et(r)||r.length===0||!/^[a-z0-9-]+$/i.test(r)?null:r}function We(r){return{name:r.name,fullName:r.fullName,description:r.description,descriptionRefs:[...r.descriptionRefs],queries:ma(r.queries),transformations:ma(r.transformations),tags:r.tags.map(t=>({label:t.label,color:t.color,description:t.description,refs:[...t.refs]})),existingReferences:[...r.existingReferences]}}function it(r){return{sourceId:r.sourceId,targetId:r.targetId,status:r.status,description:r.description,refs:[...r.refs],separatingFunctionIds:r.separatingFunctionIds?[...r.separatingFunctionIds]:void 0}}function yt(r){return{shortName:r.shortName,name:r.name,description:r.description,refs:[...r.refs]}}function zt(r){return{label:r.label,color:r.color,description:r.description,refs:[...r.refs]}}function Bt(r){switch(r.kind){case"language:new":case"language:edit":return{id:r.id,kind:r.kind,payload:We(r.payload)};case"relationship":return{id:r.id,kind:r.kind,payload:it(r.payload)};case"reference":return{id:r.id,kind:r.kind,payload:r.payload};case"separator":return{id:r.id,kind:r.kind,payload:yt(r.payload)}}}function pt(){const r=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`${r}-${t}`}function _t(){return`q-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,6)}`}function ei(r){const t=new Date(r),u=t.toLocaleString("en-US",{month:"short"}),g=t.getDate(),v=t.getFullYear(),s=t.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${u} ${g}, ${v} at ${s}`}function ti(r){const t=[];return r.summary.languagesToAdd&&t.push(`${r.summary.languagesToAdd} new language${r.summary.languagesToAdd===1?"":"s"}`),r.summary.languagesToEdit&&t.push(`${r.summary.languagesToEdit} edit${r.summary.languagesToEdit===1?"":"s"}`),r.summary.relationships&&t.push(`${r.summary.relationships} relation${r.summary.relationships===1?"":"s"}`),r.summary.newReferences&&t.push(`${r.summary.newReferences} reference${r.summary.newReferences===1?"":"s"}`),t.length>0?t.join(" · "):"No changes"}function ya(r,t,u){const g=!e(t);n(t,g),g&&n(u,Vt(),!0)}function ai(r,t){n(t,null)}var ri=_('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),ni=_('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),ii=_('<div class="text-xs font-medium text-amber-600">Superseded</div>'),oi=_('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),li=(r,t,u)=>t(e(u)),di=_('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),si=_('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),ui=_('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),ci=(r,t)=>n(t,!1),gi=r=>r.stopPropagation(),vi=_("<option> </option>"),fi=(r,t,u)=>{n(t,""),n(u,!1)},bi=(r,t,u,g)=>{e(t)&&(n(u,!1),n(g,!0))},xi=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),mi=_('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">🗂️</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!> <!>',1);function Ri(r,t){Ke(t,!0);function u(l){n(p,[...e(p),l],!0)}function g(l,d,T){n(p,e(p).map(U=>U.id===l&&U.kind===d?{...U,payload:T}:U),!0)}function v(l){n(p,e(p).filter(d=>d.id!==l),!0)}const s=Object.values(t.data.complexityOptions).filter(l=>!l.internal),m=t.data.relationTypes.filter(l=>!t.data.complexityOptions[l.id]?.internal).map(l=>({value:l.id,label:l.name,description:l.description??""})),h=nn(t.data.adjacencyMatrix);let x=S(""),w=S(""),E=S(""),p=S(Re([])),M=S(Re([])),z=S(Re([])),k=S(Re([])),A=S(null),Q=S(null),K=S(null),re=S(null),V=S(null),X=S(!1),oe=S(!1),ue=S(!1),te=S(""),F=S(!1),c=S(!1),f=S(!1),y=S(null),I=S(null),L=S(null),B=S(null),Z=S(null),q=S(Re(new Set)),H=S(!1),G=S(Re([])),Y=S(Re([])),$=S(Re([]));const ke=j(()=>e(M).map(l=>l.payload)),fe=j(()=>e(z).map(l=>l.payload)),ne=j(()=>e(G).map(l=>l.bibtex)),ce=j(()=>e(Y).map(l=>l.payload)),Qe=j(()=>e(k).map(l=>l.payload));let me=S(""),we=S(null),le=S(Re([])),he=S(!1);const Le=j(()=>e(p).length>0||e($).length>0||e(q).size>0);let W=!1;je(()=>{const l=e(Le);l&&!W&&!e(me)&&n(me,pt(),!0),!l&&W&&(n(me,pt(),!0),n(we,null)),W=l}),Ya(()=>{n(le,Vt(),!0);try{const l=Xa();l&&(n(p,l.entries.map(Bt),!0),n($,$n(l.customTags),!0),n(q,new Set(wa(l.modifiedRelations)),!0),n(me,_a(l.submissionId)??"",!0),n(we,_a(l.supersedesSubmissionId),!0));const d=localStorage.getItem(da);if(d){const T=JSON.parse(d);et(T?.email)&&n(x,T.email,!0),et(T?.github)&&n(w,T.github,!0),et(T?.note)&&n(E,T.note,!0)}}catch(l){console.warn("Failed to restore queued changes from storage",l)}finally{n(H,!0)}e(me)||n(me,pt(),!0)});function ie(l){const d=l(e(q));n(q,new Set(d),!0)}function ee(l){const d=$e(l.sourceId,l.targetId);ie(T=>{const U=new Set(T);return U.add(d),U})}function Ae(l){ie(d=>{if(!d.has(l))return d;const T=new Set(d);return T.delete(l),T})}je(()=>{const l=[],d=[],T=[],U=[],O=[];for(const C of e(p))switch(C.kind){case"language:new":l.push({queueEntryId:C.id,payload:We(C.payload)});break;case"language:edit":d.push({queueEntryId:C.id,payload:We(C.payload)});break;case"relationship":T.push({queueEntryId:C.id,payload:it(C.payload)});break;case"reference":U.push({queueEntryId:C.id,bibtex:C.payload});break;case"separator":O.push({queueEntryId:C.id,payload:yt(C.payload)});break}n(M,l,!0),n(z,d,!0),n(k,T,!0),n(G,U,!0),n(Y,O,!0)}),je(()=>{if(!e(H)||!qt)return;if(e(me)||n(me,pt(),!0),e(p).length===0&&e($).length===0&&e(q).size===0){try{localStorage.removeItem(la)}catch(T){console.warn("Failed to clear queued changes from storage",T)}n(we,null);return}const d={entries:e(p).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(q)),submissionId:e(me),supersedesSubmissionId:e(we)??null};try{localStorage.setItem(la,JSON.stringify(d))}catch(T){console.warn("Failed to persist queued changes",T)}}),je(()=>{if(!e(H)||!qt)return;const l={email:e(x),github:e(w),note:e(E)};try{localStorage.setItem(da,JSON.stringify(l))}catch(d){console.warn("Failed to persist contributor info",d)}}),je(()=>{if(!e(H)||!qt)return;if(!e(Le)){sa(null);return}const l={entries:e(p).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(q)),submissionId:e(me),supersedesSubmissionId:e(we)??null};try{const d=Ka(ua,l);sa(d)}catch(d){console.error("Failed to build preview dataset:",d)}});function ve(l){return u({id:_t(),kind:"language:new",payload:We(l)}),{success:!0}}function pe(l){const d=e(z).find(T=>T.payload.name===l.name);return d?g(d.queueEntryId,"language:edit",We(l)):u({id:_t(),kind:"language:edit",payload:We(l)}),{success:!0}}function J(l){u({id:_t(),kind:"reference",payload:l})}function N(l){u({id:_t(),kind:"separator",payload:yt(l)})}function Ee(l){n(I,l,!0),n(c,!0)}function ze(l){if(e(I)!==null){const d=e(Y)[e(I)];d&&g(d.queueEntryId,"separator",yt(l)),n(I,null)}}function Se(l){n(y,l,!0),n(F,!0)}function be(l){if(e(y)!==null){const d=e(G)[e(y)];d&&g(d.queueEntryId,"reference",l),n(y,null)}}function Oe(l){n(L,l,!0),n(X,!0)}function Ie(l){if(e(L)!==null){const d=e(M)[e(L)];d&&g(d.queueEntryId,"language:new",We(l)),n(L,null)}return{success:!0}}function Be(l){n(B,l,!0),n(oe,!0)}function Ue(l){if(e(B)!==null){const d=e(z)[e(B)];d&&g(d.queueEntryId,"language:edit",We(l)),n(B,null)}return{success:!0}}function gt(l){n(Z,l,!0),n(f,!0)}function Ve(l){if(e(Z)!==null){const d=e(k)[e(Z)];d&&(g(d.queueEntryId,"relationship",it(l)),ee(l)),n(Z,null)}}function tt(l){if(e(Z)!==null){Ve(l);return}const d=$e(l.sourceId,l.targetId),T=e(k).find(U=>$e(U.payload.sourceId,U.payload.targetId)===d);T?g(T.queueEntryId,"relationship",it(l)):u({id:_t(),kind:"relationship",payload:it(l)}),ee(l)}function at(l){const d=e(M)[l];d&&dt(d.queueEntryId,d.payload.name)}function Ye(l){const d=e(z)[l];d&&dt(d.queueEntryId,d.payload.name)}function vt(l){const d=e(k)[l];d&&(v(d.queueEntryId),Ae($e(d.payload.sourceId,d.payload.targetId)))}function dt(l,d){const T=Ut(d),U=e(k).filter(C=>C.payload.sourceId===T||C.payload.targetId===T).map(C=>C.queueEntryId),O=new Set([l,...U]);n(p,e(p).filter(C=>!O.has(C.id)),!0),ie(C=>{if(C.size===0)return C;const De=new Set(C);for(const ae of Array.from(De))(ae.startsWith(`${d}->`)||ae.endsWith(`->${d}`))&&De.delete(ae);return De})}function ye(l){const d=e(G)[l];if(!d)return;const T=new Set(t.data.existingReferences.map(O=>O.id));for(let O=0;O<l;O++){const C=ht(e(G)[O].bibtex,T);T.add(C)}const U=ht(d.bibtex,T);n(p,e(p).map(O=>{if(O.kind==="language:new"||O.kind==="language:edit"){if(!O.payload.descriptionRefs.includes(U))return O;const C=We(O.payload);return C.descriptionRefs=C.descriptionRefs.filter(De=>De!==U),{...O,payload:C}}if(O.kind==="relationship"){if(!O.payload.refs.includes(U))return O;const C=it(O.payload);return C.refs=C.refs.filter(De=>De!==U),{...O,payload:C}}if(O.kind==="separator"){if(!O.payload.refs.includes(U))return O;const C=yt(O.payload);return C.refs=C.refs.filter(De=>De!==U),{...O,payload:C}}return O}),!0),v(d.queueEntryId),n($,e($).map(O=>({...O,refs:O.refs.filter(C=>C!==U)})),!0)}function Te(l){const d=e(Y)[l];if(!d)return;const T=d.payload.shortName;v(d.queueEntryId),n(p,e(p).map(U=>{if(U.kind!=="relationship"||!U.payload.separatingFunctionIds||!U.payload.separatingFunctionIds.includes(T))return U;const O=it(U.payload);return O.separatingFunctionIds=(O.separatingFunctionIds||[]).filter(C=>C!==T),{...U,payload:O}}),!0)}function Fe(l){try{const d=l.payload;n(p,Ga(d),!0),n($,d.customTags.map(zt),!0),n(q,new Set(d.modifiedRelations),!0),n(x,d.contributor.email,!0),n(w,d.contributor.github,!0),n(E,d.contributor.note,!0),n(we,d.submissionId,!0),n(me,pt(),!0),n(le,Vt(),!0),n(he,!1),n(y,null),n(L,null),n(B,null),n(Z,null),n(A,null),n(Q,null),n(K,null),n(re,null)}catch(d){console.error("Failed to load submission from history",d),alert("Unable to load this submission. It was saved before ordered queues were supported.")}}function Me(l){l.preventDefault(),window.location.href="/"}var _e=mi();nr(l=>{or.title="Contribute - Knowledge Compilation Map"});var rt=He(_e),st=i(rt),Ht=o(i(st),2),Kt=o(i(Ht),2),It=i(Kt),Tt=i(It),Ft=o(i(Tt),2),Dt=i(Ft),Xt=o(i(Dt),2);Ze(Xt),a(Dt);var Gt=o(Dt,2),Yt=o(i(Gt),2);Ze(Yt),a(Gt),a(Ft);var Jt=o(Ft,2),Wt=o(i(Jt),2);wt(Wt),ot(2),a(Jt),a(Tt);var At=o(Tt,2),Zt=i(At);{var Ea=l=>{var d=ri(),T=o(i(d),2);T.__click=[ai,we],a(d),b(l,d)};P(Zt,l=>{e(we)&&l(Ea)})}var Nt=o(Zt,2);Nt.__click=[ya,he,le];var ka=o(i(Nt),2);a(Nt),a(At);var $t=o(At,2);{var Ra=l=>{var d=ui(),T=i(d),U=o(i(T),2);U.__click=[ya,he,le],a(T);var O=o(T,2);{var C=ae=>{var xe=ni();b(ae,xe)},De=ae=>{var xe=si();de(xe,21,()=>e(le),se,(Et,Je)=>{const ft=j(()=>ti(e(Je))),nt=j(()=>ei(e(Je).createdAt));var bt=di(),xt=i(bt),Mt=i(xt),Lt=i(Mt),Fa=i(Lt,!0);a(Lt);var Ot=o(Lt,2),Da=i(Ot,!0);a(Ot);var Aa=o(Ot,2);{var Na=ut=>{var kt=ii();b(ut,kt)},Ma=ut=>{var kt=Ge(),Oa=He(kt);{var Ca=Ct=>{var ja=oi();b(Ct,ja)};P(Oa,Ct=>{e(Je).payload.submissionId===e(we)&&Ct(Ca)},!0)}b(ut,kt)};P(Aa,ut=>{e(Je).supersededBySubmissionId?ut(Na):ut(Ma,!1)})}a(Mt);var La=o(Mt,2);La.__click=[li,Fe,Je],a(xt),a(bt),D(()=>{R(Fa,e(nt)),R(Da,e(ft))}),b(Et,bt)}),a(xe),b(ae,xe)};P(O,ae=>{e(le).length===0?ae(C):ae(De,!1)})}a(d),b(l,d)};P($t,l=>{e(he)&&l(Ra)})}var ea=o($t,2);{let l=j(()=>t.data.existingReferences.map(d=>d.id));Gn(ea,{get languages(){return ua.languages},get languagesToAdd(){return e(ke)},get languagesToEdit(){return e(fe)},get newReferences(){return e(ne)},get newSeparatingFunctions(){return e(ce)},get relationships(){return e(Qe)},get modifiedRelations(){return e(q)},get existingReferenceIds(){return e(l)},get expandedLanguageToAddIndex(){return e(A)},get expandedLanguageToEditIndex(){return e(Q)},get expandedReferenceIndex(){return e(re)},get expandedSeparatingFunctionIndex(){return e(V)},get expandedRelationshipIndex(){return e(K)},onToggleExpandLanguageToAdd:d=>n(A,e(A)===d?null:d,!0),onToggleExpandLanguageToEdit:d=>n(Q,e(Q)===d?null:d,!0),onToggleExpandReference:d=>n(re,e(re)===d?null:d,!0),onToggleExpandSeparatingFunction:d=>n(V,e(V)===d?null:d,!0),onToggleExpandRelationship:d=>n(K,e(K)===d?null:d,!0),onEditLanguageToAdd:Oe,onEditLanguageToEdit:Be,onDeleteLanguageToAdd:at,onDeleteLanguageToEdit:Ye,onEditReference:Se,onDeleteReference:ye,onEditSeparatingFunction:Ee,onDeleteSeparatingFunction:Te,onEditRelationship:gt,onDeleteRelationship:d=>vt(d)})}var ta=o(ea,2);Jn(ta,{onAddLanguage:()=>n(X,!0),onEditLanguage:()=>n(ue,!0),onManageRelationships:()=>n(f,!0),onAddReference:()=>n(F,!0),onAddSeparatingFunction:()=>n(c,!0)});var Sa=o(ta,2);{let l=j(()=>!e(Le));Zn(Sa,{get disabled(){return e(l)}})}a(It),a(Kt),a(Ht),a(st),a(rt);var aa=o(rt,2);{let l=j(()=>e(L)!==null?Ie:ve),d=j(()=>e(L)!==null),T=j(()=>e(L)!==null?e(M)[e(L)]?.payload:void 0),U=j(()=>Object.values(t.data.queries).map(xe=>({code:xe.code,name:xe.label}))),O=j(()=>Object.values(t.data.transformations).map(xe=>({code:xe.code,name:xe.label}))),C=j(()=>s.map(xe=>({value:xe.code,label:xe.label,description:xe.description||""}))),De=j(()=>[...t.data.existingTags,...e($)].map(xe=>({label:xe.label,color:xe.color||"#6366f1",description:"",refs:[]}))),ae=j(()=>Rt(t.data.existingReferences,e(ne)));va(aa,{onClose:()=>{n(X,!1),n(L,null)},get onAdd(){return e(l)},get isEdit(){return e(d)},get initialData(){return e(T)},get queries(){return e(U)},get transformations(){return e(O)},get complexityOptions(){return e(C)},get existingTags(){return e(De)},get availableRefs(){return e(ae)},get isOpen(){return e(X)},set isOpen(xe){n(X,xe,!0)}})}var ra=o(aa,2);{let l=j(()=>e(B)!==null?Ue:pe),d=j(()=>e(B)!==null?e(z)[e(B)]?.payload:e(te)?ln(t.data.languages.find(ae=>ae.name===e(te))):void 0),T=j(()=>Object.values(t.data.queries).map(ae=>({code:ae.code,name:ae.label}))),U=j(()=>Object.values(t.data.transformations).map(ae=>({code:ae.code,name:ae.label}))),O=j(()=>s.map(ae=>({value:ae.code,label:ae.label,description:ae.description||""}))),C=j(()=>[...t.data.existingTags,...e($)].map(ae=>({label:ae.label,color:ae.color||"#6366f1",description:"",refs:[]}))),De=j(()=>Rt(t.data.existingReferences,e(ne)));va(ra,{onClose:()=>{n(oe,!1),n(te,""),n(B,null)},get onAdd(){return e(l)},isEdit:!0,get initialData(){return e(d)},get queries(){return e(T)},get transformations(){return e(U)},get complexityOptions(){return e(O)},get existingTags(){return e(C)},get availableRefs(){return e(De)},get isOpen(){return e(oe)},set isOpen(ae){n(oe,ae,!0)}})}var na=o(ra,2);{var Ia=l=>{var d=xi();d.__click=[ci,ue];var T=i(d);T.__click=[gi];var U=o(i(T),2),O=o(i(U),2),C=i(O);C.value=C.__value="";var De=o(C);de(De,17,()=>t.data.languages,se,(Je,ft)=>{var nt=vi(),bt=i(nt,!0);a(nt);var xt={};D(()=>{R(bt,e(ft).name),xt!==(xt=e(ft).name)&&(nt.value=(nt.__value=e(ft).name)??"")}),b(Je,nt)}),a(O);var ae=o(O,2),xe=i(ae);xe.__click=[fi,te,ue];var Et=o(xe,2);Et.__click=[bi,te,ue,oe],a(ae),a(U),a(T),a(d),D(()=>Et.disabled=!e(te)),ct(O,()=>e(te),Je=>n(te,Je)),b(l,d)};P(na,l=>{e(ue)&&l(Ia)})}var ia=o(na,2);{let l=j(()=>e(y)!==null?be:J),d=j(()=>e(y)!==null?e(G)[e(y)]?.bibtex??"":""),T=j(()=>e(y)!==null);Or(ia,{onClose:()=>{n(F,!1),n(y,null)},get onAdd(){return e(l)},get initialValue(){return e(d)},get isEditMode(){return e(T)},get isOpen(){return e(F)},set isOpen(U){n(F,U,!0)}})}var oa=o(ia,2);{let l=j(()=>e(I)!==null?ze:N),d=j(()=>e(I)!==null?e(Y)[e(I)]?.payload:void 0),T=j(()=>Rt(t.data.existingReferences,e(ne))),U=j(()=>e(I)!==null);Br(oa,{onClose:()=>{n(c,!1),n(I,null)},get onAdd(){return e(l)},get initialValue(){return e(d)},get availableRefs(){return e(T)},get isEditMode(){return e(U)},get isOpen(){return e(c)},set isOpen(O){n(c,O,!0)}})}var Ta=o(oa,2);{let l=j(()=>e(Z)!==null?e(k)[e(Z)]?.payload:void 0),d=j(()=>on(t.data.languages,e(ke),e(fe))),T=j(()=>Rt(t.data.existingReferences,e(ne))),U=j(()=>dn(t.data.existingSeparatingFunctions,e(ce)));rn(Ta,{onClose:()=>{n(f,!1),n(Z,null)},onSave:tt,get initialData(){return e(l)},get languages(){return e(d)},get statusOptions(){return m},get availableRefs(){return e(T)},get availableSeparatingFunctions(){return e(U)},get baselineRelations(){return h},get isOpen(){return e(f)},set isOpen(O){n(f,O,!0)}})}D(()=>Pe(ka,0,`h-3 w-3 transition-transform ${e(he)?"rotate-180":""}`)),ir("submit",It,Me),Ce(Xt,()=>e(x),l=>n(x,l)),Ce(Yt,()=>e(w),l=>n(w,l)),Ce(Wt,()=>e(E),l=>n(E,l)),b(r,_e),Xe()}lt(["click"]);export{Ri as component,ki as universal};
