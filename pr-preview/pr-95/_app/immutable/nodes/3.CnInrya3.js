import{d as qa,a as jt,b as Pa,r as Qa,c as za,C as Ba,T as Ua,Q as Va,e as ce,i as ge,p as Ha,f as Ka,g as wt,h as Ut,M as Pe,j as qt,k as la,l as da,s as sa,m as Ga,n as ua,o as Vt,q as Xa,t as Ja}from"../chunks/By90ulNf.js";import"../chunks/DsnmJJEf.js";import{s as E,o as Wa}from"../chunks/BVtKIfkr.js";import{a$ as Ya,aT as Za,u as $a,r as er,h as tr,k as pt,be as ar,ba as lt,K as Ke,X as R,y as ke,a4 as qe,z as r,v as e,Z as Xe,_ as ze,Q as b,R as Ge,M as m,V as i,Y as a,al as ot,T as o,bf as gt,O as D,aW as M,aX as rr,a0 as nr,bg as ca,N as ir,bh as or,$ as lr}from"../chunks/B_N74zmh.js";import{p as me,i as j}from"../chunks/DOwogY83.js";import{r as Ze,s as Te,b as ct,a as Qe,c as dr}from"../chunks/CxGUFWFB.js";function Ce(n,t,s=t){var v=new WeakSet;Ya(n,"input",async c=>{var u=c?n.defaultValue:n.value;if(u=Pt(n)?Qt(u):u,s(u),pt!==null&&v.add(pt),await Za(),u!==(u=t())){var g=n.selectionStart,y=n.selectionEnd;n.value=u??"",y!==null&&(n.selectionStart=g,n.selectionEnd=Math.min(y,n.value.length))}}),(tr&&n.defaultValue!==n.value||$a(t)==null&&n.value)&&(s(Pt(n)?Qt(n.value):n.value),pt!==null&&v.add(pt)),er(()=>{var c=t();if(n===document.activeElement){var u=ar??pt;if(v.has(u))return}Pt(n)&&c===Qt(n.value)||n.type==="date"&&!c&&!n.value||c!==n.value&&(n.value=c??"")})}function Pt(n){var t=n.type;return t==="number"||t==="range"}function Qt(n){return n===""?null:+n}const ha={},sr=qa.separatingFunctions;for(const n of sr)ha[n.shortName]=n;const ur=Object.values(ha),cr=()=>{const n=jt.map(u=>u.name),t=Pa.map(u=>({id:u.id,title:u.title,bibtex:u.bibtex})),s=new Map;for(const u of jt)if(u.tags)for(const g of u.tags)s.has(g.label)||s.set(g.label,{label:g.label,color:g.color});const v=Array.from(s.values()),c=ur.map(u=>({shortName:u.shortName,name:u.name,description:u.description}));return{existingLanguageIds:n,existingReferences:t,existingSeparatingFunctions:c,existingTags:v,languages:jt,queries:Va,transformations:Ua,complexityOptions:Ba,adjacencyMatrix:za,relationTypes:Qa}},gr=!1,Si=Object.freeze(Object.defineProperty({__proto__:null,load:cr,prerender:gr},Symbol.toStringTag,{value:"Module"}));async function vr(n,t,s,v,c,u,g,y,x,h,k,_){if(!e(t).trim()||!e(s).trim()||!e(v).trim()){r(c,"Please fill out all required fields.");return}try{const U=await u.onAdd({name:e(t).trim(),fullName:e(s).trim(),description:e(v).trim(),descriptionRefs:e(g),queries:e(y),transformations:e(x),tags:e(h),existingReferences:e(k)}),V=U&&typeof U=="object"&&"success"in U?U:void 0;if(V&&!V.success){r(c,V.error??"Unable to add language. Please review your input.",!0);return}r(c,null),_(),u.onClose?.()}catch(U){r(c,U instanceof Error?U.message:"Unexpected error while adding the language.",!0)}}function ga(n,t,s){t(),s.onClose()}var fr=n=>n.stopPropagation(),br=m('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),xr=(n,t,s)=>t(e(s).id),mr=m('<button type="button"> </button>'),pr=m('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),_r=m("<option> </option>"),yr=(n,t,s,v)=>t(e(s).code,e(v).id),hr=m('<button type="button"> </button>'),wr=m('<div class="mt-2 flex flex-wrap gap-1"></div>'),Er=m('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),kr=m("<option> </option>"),Rr=(n,t,s,v)=>t(e(s).code,e(v).id),Ir=m('<button type="button"> </button>'),Sr=m('<div class="mt-2 flex flex-wrap gap-1"></div>'),Tr=m('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Fr=(n,t,s)=>t(e(s)),Dr=m('<button type="button"> </button>'),Ar=m('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),Nr=m(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function va(n,t){Ke(t,!0);let s=me(t,"isOpen",11,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"isEdit",3,!1),u=R(""),g=R(""),y=R(""),x=R(ke([])),h=R(ke({})),k=R(ke({})),_=R(ke([])),U=R(ke([])),V=R(null);qe(()=>{s()&&c()&&t.initialData&&(r(u,t.initialData.name,!0),r(g,t.initialData.fullName,!0),r(y,t.initialData.description,!0),r(x,[...t.initialData.descriptionRefs],!0),r(h,{...t.initialData.queries},!0),r(k,{...t.initialData.transformations},!0),r(_,[...t.initialData.tags],!0),r(U,[...t.initialData.existingReferences],!0),r(V,null))});function w(){r(u,""),r(g,""),r(y,""),r(x,[],!0),r(h,{},!0),r(k,{},!0),r(_,[],!0),r(U,[],!0),r(X,!1),r(W,!1),r(V,null)}function F(S){e(x).includes(S)?r(x,e(x).filter(f=>f!==S),!0):r(x,[...e(x),S],!0)}function C(S){e(_).some(f=>f.label===S.label)?r(_,e(_).filter(f=>f.label!==S.label),!0):r(_,[...e(_),S],!0)}function G(S,f){if(!e(h)[S])return;const p=e(h)[S].refs;p.includes(f)?e(h)[S].refs=p.filter(I=>I!==f):e(h)[S].refs=[...p,f],r(h,{...e(h)},!0)}function ae(S,f){if(!e(k)[S])return;const p=e(k)[S].refs;p.includes(f)?e(k)[S].refs=p.filter(I=>I!==f):e(k)[S].refs=[...p,f],r(k,{...e(k)},!0)}let X=R(!1),W=R(!1);qe(()=>{if(t.queries.length>0&&!e(X)){const S={};t.queries.forEach(f=>{if(c()&&t.initialData&&t.initialData.queries[f.code]){const p=t.initialData.queries[f.code];S[f.code]={complexity:p.complexity,note:p.note||"",refs:[...p.refs]}}else S[f.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(h,S,!0),r(X,!0)}}),qe(()=>{if(t.transformations.length>0&&!e(W)){const S={};t.transformations.forEach(f=>{if(c()&&t.initialData){let p=t.initialData.transformations[f.code];if(!p){const I=Object.keys(t.initialData.transformations).find(P=>t.initialData.transformations[P]!==void 0&&(P===f.code||f.code==="∧C"&&P==="AND_C"||f.code==="∧BC"&&P==="AND_BC"||f.code==="∨C"&&P==="OR_C"||f.code==="∨BC"&&P==="OR_BC"||f.code==="¬C"&&P==="NOT_C"));I&&(p=t.initialData.transformations[I])}S[f.code]=p?{complexity:p.complexity,note:p.note||"",refs:[...p.refs]}:{complexity:"unknown-to-us",note:"",refs:[]}}else S[f.code]={complexity:"unknown-to-us",note:"",refs:[]}}),r(k,S,!0),r(W,!0)}});var de=Xe(),se=ze(de);{var ne=S=>{var f=Nr();f.__click=[ga,w,t];var p=i(f);p.__click=[fr];var I=i(p),P=i(I),q=i(P);a(P),ot(2),a(I);var Q=o(I,2),K=i(Q);{var A=Y=>{var N=br(),Ie=i(N,!0);a(N),D(()=>E(Ie,e(V))),b(Y,N)};j(K,Y=>{e(V)&&Y(A)})}var z=o(K,2),H=o(i(z),2),J=i(H),$=o(i(J),2);Ze($),a(J);var Ee=o(J,2),fe=o(i(Ee),2);Ze(fe),a(Ee),a(H);var ee=o(H,2),ie=o(i(ee),2);gt(ie),a(ee);var Re=o(ee,2);{var ve=Y=>{var N=pr(),Ie=o(i(N),2);ce(Ie,21,v,ge,(Be,Fe)=>{var pe=mr();pe.__click=[xr,F,Fe];var je=i(pe,!0);a(pe),D(De=>{Qe(pe,1,De),Te(pe,"title",e(Fe).title),E(je,e(Fe).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(Fe).id)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),b(Be,pe)}),a(Ie),a(N),b(Y,N)};j(Re,Y=>{v().length>0&&Y(ve)})}a(z);var be=o(z,2),re=o(i(be),2);ce(re,21,()=>t.queries,ge,(Y,N)=>{var Ie=Xe(),Be=ze(Ie);{var Fe=pe=>{var je=Er(),De=i(je),Ue=i(De),Ve=i(Ue),vt=i(Ve,!0);a(Ve);var He=o(Ve,2);ce(He,21,()=>t.complexityOptions,ge,(we,Ae)=>{var Ne=_r(),Me=i(Ne,!0);a(Ne);var he={};D(()=>{E(Me,e(Ae).label),he!==(he=e(Ae).value)&&(Ne.value=(Ne.__value=e(Ae).value)??"")}),b(we,Ne)}),a(He),a(Ue);var tt=o(Ue,2),at=i(tt),Je=o(at,2);Ze(Je),a(tt),a(De);var ft=o(De,2);{var dt=we=>{var Ae=wr();ce(Ae,21,v,ge,(Ne,Me)=>{var he=hr();he.__click=[yr,G,N,Me];var rt=i(he,!0);a(he),D(st=>{Qe(he,1,st),Te(he,"title",e(Me).title),E(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(h)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Ne,he)}),a(Ae),b(we,Ae)};j(ft,we=>{v().length>0&&we(dt)})}a(je),D(()=>{Te(Ve,"for",`query-${e(N).code??""}-complexity`),E(vt,e(N).name),Te(He,"id",`query-${e(N).code??""}-complexity`),Te(at,"for",`query-${e(N).code??""}-note`),Te(Je,"id",`query-${e(N).code??""}-note`)}),ct(He,()=>e(h)[e(N).code].complexity,we=>e(h)[e(N).code].complexity=we),Ce(Je,()=>e(h)[e(N).code].note,we=>e(h)[e(N).code].note=we),b(pe,je)};j(Be,pe=>{e(h)[e(N).code]&&pe(Fe)})}b(Y,Ie)}),a(re),a(be);var ue=o(be,2),Se=o(i(ue),2);ce(Se,21,()=>t.transformations,ge,(Y,N)=>{var Ie=Xe(),Be=ze(Ie);{var Fe=pe=>{var je=Tr(),De=i(je),Ue=i(De),Ve=i(Ue),vt=i(Ve,!0);a(Ve);var He=o(Ve,2);ce(He,21,()=>t.complexityOptions,ge,(we,Ae)=>{var Ne=kr(),Me=i(Ne,!0);a(Ne);var he={};D(()=>{E(Me,e(Ae).label),he!==(he=e(Ae).value)&&(Ne.value=(Ne.__value=e(Ae).value)??"")}),b(we,Ne)}),a(He),a(Ue);var tt=o(Ue,2),at=i(tt),Je=o(at,2);Ze(Je),a(tt),a(De);var ft=o(De,2);{var dt=we=>{var Ae=Sr();ce(Ae,21,v,ge,(Ne,Me)=>{var he=Ir();he.__click=[Rr,ae,N,Me];var rt=i(he,!0);a(he),D(st=>{Qe(he,1,st),Te(he,"title",e(Me).title),E(rt,e(Me).id)},[()=>`px-2 py-0.5 text-xs rounded ${e(k)[e(N).code].refs.includes(e(Me).id)?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),b(Ne,he)}),a(Ae),b(we,Ae)};j(ft,we=>{v().length>0&&we(dt)})}a(je),D(()=>{Te(Ve,"for",`transform-${e(N).code??""}-complexity`),E(vt,e(N).name),Te(He,"id",`transform-${e(N).code??""}-complexity`),Te(at,"for",`transform-${e(N).code??""}-note`),Te(Je,"id",`transform-${e(N).code??""}-note`)}),ct(He,()=>e(k)[e(N).code].complexity,we=>e(k)[e(N).code].complexity=we),Ce(Je,()=>e(k)[e(N).code].note,we=>e(k)[e(N).code].note=we),b(pe,je)};j(Be,pe=>{e(k)[e(N).code]&&pe(Fe)})}b(Y,Ie)}),a(Se),a(ue);var Z=o(ue,2);{var le=Y=>{var N=Ar(),Ie=o(i(N),2);ce(Ie,21,()=>t.existingTags,ge,(Be,Fe)=>{var pe=Dr();pe.__click=[Fr,C,Fe];var je=i(pe,!0);a(pe),D((De,Ue)=>{Qe(pe,1,De),dr(pe,`background-color: ${e(Fe).color??""}; color: white; ${Ue??""}`),E(je,e(Fe).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(_).some(De=>De.label===e(Fe).label)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(_).some(De=>De.label===e(Fe).label)?`ring-color: ${e(Fe).color};`:""]),b(Be,pe)}),a(Ie),a(N),b(Y,N)};j(Z,Y=>{t.existingTags.length>0&&Y(le)})}var te=o(Z,2),Oe=i(te);Oe.__click=[ga,w,t];var xe=o(Oe,2);xe.__click=[vr,u,g,y,V,t,x,h,k,_,U,w];var ye=i(xe);a(xe),a(te),a(Q),a(p),a(f),D(Y=>{E(q,`${c()?"Edit":"Add New"} Language`),xe.disabled=Y,E(ye,`${c()?"Update":"Add"} Language`)},[()=>!e(u).trim()||!e(g).trim()||!e(y).trim()]),Ce($,()=>e(u),Y=>r(u,Y)),Ce(fe,()=>e(g),Y=>r(g,Y)),Ce(ie,()=>e(y),Y=>r(y,Y)),b(S,f)};j(se,S=>{s()&&S(ne)})}b(n,de),Ge()}lt(["click"]);function Lr(n,t,s,v,c,u,g){!e(t).trim()||!e(s).trim()||(v.onAdd({bibtex:e(t).trim(),title:e(s).trim(),href:e(c).trim()||"#"}),u(),g(!1))}function fa(n,t,s,v){t()||s(),v.onClose()}var Or=n=>n.stopPropagation(),Mr=(n,t)=>r(t,!e(t)),Cr=m('<div class="space-y-3"><div><label for="title-input" class="block text-xs font-medium text-gray-600 mb-1">Display Title (IEEE format)</label> <textarea id="title-input" rows="2" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></textarea></div> <div><label for="href-input" class="block text-xs font-medium text-gray-600 mb-1">URL</label> <input id="href-input" type="url" placeholder="https://..." class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"/></div></div>'),jr=m('<a target="_blank" rel="noreferrer noopener" class="text-xs text-blue-600 hover:underline mt-1 block truncate"> </a>'),qr=m('<p class="text-sm text-gray-800"> </p> <!>',1),Pr=m('<div class="bg-gray-50 border border-gray-200 rounded-lg p-4"><div class="flex items-center justify-between mb-2"><h4 class="text-sm font-semibold text-gray-700">Preview</h4> <button type="button" class="text-xs text-purple-600 hover:text-purple-800 font-medium"> </button></div> <!></div>'),Qr=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="6" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function zr(n,t){Ke(t,!0);let s=me(t,"isOpen",15,!1),v=me(t,"isEditMode",3,!1),c=R(ke(t.initialValue?.bibtex??"")),u=R(ke(t.initialValue?.title??"")),g=R(ke(t.initialValue?.href??"")),y=R(!1);qe(()=>{s()&&t.initialValue&&(r(c,t.initialValue.bibtex,!0),r(u,t.initialValue.title,!0),r(g,t.initialValue.href,!0))});const x=M(()=>{if(!e(c).trim())return null;try{return Ha(e(c))}catch{return null}});qe(()=>{e(x)&&!e(y)&&(r(u,e(x).title,!0),r(g,e(x).href,!0))});const h=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;function k(){r(c,""),r(u,""),r(g,""),r(y,!1)}var _=Xe(),U=ze(_);{var V=w=>{var F=Qr();F.__click=[fa,v,k,t];var C=i(F);C.__click=[Or];var G=i(C),ae=i(G),X=i(ae,!0);a(ae);var W=o(ae,2),de=i(W,!0);a(W),a(G);var se=o(G,2),ne=i(se),S=o(i(ne),2);gt(S),Te(S,"placeholder",h),ot(2),a(ne);var f=o(ne,2);{var p=K=>{var A=Pr(),z=i(A),H=o(i(z),2);H.__click=[Mr,y];var J=i(H);a(H),a(z);var $=o(z,2);{var Ee=ee=>{var ie=Cr(),Re=i(ie),ve=o(i(Re),2);gt(ve),a(Re);var be=o(Re,2),re=o(i(be),2);Ze(re),a(be),a(ie),Ce(ve,()=>e(u),ue=>r(u,ue)),Ce(re,()=>e(g),ue=>r(g,ue)),b(ee,ie)},fe=ee=>{var ie=qr(),Re=ze(ie),ve=i(Re,!0);a(Re);var be=o(Re,2);{var re=ue=>{var Se=jr(),Z=i(Se,!0);a(Se),D(()=>{Te(Se,"href",e(g)),E(Z,e(g))}),b(ue,Se)};j(be,ue=>{e(g)&&e(g)!=="#"&&ue(re)})}D(()=>E(ve,e(u)||e(x).title)),b(ee,ie)};j($,ee=>{e(y)?ee(Ee):ee(fe,!1)})}a(A),D(()=>E(J,`${e(y)?"Hide":"Edit"} details`)),b(K,A)};j(f,K=>{e(x)&&K(p)})}var I=o(f,2),P=i(I);P.__click=[fa,v,k,t];var q=o(P,2);q.__click=[Lr,c,u,t,g,k,s];var Q=i(q,!0);a(q),a(I),a(se),a(C),a(F),D(K=>{E(X,v()?"Edit Reference":"Add New Reference"),E(de,v()?"Update citation details":"Paste BibTeX citation"),q.disabled=K,E(Q,v()?"Update Reference":"Add Reference")},[()=>!e(c).trim()||!e(u).trim()]),Ce(S,()=>e(c),K=>r(c,K)),b(w,F)};j(U,w=>{s()&&w(V)})}b(n,_),Ge()}lt(["click"]);function Br(n,t,s,v,c,u,g,y,x){!e(t).trim()||!e(s).trim()||(v.onAdd({shortName:e(t).trim(),name:e(s).trim(),description:e(c).trim(),refs:e(u)}),g()||y(),x(!1))}function ba(n,t,s,v){t()||s(),v.onClose()}var Ur=n=>n.stopPropagation(),Vr=(n,t,s)=>t(e(s).id),Hr=m('<button type="button"> </button>'),Kr=m('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Gr=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-orange-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="sf-shortName" class="block text-sm font-medium text-gray-700 mb-2">Short Name <span class="text-red-500">*</span></label> <input id="sf-shortName" type="text" placeholder="e.g., Clique" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Brief label displayed on edges (e.g., "Clique", "PI")</p></div> <div><label for="sf-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name <span class="text-red-500">*</span></label> <input id="sf-name" type="text" placeholder="e.g., Clique Detection Instances" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"/> <p class="text-xs text-gray-500 mt-1">Full human-readable name</p></div> <div><label for="sf-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="sf-description" rows="3" placeholder="Describe what this function separates..." class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-y"></textarea></div> <!> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Xr(n,t){Ke(t,!0);let s=me(t,"isOpen",15,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"isEditMode",3,!1),u=R(""),g=R(""),y=R(""),x=R(ke([]));qe(()=>{s()&&t.initialValue&&(r(u,t.initialValue.shortName,!0),r(g,t.initialValue.name,!0),r(y,t.initialValue.description,!0),r(x,[...t.initialValue.refs],!0))});function h(){r(u,""),r(g,""),r(y,""),r(x,[],!0)}function k(w){e(x).includes(w)?r(x,e(x).filter(F=>F!==w),!0):r(x,[...e(x),w],!0)}var _=Xe(),U=ze(_);{var V=w=>{var F=Gr();F.__click=[ba,c,h,t];var C=i(F);C.__click=[Ur];var G=i(C),ae=i(G),X=i(ae,!0);a(ae);var W=o(ae,2),de=i(W,!0);a(W),a(G);var se=o(G,2),ne=i(se),S=o(i(ne),2);Ze(S),ot(2),a(ne);var f=o(ne,2),p=o(i(f),2);Ze(p),ot(2),a(f);var I=o(f,2),P=o(i(I),2);gt(P),a(I);var q=o(I,2);{var Q=J=>{var $=Kr(),Ee=o(i($),2);ce(Ee,21,v,ge,(fe,ee)=>{var ie=Hr();ie.__click=[Vr,k,ee];var Re=i(ie,!0);a(ie),D(ve=>{Qe(ie,1,ve),Te(ie,"title",e(ee).title),E(Re,e(ee).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(x).includes(e(ee).id)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(fe,ie)}),a(Ee),a($),b(J,$)};j(q,J=>{v().length>0&&J(Q)})}var K=o(q,2),A=i(K);A.__click=[ba,c,h,t];var z=o(A,2);z.__click=[Br,u,g,t,y,x,c,h,s];var H=i(z,!0);a(z),a(K),a(se),a(C),a(F),D(J=>{E(X,c()?"Edit Separating Function":"Add New Separating Function"),E(de,c()?"Update separating function details":"Define a new separating function"),z.disabled=J,E(H,c()?"Update Function":"Add Function")},[()=>!e(u).trim()||!e(g).trim()]),Ce(S,()=>e(u),J=>r(u,J)),Ce(p,()=>e(g),J=>r(g,J)),Ce(P,()=>e(y),J=>r(y,J)),b(w,F)};j(U,w=>{s()&&w(V)})}b(n,_),Ge()}lt(["click"]);function Jr(n,t,s,v,c,u,g,y,x,h){!e(t)||!e(s)||!e(v)||e(t)===e(s)||(c.onSave({sourceId:e(t),targetId:e(s),status:e(v),description:e(u)||void 0,refs:e(g),separatingFunctionIds:e(y).length>0?e(y):void 0}),x(),h(!1))}function xa(n,t,s){t(),s.onClose()}var Wr=n=>n.stopPropagation(),Yr=m("<option> </option>"),Zr=m("<option> </option>"),$r=m("<option> </option>"),en=m('<p class="text-xs text-gray-500 mt-1"> </p>'),tn=(n,t,s)=>t(e(s).id),an=m('<button type="button"> </button>'),rn=m('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),nn=(n,t,s)=>t(e(s).shortName),on=m('<button type="button"> </button>'),ln=m('<p class="text-xs text-gray-500 mt-2"> </p>'),dn=m('<fieldset class="border-t pt-4"><legend class="block text-sm font-medium text-gray-700 mb-2">Separating Functions (optional)</legend> <div class="flex flex-wrap gap-2"></div> <!></fieldset>'),sn=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <!> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function un(n,t){Ke(t,!0);let s=me(t,"isOpen",15,!1),v=me(t,"availableRefs",19,()=>[]),c=me(t,"availableSeparatingFunctions",19,()=>[]),u=me(t,"baselineRelations",19,()=>new Map),g=R(""),y=R(""),x=R(""),h=R(""),k=R(ke([])),_=R(ke([])),U=R(!1);qe(()=>{s()&&t.initialData?(r(U,!0),r(g,t.initialData.sourceId,!0),r(y,t.initialData.targetId,!0),r(x,t.initialData.status,!0),r(h,t.initialData.description||"",!0),r(k,[...t.initialData.refs],!0),r(_,t.initialData.separatingFunctionIds?[...t.initialData.separatingFunctionIds]:[],!0)):s()&&!t.initialData&&r(U,!1)}),qe(()=>{if(!e(U)&&e(g)&&e(y)&&e(g)!==e(y)){const X=`${e(g)}->${e(y)}`,W=u().get(X);W?(r(x,W.status,!0),r(h,W.description||"",!0),r(k,[...W.refs],!0),r(_,W.separatingFunctionIds?[...W.separatingFunctionIds]:[],!0)):(r(x,""),r(h,""),r(k,[],!0),r(_,[],!0))}});function V(){r(g,""),r(y,""),r(x,""),r(h,""),r(k,[],!0),r(_,[],!0),r(U,!1)}function w(X){e(k).includes(X)?r(k,e(k).filter(W=>W!==X),!0):r(k,[...e(k),X],!0)}function F(X){e(_).includes(X)?r(_,e(_).filter(W=>W!==X),!0):r(_,[...e(_),X],!0)}var C=Xe(),G=ze(C);{var ae=X=>{var W=sn();W.__click=[xa,V,t];var de=i(W);de.__click=[Wr];var se=o(i(de),2),ne=i(se),S=i(ne),f=o(i(S),2),p=i(f);p.value=p.__value="";var I=o(p);ce(I,17,()=>t.languages,ge,(Z,le)=>{var te=Yr(),Oe=i(te,!0);a(te);var xe={};D(()=>{E(Oe,e(le).name),xe!==(xe=e(le).id)&&(te.value=(te.__value=e(le).id)??"")}),b(Z,te)}),a(f),a(S);var P=o(S,2),q=o(i(P),2),Q=i(q);Q.value=Q.__value="";var K=o(Q);ce(K,17,()=>t.languages,ge,(Z,le)=>{var te=Zr(),Oe=i(te,!0);a(te);var xe={};D(()=>{te.disabled=e(le).id===e(g),E(Oe,e(le).name),xe!==(xe=e(le).id)&&(te.value=(te.__value=e(le).id)??"")}),b(Z,te)}),a(q),a(P),a(ne);var A=o(ne,2),z=o(i(A),2),H=i(z);H.value=H.__value="";var J=o(H);ce(J,17,()=>t.statusOptions,ge,(Z,le)=>{var te=$r(),Oe=i(te,!0);a(te);var xe={};D(()=>{E(Oe,e(le).label),xe!==(xe=e(le).value)&&(te.value=(te.__value=e(le).value)??"")}),b(Z,te)}),a(z);var $=o(z,2);{var Ee=Z=>{const le=M(()=>t.statusOptions.find(ye=>ye.value===e(x)));var te=Xe(),Oe=ze(te);{var xe=ye=>{var Y=en(),N=i(Y,!0);a(Y),D(()=>E(N,e(le).description)),b(ye,Y)};j(Oe,ye=>{e(le)&&ye(xe)})}b(Z,te)};j($,Z=>{e(x)&&Z(Ee)})}a(A);var fe=o(A,2),ee=o(i(fe),2);gt(ee),a(fe);var ie=o(fe,2);{var Re=Z=>{var le=rn(),te=o(i(le),2);ce(te,21,v,ge,(Oe,xe)=>{var ye=an();ye.__click=[tn,w,xe];var Y=i(ye,!0);a(ye),D(N=>{Qe(ye,1,N),Te(ye,"title",e(xe).title),E(Y,e(xe).id)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(k).includes(e(xe).id)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),b(Oe,ye)}),a(te),a(le),b(Z,le)};j(ie,Z=>{v().length>0&&Z(Re)})}var ve=o(ie,2);{var be=Z=>{var le=dn(),te=o(i(le),2);ce(te,21,c,ge,(ye,Y)=>{var N=on();N.__click=[nn,F,Y];var Ie=i(N,!0);a(N),D(Be=>{Qe(N,1,Be),Te(N,"title",e(Y).name),E(Ie,e(Y).shortName)},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(_).includes(e(Y).shortName)?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`]),b(ye,N)}),a(te);var Oe=o(te,2);{var xe=ye=>{var Y=ln(),N=i(Y);a(Y),D(Ie=>E(N,`Selected: ${Ie??""}`),[()=>e(_).join(", ")]),b(ye,Y)};j(Oe,ye=>{e(_).length>0&&ye(xe)})}a(le),b(Z,le)};j(ve,Z=>{c().length>0&&Z(be)})}var re=o(ve,2),ue=i(re);ue.__click=[xa,V,t];var Se=o(ue,2);Se.__click=[Jr,g,y,x,t,h,k,_,V,s],a(re),a(se),a(de),a(W),D(()=>Se.disabled=!e(g)||!e(y)||!e(x)||e(g)===e(y)),ct(f,()=>e(g),Z=>r(g,Z)),ct(q,()=>e(y),Z=>r(y,Z)),ct(z,()=>e(x),Z=>r(x,Z)),Ce(ee,()=>e(h),Z=>r(h,Z)),b(X,W)};j(G,X=>{s()&&X(ae)})}b(n,C),Ge()}lt(["click"]);function $e(n,t){return`${n}->${t}`}function ma(n,t=!1){const s={};if(n)for(const[v,c]of Object.entries(n)){const u=t?Ka(v):v;s[u]={complexity:c.complexity,note:c.note,refs:Array.isArray(c.refs)?[...c.refs]:[]}}return s}function cn(n){const t=new Map,{languageIds:s,matrix:v}=n;for(let c=0;c<s.length;c++)for(let u=0;u<s.length;u++){const g=v[c][u];if(g){const y=s[c],x=s[u],h=g.separatingFunctionIds&&Array.isArray(g.separatingFunctionIds)?[...g.separatingFunctionIds]:void 0;t.set($e(y,x),{status:g.status,description:g.description,refs:g.refs?[...g.refs]:[],separatingFunctionIds:h,derived:g.derived})}}return t}function Rt(n,t){const s=new Set(n.map(u=>u.id)),v=n.map(u=>({id:u.id,title:u.title,bibtex:u.bibtex})),c=t.map(u=>{const g=wt(u.bibtex,s);return s.add(g),{id:g,title:u.title,bibtex:u.bibtex}});return[...v,...c]}function gn(n,t,s){const v=n.map(g=>({id:g.id,name:g.name})),c=t.map(g=>({id:Ut(g.name),name:g.name})),u=s.map(g=>({id:Ut(g.name),name:g.name}));return[...v,...c,...u]}function vn(n){return{name:n.name,fullName:n.fullName||"",description:n.description||"",descriptionRefs:n.descriptionRefs||[],queries:n.properties?.queries||{},transformations:n.properties?.transformations||{},tags:(n.tags||[]).map(t=>({...t,color:t.color||"#6366f1"})),existingReferences:n.references?.map(t=>t.id)||[]}}function fn(n,t){const s=n.map(c=>({shortName:c.shortName,name:c.name,description:c.description})),v=t.map(c=>({shortName:c.shortName,name:c.name,description:c.description}));return[...s,...v]}var bn=m('<span class="text-sm font-bold text-gray-900"> </span>'),xn=m('<span class="text-sm text-gray-600">( <!> )</span>'),mn=(n,t)=>t.onToggleExpand(t.index),pn=(n,t)=>t.onEdit(t.index),_n=(n,t)=>t.onDelete(t.index),yn=m("<div><!></div>"),hn=m('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function It(n,t){Ke(t,!0);let s=me(t,"colorScheme",3,"purple"),v=me(t,"isExpanded",3,!1),c=me(t,"renderMathTitle",3,!0),u=me(t,"renderMathSubtitle",3,!0);const y={purple:{border:"border-purple-300",bg:"bg-purple-50",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300",divider:"border-purple-200"},orange:{border:"border-orange-300",bg:"bg-orange-50",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200 text-orange-800 border-orange-300",divider:"border-orange-200"},green:{border:"border-green-300",bg:"bg-green-50",text:"text-green-800",button:"bg-green-100 hover:bg-green-200 text-green-800 border-green-300",divider:"border-green-200"},yellow:{border:"border-yellow-300",bg:"bg-yellow-50",text:"text-yellow-800",button:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300",divider:"border-yellow-200"},blue:{border:"border-blue-300",bg:"bg-blue-50",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200 text-blue-800 border-blue-300",divider:"border-blue-200"}}[s()];var x=hn(),h=i(x),k=i(h),_=i(k),U=i(_);a(_);var V=o(_,2);{var w=f=>{Pe(f,{get text(){return t.title},className:"text-sm font-bold text-gray-900"})},F=f=>{var p=bn(),I=i(p,!0);a(p),D(()=>E(I,t.title)),b(f,p)};j(V,f=>{c()?f(w):f(F,!1)})}var C=o(V,2);{var G=f=>{var p=xn(),I=o(i(p));{var P=Q=>{Pe(Q,{get text(){return t.subtitle},className:"inline"})},q=Q=>{var K=rr();D(()=>E(K,t.subtitle)),b(Q,K)};j(I,Q=>{u()?Q(P):Q(q,!1)})}ot(),a(p),b(f,p)};j(C,f=>{t.subtitle&&f(G)})}a(k);var ae=o(k,2),X=i(ae);X.__click=[mn,t];var W=i(X,!0);a(X);var de=o(X,2);de.__click=[pn,t];var se=o(de,2);se.__click=[_n,t],a(ae),a(h);var ne=o(h,2);{var S=f=>{var p=yn(),I=i(p);{var P=q=>{var Q=Xe(),K=ze(Q);nr(K,()=>t.children),b(q,Q)};j(I,q=>{t.children&&q(P)})}a(p),D(()=>Qe(p,1,`mt-4 pt-4 border-t ${y.divider??""}`)),b(f,p)};j(ne,f=>{v()&&f(S)})}a(x),D(()=>{Qe(x,1,`border-2 ${y.border??""} ${y.bg??""} rounded-lg p-3`),Qe(_,1,`text-sm font-semibold ${y.text??""}`),E(U,`${t.type??""}:`),Qe(X,1,`px-2 py-1 text-xs ${y.button??""} rounded border`),Te(X,"aria-label",v()?"Collapse":"Expand"),E(W,v()?"Collapse":"Expand")}),b(n,x),Ge()}lt(["click"]);var wn=m('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),En=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),kn=m('<span class="inline-block bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs border border-gray-300"> </span>'),Rn=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),In=m('<div class="text-gray-500 text-xs"> </div>'),Sn=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),Tn=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Fn=m('<div class="text-gray-500 text-xs"> </div>'),Dn=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!> <!></div>'),An=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),Nn=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div></div>'),Ln=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),On=m('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div> <!> <!> <!> <!> <!></div>');function pa(n,t){Ke(t,!0);let s=me(t,"isExpanded",3,!1),v=me(t,"isEdit",3,!1);const c=v()?"yellow":"green";{const u=y=>{var x=On(),h=i(x),k=o(i(h),2),_=i(k);Pe(_,{get text(){return t.language.fullName},className:"text-gray-900 block"}),a(k),a(h);var U=o(h,2),V=o(i(U),2),w=i(V);Pe(w,{get text(){return t.language.description},className:"text-gray-900 block"}),a(V),a(U);var F=o(U,2);{var C=f=>{var p=En(),I=i(p),P=i(I);a(I);var q=o(I,2);ce(q,21,()=>t.language.descriptionRefs,ge,(Q,K)=>{var A=wn(),z=i(A,!0);a(A),D(()=>E(z,e(K))),b(Q,A)}),a(q),a(p),D(()=>E(P,`Description References (${t.language.descriptionRefs.length??""}):`)),b(f,p)};j(F,f=>{t.language.descriptionRefs&&t.language.descriptionRefs.length>0&&f(C)})}var G=o(F,2);{var ae=f=>{var p=Rn(),I=i(p),P=i(I);a(I);var q=o(I,2);ce(q,21,()=>t.language.existingReferences,ge,(Q,K)=>{var A=kn(),z=i(A,!0);a(A),D(()=>E(z,e(K))),b(Q,A)}),a(q),a(p),D(()=>E(P,`Existing References (${t.language.existingReferences.length??""}):`)),b(f,p)};j(G,f=>{t.language.existingReferences&&t.language.existingReferences.length>0&&f(ae)})}var X=o(G,2);{var W=f=>{var p=Tn(),I=i(p),P=i(I);a(I);var q=o(I,2);ce(q,21,()=>Object.entries(t.language.queries),ge,(Q,K)=>{var A=M(()=>ca(e(K),2));let z=()=>e(A)[0],H=()=>e(A)[1];var J=Sn(),$=i(J),Ee=i($,!0);a($);var fe=o($,2),ee=i(fe,!0);a(fe);var ie=o(fe,2);{var Re=re=>{Pe(re,{get text(){return H().note},className:"text-gray-500 italic text-xs block"})};j(ie,re=>{H().note&&re(Re)})}var ve=o(ie,2);{var be=re=>{var ue=In(),Se=i(ue);a(ue),D(Z=>E(Se,`Refs: [${Z??""}]`),[()=>H().refs.join(", ")]),b(re,ue)};j(ve,re=>{H().refs.length>0&&re(be)})}a(J),D(()=>{E(Ee,z()),E(ee,H().complexity)}),b(Q,J)}),a(q),a(p),D(Q=>E(P,`Query Support (${Q??""}):`),[()=>Object.keys(t.language.queries).length]),b(f,p)};j(X,f=>{t.language.queries&&Object.keys(t.language.queries).length>0&&f(W)})}var de=o(X,2);{var se=f=>{var p=An(),I=i(p),P=i(I);a(I);var q=o(I,2);ce(q,21,()=>Object.entries(t.language.transformations),ge,(Q,K)=>{var A=M(()=>ca(e(K),2));let z=()=>e(A)[0],H=()=>e(A)[1];var J=Dn(),$=i(J),Ee=i($,!0);a($);var fe=o($,2),ee=i(fe,!0);a(fe);var ie=o(fe,2);{var Re=re=>{Pe(re,{get text(){return H().note},className:"text-gray-500 italic text-xs block"})};j(ie,re=>{H().note&&re(Re)})}var ve=o(ie,2);{var be=re=>{var ue=Fn(),Se=i(ue);a(ue),D(Z=>E(Se,`Refs: [${Z??""}]`),[()=>H().refs.join(", ")]),b(re,ue)};j(ve,re=>{H().refs.length>0&&re(be)})}a(J),D(()=>{E(Ee,z()),E(ee,H().complexity)}),b(Q,J)}),a(q),a(p),D(Q=>E(P,`Transformation Support (${Q??""}):`),[()=>Object.keys(t.language.transformations).length]),b(f,p)};j(de,f=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&f(se)})}var ne=o(de,2);{var S=f=>{var p=Ln(),I=i(p),P=i(I);a(I);var q=o(I,2);ce(q,21,()=>t.language.tags,ge,(Q,K)=>{var A=Nn(),z=i(A),H=i(z,!0);a(z);var J=o(z,2),$=i(J,!0);a(J),a(A),D(()=>{E(H,e(K).label),E($,e(K).description||"No description")}),b(Q,A)}),a(q),a(p),D(()=>E(P,`Tags (${t.language.tags.length??""}):`)),b(f,p)};j(ne,f=>{t.language.tags.length>0&&f(S)})}a(x),b(y,x)};let g=M(()=>v()?"Edit Language":"New Language");It(n,{get type(){return e(g)},get title(){return t.language.name},get subtitle(){return t.language.description},get colorScheme(){return c},get index(){return t.index},get isExpanded(){return s()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:u,$$slots:{default:!0}})}Ge()}var Mn=m('<div><div class="font-semibold text-gray-700 mb-1">URL:</div> <div class="bg-white p-2 rounded border"><a target="_blank" rel="noreferrer noopener" class="text-blue-600 hover:underline break-all"> </a></div></div>'),Cn=m('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Generated ID:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-purple-700"> </span></div></div> <div><div class="font-semibold text-gray-700 mb-1">Display Title:</div> <div class="bg-white p-2 rounded border text-gray-900"> </div></div> <!> <details><summary class="font-semibold text-gray-700 mb-1 cursor-pointer hover:text-gray-900">Raw BibTeX</summary> <pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto whitespace-pre-wrap mt-1"> </pre></details></div>');function jn(n,t){Ke(t,!0);let s=me(t,"existingReferenceIds",19,()=>[]),v=me(t,"isExpanded",3,!1);const c=wt(t.reference.bibtex,new Set(s()));{const u=y=>{var x=Cn(),h=i(x),k=o(i(h),2),_=i(k),U=i(_,!0);a(_),a(k),a(h);var V=o(h,2),w=o(i(V),2),F=i(w,!0);a(w),a(V);var C=o(V,2);{var G=de=>{var se=Mn(),ne=o(i(se),2),S=i(ne),f=i(S,!0);a(S),a(ne),a(se),D(()=>{Te(S,"href",t.reference.href),E(f,t.reference.href)}),b(de,se)};j(C,de=>{t.reference.href&&t.reference.href!=="#"&&de(G)})}var ae=o(C,2),X=o(i(ae),2),W=i(X,!0);a(X),a(ae),a(x),D(()=>{E(U,c),E(F,t.reference.title),E(W,t.reference.bibtex)}),b(y,x)};let g=M(()=>t.reference.title.slice(0,60)+(t.reference.title.length>60?"...":""));It(n,{type:"Reference",get title(){return c},get subtitle(){return e(g)},renderMathTitle:!1,renderMathSubtitle:!1,colorScheme:"purple",get index(){return t.index},get isExpanded(){return v()},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:u,$$slots:{default:!0}})}Ge()}var qn=m('<div><span class="text-xs font-semibold text-gray-700">Description:</span> <!></div>'),Pn=m('<div><span class="text-xs font-semibold text-gray-700">References:</span> <span class="text-xs text-gray-600 ml-2"> </span></div>'),Qn=m('<div class="space-y-2"><div><span class="text-xs font-semibold text-gray-700">Short Name:</span> <!></div> <div><span class="text-xs font-semibold text-gray-700">Full Name:</span> <!></div> <!> <!></div>');function zn(n,t){Ke(t,!0),It(n,{type:"SF",get title(){return t.separatingFunction.shortName},get subtitle(){return t.separatingFunction.name},colorScheme:"orange",get index(){return t.index},get isExpanded(){return t.isExpanded},get onToggleExpand(){return t.onToggleExpand},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete},children:v=>{var c=Qn(),u=i(c),g=o(i(u),2);Pe(g,{get text(){return t.separatingFunction.shortName},className:"text-xs text-gray-900 ml-2 inline"}),a(u);var y=o(u,2),x=o(i(y),2);Pe(x,{get text(){return t.separatingFunction.name},className:"text-xs text-gray-900 ml-2 inline"}),a(y);var h=o(y,2);{var k=V=>{var w=qn(),F=o(i(w),2);Pe(F,{get text(){return t.separatingFunction.description},className:"text-xs text-gray-700 mt-1 block"}),a(w),b(V,w)};j(h,V=>{t.separatingFunction.description&&V(k)})}var _=o(h,2);{var U=V=>{var w=Pn(),F=o(i(w),2),C=i(F,!0);a(F),a(w),D(G=>E(C,G),[()=>t.separatingFunction.refs.join(", ")]),b(V,w)};j(_,V=>{t.separatingFunction.refs&&t.separatingFunction.refs.length>0&&V(U)})}a(c),b(v,c)},$$slots:{default:!0}}),Ge()}var Bn=m('<div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="bg-white p-2 rounded border"><!></div></div>'),Un=m('<span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs border border-orange-300"> </span>'),Vn=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Hn=m('<span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs border border-purple-300"> </span>'),Kn=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Gn=m('<div class="space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Source Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Target Language:</div> <div class="bg-white p-2 rounded border"><!></div></div> <div><div class="font-semibold text-gray-700 mb-1">Classification:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!> <!></div>');function Xn(n,t){Ke(t,!0);let s=me(t,"isExpanded",3,!1),v=me(t,"isModified",3,!1);const c=new Map(t.languages.map(U=>[U.id,U.name])),u=$e(t.relationship.sourceId,t.relationship.targetId),g=c.get(t.relationship.sourceId)??t.relationship.sourceId,y=c.get(t.relationship.targetId)??t.relationship.targetId,x=`${g} → ${y}`;var h=Xe(),k=ze(h);{var _=U=>{It(U,{type:"Relationship",get title(){return x},get subtitle(){return t.relationship.status},colorScheme:"blue",get index(){return t.index},get isExpanded(){return s()},get onToggleExpand(){return t.onToggleExpand},onEdit:()=>t.onEdit(t.index),onDelete:()=>t.onDelete(t.index,u),children:w=>{var F=Gn(),C=i(F),G=o(i(C),2),ae=i(G);Pe(ae,{get text(){return g},className:"font-medium text-gray-900"}),a(G),a(C);var X=o(C,2),W=o(i(X),2),de=i(W);Pe(de,{get text(){return y},className:"font-medium text-gray-900"}),a(W),a(X);var se=o(X,2),ne=o(i(se),2),S=i(ne),f=i(S,!0);a(S),a(ne),a(se);var p=o(se,2);{var I=A=>{var z=Bn(),H=o(i(z),2),J=i(H);Pe(J,{get text(){return t.relationship.description},className:"text-gray-700"}),a(H),a(z),b(A,z)};j(p,A=>{t.relationship.description&&A(I)})}var P=o(p,2);{var q=A=>{var z=Vn(),H=i(z),J=i(H);a(H);var $=o(H,2);ce($,21,()=>t.relationship.separatingFunctionIds,ge,(Ee,fe)=>{var ee=Un(),ie=i(ee,!0);a(ee),D(()=>E(ie,e(fe))),b(Ee,ee)}),a($),a(z),D(()=>E(J,`Separating Functions (${t.relationship.separatingFunctionIds.length??""}):`)),b(A,z)};j(P,A=>{t.relationship.separatingFunctionIds&&t.relationship.separatingFunctionIds.length>0&&A(q)})}var Q=o(P,2);{var K=A=>{var z=Kn(),H=i(z),J=i(H);a(H);var $=o(H,2);ce($,21,()=>t.relationship.refs,ge,(Ee,fe)=>{var ee=Hn(),ie=i(ee,!0);a(ee),D(()=>E(ie,e(fe))),b(Ee,ee)}),a($),a(z),D(()=>E(J,`References (${t.relationship.refs.length??""}):`)),b(A,z)};j(Q,A=>{t.relationship.refs&&t.relationship.refs.length>0&&A(K)})}a(F),D(()=>E(f,t.relationship.status)),b(w,F)},$$slots:{default:!0}})};j(k,U=>{v()&&U(_)})}b(n,h),Ge()}var Jn=m('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),Wn=m(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!> <!></div></div>`);function Yn(n,t){Ke(t,!0);let s=me(t,"existingReferenceIds",19,()=>[]);const v=M(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.newSeparatingFunctions.length>0||t.relationships.filter(w=>t.modifiedRelations.has($e(w.sourceId,w.targetId))).length>0);function c(w){const F=[...s()],C=new Set(F);for(let G=0;G<w;G++){const ae=wt(t.newReferences[G].bibtex,C);F.push(ae),C.add(ae)}return F}var u=Wn(),g=o(i(u),4),y=i(g);ce(y,17,()=>t.newReferences,ge,(w,F,C)=>{{let G=M(()=>c(C)),ae=M(()=>t.expandedReferenceIndex===C);jn(w,{get reference(){return e(F)},index:C,get existingReferenceIds(){return e(G)},get isExpanded(){return e(ae)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var x=o(y,2);ce(x,17,()=>t.newSeparatingFunctions,ge,(w,F,C)=>{{let G=M(()=>t.expandedSeparatingFunctionIndex===C);zn(w,{get separatingFunction(){return e(F)},index:C,get isExpanded(){return e(G)},get onToggleExpand(){return t.onToggleExpandSeparatingFunction},get onEdit(){return t.onEditSeparatingFunction},get onDelete(){return t.onDeleteSeparatingFunction}})}});var h=o(x,2);ce(h,17,()=>t.languagesToAdd,ge,(w,F,C)=>{{let G=M(()=>t.expandedLanguageToAddIndex===C);pa(w,{get language(){return e(F)},index:C,get isExpanded(){return e(G)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var k=o(h,2);ce(k,17,()=>t.languagesToEdit,ge,(w,F,C)=>{{let G=M(()=>t.expandedLanguageToEditIndex===C);pa(w,{get language(){return e(F)},index:C,get isExpanded(){return e(G)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var _=o(k,2);ce(_,17,()=>t.relationships,ge,(w,F,C)=>{const G=M(()=>t.modifiedRelations.has($e(e(F).sourceId,e(F).targetId)));{let ae=M(()=>t.expandedRelationshipIndex===C);Xn(w,{get languages(){return t.languages},get relationship(){return e(F)},index:C,get isModified(){return e(G)},get isExpanded(){return e(ae)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var U=o(_,2);{var V=w=>{var F=Jn();b(w,F)};j(U,w=>{e(v)||w(V)})}a(g),a(u),b(n,u),Ge()}var Zn=m('<div class="grid grid-cols-2 md:grid-cols-5 gap-3"><button type="button" class="px-3 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">New Language</button> <button type="button" class="px-3 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">Edit Language</button> <button type="button" class="px-3 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Relationship</button> <button type="button" class="px-3 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">Reference</button> <button type="button" class="px-3 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors">Separator</button></div>');function $n(n,t){var s=Zn(),v=i(s);v.__click=function(...x){t.onAddLanguage?.apply(this,x)};var c=o(v,2);c.__click=function(...x){t.onEditLanguage?.apply(this,x)};var u=o(c,2);u.__click=function(...x){t.onManageRelationships?.apply(this,x)};var g=o(u,2);g.__click=function(...x){t.onAddReference?.apply(this,x)};var y=o(g,2);y.__click=function(...x){t.onAddSeparatingFunction?.apply(this,x)},a(s),b(n,s)}lt(["click"]);var ei=m('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Changes</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes on the graph before submitting</p></div>');function ti(n,t){let s=me(t,"disabled",3,!1);var v=ei(),c=i(v);ot(2),a(v),D(()=>c.disabled=s()),b(n,v)}function et(n){return typeof n=="string"}function wa(n){return Array.isArray(n)?n.filter(et):[]}function ai(n){return Array.isArray(n)?n.filter(t=>typeof t=="object"&&t!==null).map(t=>({label:et(t.label)?t.label:"",color:et(t.color)?t.color:"#6366f1",description:et(t.description)?t.description:void 0,refs:wa(t.refs)})):[]}function _a(n){return!et(n)||n.length===0||!/^[a-z0-9-]+$/i.test(n)?null:n}function Ye(n){return{name:n.name,fullName:n.fullName,description:n.description,descriptionRefs:[...n.descriptionRefs],queries:ma(n.queries),transformations:ma(n.transformations),tags:n.tags.map(t=>({label:t.label,color:t.color,description:t.description,refs:[...t.refs]})),existingReferences:[...n.existingReferences]}}function it(n){return{sourceId:n.sourceId,targetId:n.targetId,status:n.status,description:n.description,refs:[...n.refs],separatingFunctionIds:n.separatingFunctionIds?[...n.separatingFunctionIds]:void 0}}function ht(n){return{shortName:n.shortName,name:n.name,description:n.description,refs:[...n.refs]}}function zt(n){return{label:n.label,color:n.color,description:n.description,refs:[...n.refs]}}function Bt(n){switch(n.kind){case"language:new":case"language:edit":return{id:n.id,kind:n.kind,payload:Ye(n.payload)};case"relationship":return{id:n.id,kind:n.kind,payload:it(n.payload)};case"reference":return{id:n.id,kind:n.kind,payload:n.payload};case"separator":return{id:n.id,kind:n.kind,payload:ht(n.payload)}}}function _t(){const n=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`${n}-${t}`}function yt(){return`q-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,6)}`}function ri(n){const t=new Date(n),s=t.toLocaleString("en-US",{month:"short"}),v=t.getDate(),c=t.getFullYear(),u=t.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${s} ${v}, ${c} at ${u}`}function ni(n){const t=[];return n.summary.languagesToAdd&&t.push(`${n.summary.languagesToAdd} new language${n.summary.languagesToAdd===1?"":"s"}`),n.summary.languagesToEdit&&t.push(`${n.summary.languagesToEdit} edit${n.summary.languagesToEdit===1?"":"s"}`),n.summary.relationships&&t.push(`${n.summary.relationships} relation${n.summary.relationships===1?"":"s"}`),n.summary.newReferences&&t.push(`${n.summary.newReferences} reference${n.summary.newReferences===1?"":"s"}`),t.length>0?t.join(" · "):"No changes"}function ya(n,t,s){const v=!e(t);r(t,v),v&&r(s,Vt(),!0)}function ii(n,t){r(t,null)}var oi=m('<div class="mr-auto mb-3 flex items-center gap-3 rounded-lg border border-amber-300 bg-amber-50 px-4 py-2 text-sm text-amber-800 shadow-sm"><span class="font-medium">Editing prior submission</span> <button type="button" class="rounded-md border border-amber-400 px-2 py-1 text-xs font-semibold text-amber-700 transition-colors hover:bg-amber-100">Stop</button></div>'),li=m('<p class="text-sm text-gray-500">No saved submissions yet. Submit once to keep a snapshot.</p>'),di=m('<div class="text-xs font-medium text-amber-600">Superseded</div>'),si=m('<div class="text-xs font-medium text-emerald-600">Currently editing clone</div>'),ui=(n,t,s)=>t(e(s)),ci=m('<li class="rounded-md border border-gray-200 bg-white px-3 py-2 shadow-sm"><div class="flex items-start justify-between gap-3"><div class="space-y-1"><div class="text-sm font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div> <!></div> <button type="button" class="rounded-md border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-50">Load</button></div></li>'),gi=m('<ul class="space-y-3 max-h-64 overflow-y-auto pr-1"></ul>'),vi=m('<div class="mb-6 rounded-lg border border-gray-200 bg-gradient-to-br from-gray-50 to-white p-4 shadow-sm"><div class="mb-3 flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-800">Previous submissions</h3> <button type="button" class="rounded-md px-2 py-1 text-xs font-medium text-gray-500 hover:bg-gray-200/70 hover:text-gray-700">Close</button></div> <!></div>'),fi=(n,t)=>r(t,!1),bi=n=>n.stopPropagation(),xi=m("<option> </option>"),mi=(n,t,s)=>{r(t,""),r(s,!1)},pi=(n,t,s,v)=>{e(t)&&(r(s,!1),r(v,!0))},_i=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),yi=m('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-4xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p> <p class="mt-4"><a href="https://github.com/dkahdian/kcm" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> View on GitHub</a></p></div> <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <div class="flex justify-end"><!> <button type="button" class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-300 px-3 py-1 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:border-blue-400 hover:text-blue-600"><span aria-hidden="true">🗂️</span> Submission history <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <!> <!>  <!> <!></form></div></div></div></div> <!> <!> <!> <!> <!> <!>',1);function Ti(n,t){Ke(t,!0);function s(l){r(_,[...e(_),l],!0)}function v(l,d,T){r(_,e(_).map(B=>B.id===l&&B.kind===d?{...B,payload:T}:B),!0)}function c(l){r(_,e(_).filter(d=>d.id!==l),!0)}const u=Object.values(t.data.complexityOptions).filter(l=>!l.internal),g=t.data.relationTypes.filter(l=>!t.data.complexityOptions[l.id]?.internal).map(l=>({value:l.id,label:l.name,description:l.description??""})),y=cn(t.data.adjacencyMatrix);let x=R(""),h=R(""),k=R(""),_=R(ke([])),U=R(ke([])),V=R(ke([])),w=R(ke([])),F=R(null),C=R(null),G=R(null),ae=R(null),X=R(null),W=R(!1),de=R(!1),se=R(!1),ne=R(""),S=R(!1),f=R(!1),p=R(!1),I=R(null),P=R(null),q=R(null),Q=R(null),K=R(null),A=R(ke(new Set)),z=R(!1),H=R(ke([])),J=R(ke([])),$=R(ke([]));const Ee=M(()=>e(U).map(l=>l.payload)),fe=M(()=>e(V).map(l=>l.payload)),ee=M(()=>e(H).map(l=>l.ref)),ie=M(()=>e(J).map(l=>l.payload)),Re=M(()=>e(w).map(l=>l.payload));let ve=R(""),be=R(null),re=R(ke([])),ue=R(!1);const Se=M(()=>e(_).length>0||e($).length>0||e(A).size>0);let Z=!1;qe(()=>{const l=e(Se);l&&!Z&&!e(ve)&&r(ve,_t(),!0),!l&&Z&&(r(ve,_t(),!0),r(be,null)),Z=l}),Wa(()=>{r(re,Vt(),!0);try{const l=Xa();l&&(r(_,l.entries.map(Bt),!0),r($,ai(l.customTags),!0),r(A,new Set(wa(l.modifiedRelations)),!0),r(ve,_a(l.submissionId)??"",!0),r(be,_a(l.supersedesSubmissionId),!0));const d=localStorage.getItem(da);if(d){const T=JSON.parse(d);et(T?.email)&&r(x,T.email,!0),et(T?.github)&&r(h,T.github,!0),et(T?.note)&&r(k,T.note,!0)}}catch(l){console.warn("Failed to restore queued changes from storage",l)}finally{r(z,!0)}e(ve)||r(ve,_t(),!0)});function le(l){const d=l(e(A));r(A,new Set(d),!0)}function te(l){const d=$e(l.sourceId,l.targetId);le(T=>{const B=new Set(T);return B.add(d),B})}function Oe(l){le(d=>{if(!d.has(l))return d;const T=new Set(d);return T.delete(l),T})}qe(()=>{const l=[],d=[],T=[],B=[],L=[];for(const O of e(_))switch(O.kind){case"language:new":l.push({queueEntryId:O.id,payload:Ye(O.payload)});break;case"language:edit":d.push({queueEntryId:O.id,payload:Ye(O.payload)});break;case"relationship":T.push({queueEntryId:O.id,payload:it(O.payload)});break;case"reference":B.push({queueEntryId:O.id,ref:O.payload});break;case"separator":L.push({queueEntryId:O.id,payload:ht(O.payload)});break}r(U,l,!0),r(V,d,!0),r(w,T,!0),r(H,B,!0),r(J,L,!0)}),qe(()=>{if(!e(z)||!qt)return;if(e(ve)||r(ve,_t(),!0),e(_).length===0&&e($).length===0&&e(A).size===0){try{localStorage.removeItem(la)}catch(T){console.warn("Failed to clear queued changes from storage",T)}r(be,null);return}const d={entries:e(_).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(A)),submissionId:e(ve),supersedesSubmissionId:e(be)??null};try{localStorage.setItem(la,JSON.stringify(d))}catch(T){console.warn("Failed to persist queued changes",T)}}),qe(()=>{if(!e(z)||!qt)return;const l={email:e(x),github:e(h),note:e(k)};try{localStorage.setItem(da,JSON.stringify(l))}catch(d){console.warn("Failed to persist contributor info",d)}}),qe(()=>{if(!e(z)||!qt)return;if(!e(Se)){sa(null);return}const l={entries:e(_).map(Bt),customTags:e($).map(zt),modifiedRelations:Array.from(e(A)),submissionId:e(ve),supersedesSubmissionId:e(be)??null};try{const d=Ga(ua,l);sa(d)}catch(d){console.error("Failed to build preview dataset:",d)}});function xe(l){return s({id:yt(),kind:"language:new",payload:Ye(l)}),{success:!0}}function ye(l){const d=e(V).find(T=>T.payload.name===l.name);return d?v(d.queueEntryId,"language:edit",Ye(l)):s({id:yt(),kind:"language:edit",payload:Ye(l)}),{success:!0}}function Y(l){s({id:yt(),kind:"reference",payload:l})}function N(l){s({id:yt(),kind:"separator",payload:ht(l)})}function Ie(l){r(P,l,!0),r(f,!0)}function Be(l){if(e(P)!==null){const d=e(J)[e(P)];d&&v(d.queueEntryId,"separator",ht(l)),r(P,null)}}function Fe(l){r(I,l,!0),r(S,!0)}function pe(l){if(e(I)!==null){const d=e(H)[e(I)];d&&v(d.queueEntryId,"reference",l),r(I,null)}}function je(l){r(q,l,!0),r(W,!0)}function De(l){if(e(q)!==null){const d=e(U)[e(q)];d&&v(d.queueEntryId,"language:new",Ye(l)),r(q,null)}return{success:!0}}function Ue(l){r(Q,l,!0),r(de,!0)}function Ve(l){if(e(Q)!==null){const d=e(V)[e(Q)];d&&v(d.queueEntryId,"language:edit",Ye(l)),r(Q,null)}return{success:!0}}function vt(l){r(K,l,!0),r(p,!0)}function He(l){if(e(K)!==null){const d=e(w)[e(K)];d&&(v(d.queueEntryId,"relationship",it(l)),te(l)),r(K,null)}}function tt(l){if(e(K)!==null){He(l);return}const d=$e(l.sourceId,l.targetId),T=e(w).find(B=>$e(B.payload.sourceId,B.payload.targetId)===d);T?v(T.queueEntryId,"relationship",it(l)):s({id:yt(),kind:"relationship",payload:it(l)}),te(l)}function at(l){const d=e(U)[l];d&&dt(d.queueEntryId,d.payload.name)}function Je(l){const d=e(V)[l];d&&dt(d.queueEntryId,d.payload.name)}function ft(l){const d=e(w)[l];d&&(c(d.queueEntryId),Oe($e(d.payload.sourceId,d.payload.targetId)))}function dt(l,d){const T=Ut(d),B=e(w).filter(O=>O.payload.sourceId===T||O.payload.targetId===T).map(O=>O.queueEntryId),L=new Set([l,...B]);r(_,e(_).filter(O=>!L.has(O.id)),!0),le(O=>{if(O.size===0)return O;const Le=new Set(O);for(const oe of Array.from(Le))(oe.startsWith(`${d}->`)||oe.endsWith(`->${d}`))&&Le.delete(oe);return Le})}function we(l){const d=e(H)[l];if(!d)return;const T=new Set(t.data.existingReferences.map(L=>L.id));for(let L=0;L<l;L++){const O=wt(e(H)[L].ref.bibtex,T);T.add(O)}const B=wt(d.ref.bibtex,T);r(_,e(_).map(L=>{if(L.kind==="language:new"||L.kind==="language:edit"){if(!L.payload.descriptionRefs.includes(B))return L;const O=Ye(L.payload);return O.descriptionRefs=O.descriptionRefs.filter(Le=>Le!==B),{...L,payload:O}}if(L.kind==="relationship"){if(!L.payload.refs.includes(B))return L;const O=it(L.payload);return O.refs=O.refs.filter(Le=>Le!==B),{...L,payload:O}}if(L.kind==="separator"){if(!L.payload.refs.includes(B))return L;const O=ht(L.payload);return O.refs=O.refs.filter(Le=>Le!==B),{...L,payload:O}}return L}),!0),c(d.queueEntryId),r($,e($).map(L=>({...L,refs:L.refs.filter(O=>O!==B)})),!0)}function Ae(l){const d=e(J)[l];if(!d)return;const T=d.payload.shortName;c(d.queueEntryId),r(_,e(_).map(B=>{if(B.kind!=="relationship"||!B.payload.separatingFunctionIds||!B.payload.separatingFunctionIds.includes(T))return B;const L=it(B.payload);return L.separatingFunctionIds=(L.separatingFunctionIds||[]).filter(O=>O!==T),{...B,payload:L}}),!0)}function Ne(l){try{const d=l.payload;r(_,Ja(d),!0),r($,d.customTags.map(zt),!0),r(A,new Set(d.modifiedRelations),!0),r(x,d.contributor.email,!0),r(h,d.contributor.github,!0),r(k,d.contributor.note,!0),r(be,d.submissionId,!0),r(ve,_t(),!0),r(re,Vt(),!0),r(ue,!1),r(I,null),r(q,null),r(Q,null),r(K,null),r(F,null),r(C,null),r(G,null),r(ae,null)}catch(d){console.error("Failed to load submission from history",d),alert("Unable to load this submission. It was saved before ordered queues were supported.")}}function Me(l){l.preventDefault(),window.location.href="/"}var he=yi();ir(l=>{lr.title="Contribute - Knowledge Compilation Map"});var rt=ze(he),st=i(rt),Ht=o(i(st),2),Kt=o(i(Ht),2),St=i(Kt),Tt=i(St),Ft=o(i(Tt),2),Dt=i(Ft),Gt=o(i(Dt),2);Ze(Gt),a(Dt);var Xt=o(Dt,2),Jt=o(i(Xt),2);Ze(Jt),a(Xt),a(Ft);var Wt=o(Ft,2),Yt=o(i(Wt),2);gt(Yt),ot(2),a(Wt),a(Tt);var At=o(Tt,2),Zt=i(At);{var Ea=l=>{var d=oi(),T=o(i(d),2);T.__click=[ii,be],a(d),b(l,d)};j(Zt,l=>{e(be)&&l(Ea)})}var Nt=o(Zt,2);Nt.__click=[ya,ue,re];var ka=o(i(Nt),2);a(Nt),a(At);var $t=o(At,2);{var Ra=l=>{var d=vi(),T=i(d),B=o(i(T),2);B.__click=[ya,ue,re],a(T);var L=o(T,2);{var O=oe=>{var _e=li();b(oe,_e)},Le=oe=>{var _e=gi();ce(_e,21,()=>e(re),ge,(Et,We)=>{const bt=M(()=>ni(e(We))),nt=M(()=>ri(e(We).createdAt));var xt=ci(),mt=i(xt),Lt=i(mt),Ot=i(Lt),Fa=i(Ot,!0);a(Ot);var Mt=o(Ot,2),Da=i(Mt,!0);a(Mt);var Aa=o(Mt,2);{var Na=ut=>{var kt=di();b(ut,kt)},La=ut=>{var kt=Xe(),Ma=ze(kt);{var Ca=Ct=>{var ja=si();b(Ct,ja)};j(Ma,Ct=>{e(We).payload.submissionId===e(be)&&Ct(Ca)},!0)}b(ut,kt)};j(Aa,ut=>{e(We).supersededBySubmissionId?ut(Na):ut(La,!1)})}a(Lt);var Oa=o(Lt,2);Oa.__click=[ui,Ne,We],a(mt),a(xt),D(()=>{E(Fa,e(nt)),E(Da,e(bt))}),b(Et,xt)}),a(_e),b(oe,_e)};j(L,oe=>{e(re).length===0?oe(O):oe(Le,!1)})}a(d),b(l,d)};j($t,l=>{e(ue)&&l(Ra)})}var ea=o($t,2);{let l=M(()=>t.data.existingReferences.map(d=>d.id));Yn(ea,{get languages(){return ua.languages},get languagesToAdd(){return e(Ee)},get languagesToEdit(){return e(fe)},get newReferences(){return e(ee)},get newSeparatingFunctions(){return e(ie)},get relationships(){return e(Re)},get modifiedRelations(){return e(A)},get existingReferenceIds(){return e(l)},get expandedLanguageToAddIndex(){return e(F)},get expandedLanguageToEditIndex(){return e(C)},get expandedReferenceIndex(){return e(ae)},get expandedSeparatingFunctionIndex(){return e(X)},get expandedRelationshipIndex(){return e(G)},onToggleExpandLanguageToAdd:d=>r(F,e(F)===d?null:d,!0),onToggleExpandLanguageToEdit:d=>r(C,e(C)===d?null:d,!0),onToggleExpandReference:d=>r(ae,e(ae)===d?null:d,!0),onToggleExpandSeparatingFunction:d=>r(X,e(X)===d?null:d,!0),onToggleExpandRelationship:d=>r(G,e(G)===d?null:d,!0),onEditLanguageToAdd:je,onEditLanguageToEdit:Ue,onDeleteLanguageToAdd:at,onDeleteLanguageToEdit:Je,onEditReference:Fe,onDeleteReference:we,onEditSeparatingFunction:Ie,onDeleteSeparatingFunction:Ae,onEditRelationship:vt,onDeleteRelationship:d=>ft(d)})}var ta=o(ea,2);$n(ta,{onAddLanguage:()=>r(W,!0),onEditLanguage:()=>r(se,!0),onManageRelationships:()=>r(p,!0),onAddReference:()=>r(S,!0),onAddSeparatingFunction:()=>r(f,!0)});var Ia=o(ta,2);{let l=M(()=>!e(Se));ti(Ia,{get disabled(){return e(l)}})}a(St),a(Kt),a(Ht),a(st),a(rt);var aa=o(rt,2);{let l=M(()=>e(q)!==null?De:xe),d=M(()=>e(q)!==null),T=M(()=>e(q)!==null?e(U)[e(q)]?.payload:void 0),B=M(()=>Object.values(t.data.queries).map(_e=>({code:_e.code,name:_e.label}))),L=M(()=>Object.values(t.data.transformations).map(_e=>({code:_e.code,name:_e.label}))),O=M(()=>u.map(_e=>({value:_e.code,label:_e.label,description:_e.description||""}))),Le=M(()=>[...t.data.existingTags,...e($)].map(_e=>({label:_e.label,color:_e.color||"#6366f1",description:"",refs:[]}))),oe=M(()=>Rt(t.data.existingReferences,e(ee)));va(aa,{onClose:()=>{r(W,!1),r(q,null)},get onAdd(){return e(l)},get isEdit(){return e(d)},get initialData(){return e(T)},get queries(){return e(B)},get transformations(){return e(L)},get complexityOptions(){return e(O)},get existingTags(){return e(Le)},get availableRefs(){return e(oe)},get isOpen(){return e(W)},set isOpen(_e){r(W,_e,!0)}})}var ra=o(aa,2);{let l=M(()=>e(Q)!==null?Ve:ye),d=M(()=>e(Q)!==null?e(V)[e(Q)]?.payload:e(ne)?vn(t.data.languages.find(oe=>oe.name===e(ne))):void 0),T=M(()=>Object.values(t.data.queries).map(oe=>({code:oe.code,name:oe.label}))),B=M(()=>Object.values(t.data.transformations).map(oe=>({code:oe.code,name:oe.label}))),L=M(()=>u.map(oe=>({value:oe.code,label:oe.label,description:oe.description||""}))),O=M(()=>[...t.data.existingTags,...e($)].map(oe=>({label:oe.label,color:oe.color||"#6366f1",description:"",refs:[]}))),Le=M(()=>Rt(t.data.existingReferences,e(ee)));va(ra,{onClose:()=>{r(de,!1),r(ne,""),r(Q,null)},get onAdd(){return e(l)},isEdit:!0,get initialData(){return e(d)},get queries(){return e(T)},get transformations(){return e(B)},get complexityOptions(){return e(L)},get existingTags(){return e(O)},get availableRefs(){return e(Le)},get isOpen(){return e(de)},set isOpen(oe){r(de,oe,!0)}})}var na=o(ra,2);{var Sa=l=>{var d=_i();d.__click=[fi,se];var T=i(d);T.__click=[bi];var B=o(i(T),2),L=o(i(B),2),O=i(L);O.value=O.__value="";var Le=o(O);ce(Le,17,()=>t.data.languages,ge,(We,bt)=>{var nt=xi(),xt=i(nt,!0);a(nt);var mt={};D(()=>{E(xt,e(bt).name),mt!==(mt=e(bt).name)&&(nt.value=(nt.__value=e(bt).name)??"")}),b(We,nt)}),a(L);var oe=o(L,2),_e=i(oe);_e.__click=[mi,ne,se];var Et=o(_e,2);Et.__click=[pi,ne,se,de],a(oe),a(B),a(T),a(d),D(()=>Et.disabled=!e(ne)),ct(L,()=>e(ne),We=>r(ne,We)),b(l,d)};j(na,l=>{e(se)&&l(Sa)})}var ia=o(na,2);{let l=M(()=>e(I)!==null?pe:Y),d=M(()=>e(I)!==null?e(H)[e(I)]?.ref:void 0),T=M(()=>e(I)!==null);zr(ia,{onClose:()=>{r(S,!1),r(I,null)},get onAdd(){return e(l)},get initialValue(){return e(d)},get isEditMode(){return e(T)},get isOpen(){return e(S)},set isOpen(B){r(S,B,!0)}})}var oa=o(ia,2);{let l=M(()=>e(P)!==null?Be:N),d=M(()=>e(P)!==null?e(J)[e(P)]?.payload:void 0),T=M(()=>Rt(t.data.existingReferences,e(ee))),B=M(()=>e(P)!==null);Xr(oa,{onClose:()=>{r(f,!1),r(P,null)},get onAdd(){return e(l)},get initialValue(){return e(d)},get availableRefs(){return e(T)},get isEditMode(){return e(B)},get isOpen(){return e(f)},set isOpen(L){r(f,L,!0)}})}var Ta=o(oa,2);{let l=M(()=>e(K)!==null?e(w)[e(K)]?.payload:void 0),d=M(()=>gn(t.data.languages,e(Ee),e(fe))),T=M(()=>Rt(t.data.existingReferences,e(ee))),B=M(()=>fn(t.data.existingSeparatingFunctions,e(ie)));un(Ta,{onClose:()=>{r(p,!1),r(K,null)},onSave:tt,get initialData(){return e(l)},get languages(){return e(d)},get statusOptions(){return g},get availableRefs(){return e(T)},get availableSeparatingFunctions(){return e(B)},get baselineRelations(){return y},get isOpen(){return e(p)},set isOpen(L){r(p,L,!0)}})}D(()=>Qe(ka,0,`h-3 w-3 transition-transform ${e(ue)?"rotate-180":""}`)),or("submit",St,Me),Ce(Gt,()=>e(x),l=>r(x,l)),Ce(Jt,()=>e(h),l=>r(h,l)),Ce(Yt,()=>e(k),l=>r(k,l)),b(n,he),Ge()}lt(["click"]);export{Ti as component,Si as universal};
