import{a as gt,r as Qt,b as Ht,P as Kt,T as Vt,Q as Yt,e as me,i as ke,c as st,s as He,d as Pt,f as tt,g as Jt,h as Lt,j as Xt,k as It,l as xt,m as Gt}from"../chunks/D15d8F1l.js";import"../chunks/DsnmJJEf.js";import{d as Je,s as E,o as Wt,e as Zt}from"../chunks/DbVqaDFm.js";import{b0 as $t,aY as er,u as tr,r as rr,h as ar,k as ut,b1 as ir,T as Xe,a1 as S,C as Me,aa as Ye,z as e,D as a,a4 as rt,a5 as Ze,Y as g,Z as Ge,V as m,a0 as i,a3 as r,ar as bt,_ as n,b2 as ct,X as M,a_ as X,b3 as Ot,W as or,$ as nr}from"../chunks/BlHH1BBY.js";import{i as H}from"../chunks/dyYcpwxl.js";import{r as We,s as je}from"../chunks/DshVq4y3.js";import{b as lr}from"../chunks/D68Ayzg2.js";import{p as Ne}from"../chunks/BYmkFN3S.js";import{t as sr,g as dr,l as _t,u as ur,d as cr}from"../chunks/CfIAMmNm.js";function ze(s,t,u=t){var b=new WeakSet;$t(s,"input",async f=>{var d=f?s.defaultValue:s.value;if(d=mt(s)?pt(d):d,u(d),ut!==null&&b.add(ut),await er(),d!==(d=t())){var p=s.selectionStart,k=s.selectionEnd;s.value=d??"",k!==null&&(s.selectionStart=p,s.selectionEnd=Math.min(k,s.value.length))}}),(ar&&s.defaultValue!==s.value||tr(t)==null&&s.value)&&(u(mt(s)?pt(s.value):s.value),ut!==null&&b.add(ut)),rr(()=>{var f=t();if(s===document.activeElement){var d=ir??ut;if(b.has(d))return}mt(s)&&f===pt(s.value)||s.type==="date"&&!f&&!s.value||f!==s.value&&(s.value=f??"")})}function mt(s){var t=s.type;return t==="number"||t==="range"}function pt(s){return s===""?null:+s}const vr=()=>{const s=gt.map(d=>d.id),t=new Map;for(const d of gt)if(d.references)for(const p of d.references)t.has(p.id)||t.set(p.id,p.title);const u=Array.from(t.entries()).map(([d,p])=>({id:d,title:p})),b=new Map;for(const d of gt)if(d.tags)for(const p of d.tags)b.has(p.id)||b.set(p.id,{id:p.id,label:p.label,color:p.color});const f=Array.from(b.values());return{existingLanguageIds:s,existingReferences:u,existingTags:f,languages:gt,queries:Yt,transformations:Vt,polytimeOptions:Kt,adjacencyMatrix:Ht,relationTypes:Qt}},gr=!1,bi=Object.freeze(Object.defineProperty({__proto__:null,load:vr,prerender:gr},Symbol.toStringTag,{value:"Module"}));async function br(s,t,u,b,f,d,p,k,U,P,A,y,L){if(!e(t).trim()||!e(u).trim()||!e(b).trim()||!e(f).trim()){a(d,"Please fill out all required fields.");return}try{const N=await p.onAdd({id:e(t).trim(),name:e(u).trim(),fullName:e(b).trim(),description:e(f).trim(),descriptionRefs:e(k),queries:e(U),transformations:e(P),tags:e(A),existingReferences:e(y)}),O=N&&typeof N=="object"&&"success"in N?N:void 0;if(O&&!O.success){a(d,O.error??"Unable to add language. Please review your input.",!0);return}a(d,null),L(),p.onClose?.()}catch(N){a(d,N instanceof Error?N.message:"Unexpected error while adding the language.",!0)}}function Ct(s,t,u){t(),u.onClose()}var fr=s=>s.stopPropagation(),xr=m('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),_r=m('<p class="text-xs text-gray-500 mt-1">ID will be: <code class="bg-gray-100 px-1 rounded"> </code></p>'),mr=(s,t,u)=>t(e(u)),pr=m('<button type="button"> </button>'),yr=m('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">Description References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),hr=m("<option> </option>"),wr=(s,t,u,b)=>t(e(u).code,e(b)),kr=m('<button type="button"> </button>'),Er=m('<div class="mt-2 flex flex-wrap gap-1"></div>'),Rr=m('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Tr=m("<option> </option>"),Dr=(s,t,u,b)=>t(e(u).code,e(b)),Sr=m('<button type="button"> </button>'),Ar=m('<div class="mt-2 flex flex-wrap gap-1"></div>'),Lr=m('<div class="p-3 bg-gray-50 rounded-lg border border-gray-200"><div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs font-medium text-gray-700 mb-1"> </label> <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"></select></div> <div><label class="block text-xs font-medium text-gray-700 mb-1">Note</label> <input type="text" placeholder="Optional note..." class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"/></div></div> <!></div>'),Ir=(s,t,u)=>t(e(u)),Or=m('<button type="button"> </button>'),Cr=m('<div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Tags</h3> <div class="flex flex-wrap gap-2"></div></div>'),jr=m(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-green-100 mt-1">Define a knowledge compilation language</p></div> <div class="p-6 space-y-6"><!> <div class="space-y-4"><h3 class="text-lg font-bold text-gray-900">Basic Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="lang-name" class="block text-sm font-medium text-gray-700 mb-1">Short Name <span class="text-red-500">*</span></label> <input type="text" id="lang-name" placeholder="e.g., 'OBDD', 'd-DNNF'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/> <!></div> <div><label for="lang-fullname" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label> <input type="text" id="lang-fullname" placeholder="e.g., 'Ordered Binary Decision Diagrams'" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/></div></div> <div><label for="lang-description" class="block text-sm font-medium text-gray-700 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="lang-description" placeholder="Brief description of this language..." rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea></div> <!></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Query Support</h3> <div class="space-y-3"></div></div> <div class="space-y-4 border-t pt-6"><h3 class="text-lg font-bold text-gray-900">Transformation Support</h3> <div class="space-y-3"></div></div> <!> <div class="flex gap-3 justify-end pt-6 border-t sticky bottom-0 bg-white"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>`);function jt(s,t){Xe(t,!0);let u=Ne(t,"isOpen",11,!1),b=Ne(t,"availableRefs",19,()=>[]),f=Ne(t,"isEdit",3,!1),d=S(""),p=S(""),k=S(""),U=S(""),P=S(Me([])),A=S(Me({})),y=S(Me({})),L=S(Me([])),N=S(Me([])),O=S(null);Ye(()=>{!f()&&e(p)&&a(d,e(p).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),!0)}),Ye(()=>{f()&&t.initialData&&(a(d,t.initialData.id,!0),a(p,t.initialData.name,!0),a(k,t.initialData.fullName,!0),a(U,t.initialData.description,!0),a(P,[...t.initialData.descriptionRefs],!0),a(A,{...t.initialData.queries},!0),a(y,{...t.initialData.transformations},!0),a(L,[...t.initialData.tags],!0),a(N,[...t.initialData.existingReferences],!0),a(O,null))});function F(){a(d,""),a(p,""),a(k,""),a(U,""),a(P,[],!0),a(A,{},!0),a(y,{},!0),a(L,[],!0),a(N,[],!0),a(pe,!1),a(ie,!1),a(O,null)}function se(D){e(P).includes(D)?a(P,e(P).filter(T=>T!==D),!0):a(P,[...e(P),D],!0)}function R(D){e(L).some(T=>T.id===D.id)?a(L,e(L).filter(T=>T.id!==D.id),!0):a(L,[...e(L),D],!0)}function c(D,T){if(!e(A)[D])return;const C=e(A)[D].refs;C.includes(T)?e(A)[D].refs=C.filter(Z=>Z!==T):e(A)[D].refs=[...C,T],a(A,{...e(A)},!0)}function _(D,T){if(!e(y)[D])return;const C=e(y)[D].refs;C.includes(T)?e(y)[D].refs=C.filter(Z=>Z!==T):e(y)[D].refs=[...C,T],a(y,{...e(y)},!0)}let pe=S(!1),ie=S(!1);Ye(()=>{if(t.queries.length>0&&!e(pe)){const D={};t.queries.forEach(T=>{if(f()&&t.initialData&&t.initialData.queries[T.code]){const C=t.initialData.queries[T.code];D[T.code]={polytime:C.polytime,note:C.note||"",refs:[...C.refs]}}else D[T.code]={polytime:"unknown",note:"",refs:[]}}),a(A,D,!0),a(pe,!0)}}),Ye(()=>{if(t.transformations.length>0&&!e(ie)){const D={};t.transformations.forEach(T=>{if(f()&&t.initialData){let C=t.initialData.transformations[T.code];if(!C){const Z=Object.keys(t.initialData.transformations).find(oe=>t.initialData.transformations[oe]!==void 0&&(oe===T.code||T.code==="âˆ§C"&&oe==="AND_C"||T.code==="âˆ§BC"&&oe==="AND_BC"||T.code==="âˆ¨C"&&oe==="OR_C"||T.code==="âˆ¨BC"&&oe==="OR_BC"||T.code==="Â¬C"&&oe==="NOT_C"));Z&&(C=t.initialData.transformations[Z])}D[T.code]=C?{polytime:C.polytime,note:C.note||"",refs:[...C.refs]}:{polytime:"unknown",note:"",refs:[]}}else D[T.code]={polytime:"unknown",note:"",refs:[]}}),a(y,D,!0),a(ie,!0)}});var ve=rt(),de=Ze(ve);{var ge=D=>{var T=jr();T.__click=[Ct,F,t];var C=i(T);C.__click=[fr];var Z=i(C),oe=i(Z),be=i(oe);r(oe),bt(2),r(Z);var V=n(Z,2),te=i(V);{var ue=h=>{var w=xr(),ae=i(w,!0);r(w),M(()=>E(ae,e(O))),g(h,w)};H(te,h=>{e(O)&&h(ue)})}var ye=n(te,2),he=n(i(ye),2),z=i(he),K=n(i(z),2);We(K);var Se=n(K,2);{var fe=h=>{var w=_r(),ae=n(i(w)),Fe=i(ae,!0);r(ae),r(w),M(()=>E(Fe,e(d))),g(h,w)};H(Se,h=>{e(d)&&!f()&&h(fe)})}r(z);var q=n(z,2),B=n(i(q),2);We(B),r(q),r(he);var re=n(he,2),ne=n(i(re),2);ct(ne),r(re);var ce=n(re,2);{var Oe=h=>{var w=yr(),ae=n(i(w),2);me(ae,21,b,ke,(Fe,xe)=>{var we=pr();we.__click=[mr,se,xe];var Pe=i(we,!0);r(we),M(Ie=>{He(we,1,Ie),E(Pe,e(xe))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(P).includes(e(xe))?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`]),g(Fe,we)}),r(ae),r(w),g(h,w)};H(ce,h=>{b().length>0&&h(Oe)})}r(ye);var Ae=n(ye,2),Re=n(i(Ae),2);me(Re,21,()=>t.queries,ke,(h,w)=>{var ae=rt(),Fe=Ze(ae);{var xe=we=>{var Pe=Rr(),Ie=i(Pe),Be=i(Ie),Ue=i(Be),at=i(Ue,!0);r(Ue);var qe=n(Ue,2);me(qe,21,()=>t.polytimeOptions,ke,(_e,Te)=>{var De=hr(),Ce=i(De,!0);r(De);var Ee={};M(()=>{E(Ce,e(Te).label),Ee!==(Ee=e(Te).value)&&(De.value=(De.__value=e(Te).value)??"")}),g(_e,De)}),r(qe),r(Be);var Ve=n(Be,2),$e=i(Ve),Ke=n($e,2);We(Ke),r(Ve),r(Ie);var it=n(Ie,2);{var ot=_e=>{var Te=Er();me(Te,21,b,ke,(De,Ce)=>{var Ee=kr();Ee.__click=[wr,c,w,Ce];var nt=i(Ee,!0);r(Ee),M(lt=>{He(Ee,1,lt),E(nt,e(Ce))},[()=>`px-2 py-0.5 text-xs rounded ${e(A)[e(w).code].refs.includes(e(Ce))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),g(De,Ee)}),r(Te),g(_e,Te)};H(it,_e=>{b().length>0&&_e(ot)})}r(Pe),M(()=>{je(Ue,"for",`query-${e(w).code??""}-polytime`),E(at,e(w).name),je(qe,"id",`query-${e(w).code??""}-polytime`),je($e,"for",`query-${e(w).code??""}-note`),je(Ke,"id",`query-${e(w).code??""}-note`)}),st(qe,()=>e(A)[e(w).code].polytime,_e=>e(A)[e(w).code].polytime=_e),ze(Ke,()=>e(A)[e(w).code].note,_e=>e(A)[e(w).code].note=_e),g(we,Pe)};H(Fe,we=>{e(A)[e(w).code]&&we(xe)})}g(h,ae)}),r(Re),r(Ae);var G=n(Ae,2),I=n(i(G),2);me(I,21,()=>t.transformations,ke,(h,w)=>{var ae=rt(),Fe=Ze(ae);{var xe=we=>{var Pe=Lr(),Ie=i(Pe),Be=i(Ie),Ue=i(Be),at=i(Ue,!0);r(Ue);var qe=n(Ue,2);me(qe,21,()=>t.polytimeOptions,ke,(_e,Te)=>{var De=Tr(),Ce=i(De,!0);r(De);var Ee={};M(()=>{E(Ce,e(Te).label),Ee!==(Ee=e(Te).value)&&(De.value=(De.__value=e(Te).value)??"")}),g(_e,De)}),r(qe),r(Be);var Ve=n(Be,2),$e=i(Ve),Ke=n($e,2);We(Ke),r(Ve),r(Ie);var it=n(Ie,2);{var ot=_e=>{var Te=Ar();me(Te,21,b,ke,(De,Ce)=>{var Ee=Sr();Ee.__click=[Dr,_,w,Ce];var nt=i(Ee,!0);r(Ee),M(lt=>{He(Ee,1,lt),E(nt,e(Ce))},[()=>`px-2 py-0.5 text-xs rounded ${e(y)[e(w).code].refs.includes(e(Ce))?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`]),g(De,Ee)}),r(Te),g(_e,Te)};H(it,_e=>{b().length>0&&_e(ot)})}r(Pe),M(()=>{je(Ue,"for",`transform-${e(w).code??""}-polytime`),E(at,e(w).name),je(qe,"id",`transform-${e(w).code??""}-polytime`),je($e,"for",`transform-${e(w).code??""}-note`),je(Ke,"id",`transform-${e(w).code??""}-note`)}),st(qe,()=>e(y)[e(w).code].polytime,_e=>e(y)[e(w).code].polytime=_e),ze(Ke,()=>e(y)[e(w).code].note,_e=>e(y)[e(w).code].note=_e),g(we,Pe)};H(Fe,we=>{e(y)[e(w).code]&&we(xe)})}g(h,ae)}),r(I),r(G);var j=n(G,2);{var Q=h=>{var w=Cr(),ae=n(i(w),2);me(ae,21,()=>t.existingTags,ke,(Fe,xe)=>{var we=Or();we.__click=[Ir,R,xe];var Pe=i(we,!0);r(we),M((Ie,Be)=>{He(we,1,Ie),Pt(we,`background-color: ${e(xe).color??""}; color: white; ${Be??""}`),E(Pe,e(xe).label)},[()=>`px-3 py-1 rounded-full text-sm font-medium transition-all ${e(L).some(Ie=>Ie.id===e(xe).id)?"ring-2 ring-offset-2":"opacity-60 hover:opacity-100"}`,()=>e(L).some(Ie=>Ie.id===e(xe).id)?`ring-color: ${e(xe).color};`:""]),g(Fe,we)}),r(ae),r(w),g(h,w)};H(j,h=>{t.existingTags.length>0&&h(Q)})}var Y=n(j,2),$=i(Y);$.__click=[Ct,F,t];var ee=n($,2);ee.__click=[br,d,p,k,U,O,t,P,A,y,L,N,F];var J=i(ee);r(ee),r(Y),r(V),r(C),r(T),M(h=>{E(be,`${f()?"Edit":"Add New"} Language`),ee.disabled=h,E(J,`${f()?"Update":"Add"} Language`)},[()=>!e(d).trim()||!e(p).trim()||!e(k).trim()||!e(U).trim()]),ze(K,()=>e(p),h=>a(p,h)),ze(B,()=>e(k),h=>a(k,h)),ze(ne,()=>e(U),h=>a(U,h)),g(D,T)};H(de,D=>{u()&&D(ge)})}g(s,ve),Ge()}Je(["click"]);function Mr(s,t,u,b){e(t).trim()&&(u.onAdd(e(t).trim()),a(t,""),b(!1))}function Mt(s,t,u,b){t()||a(u,""),b.onClose()}var Nr=s=>s.stopPropagation(),Fr=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4"><h2 class="text-2xl font-bold text-white"> </h2> <p class="text-purple-100 mt-1"> </p></div> <div class="p-6 space-y-4"><div><label for="bibtex-input" class="block text-sm font-medium text-gray-700 mb-2">BibTeX Entry <span class="text-red-500">*</span></label> <textarea id="bibtex-input" rows="8" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">Paste a complete BibTeX entry.</p></div> <div class="flex gap-3 justify-end pt-4"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"> </button></div></div></div></div>');function Pr(s,t){Xe(t,!0);let u=Ne(t,"isOpen",15,!1),b=Ne(t,"initialValue",3,""),f=Ne(t,"isEditMode",3,!1),d=S(Me(b()));Ye(()=>{u()&&b()&&a(d,b())});const p=`@article{Darwiche_2002,
  title={A Knowledge Compilation Map},
  author={Darwiche, Adnan and Marquis, Pierre},
  journal={Journal of AI Research},
  year={2002}
}`;var k=rt(),U=Ze(k);{var P=A=>{var y=Fr();y.__click=[Mt,f,d,t];var L=i(y);L.__click=[Nr];var N=i(L),O=i(N),F=i(O,!0);r(O);var se=n(O,2),R=i(se,!0);r(se),r(N);var c=n(N,2),_=i(c),pe=n(i(_),2);ct(pe),je(pe,"placeholder",p),bt(2),r(_);var ie=n(_,2),ve=i(ie);ve.__click=[Mt,f,d,t];var de=n(ve,2);de.__click=[Mr,d,t,u];var ge=i(de,!0);r(de),r(ie),r(c),r(L),r(y),M(D=>{E(F,f()?"Edit Reference":"Add New Reference"),E(R,f()?"Update BibTeX citation":"Paste BibTeX citation"),de.disabled=D,E(ge,f()?"Update Reference":"Add Reference")},[()=>!e(d).trim()]),ze(pe,()=>e(d),D=>a(d,D)),g(A,y)};H(U,A=>{u()&&A(P)})}g(s,k),Ge()}Je(["click"]);function Ur(s,t,u,b,f,d,p,k,U,P){!e(t)||!e(u)||!e(b)||e(t)===e(u)||(f.onSave({sourceId:e(t),targetId:e(u),status:e(b),description:e(d)||void 0,refs:e(p),separatingFunctions:e(k).length>0?e(k):void 0}),U(),P(!1))}function Nt(s,t,u){t(),u.onClose()}function zr(s,t){a(t,[...e(t),{shortName:"",name:"",description:"",refs:[]}],!0)}var Br=s=>s.stopPropagation(),qr=m("<option> </option>"),Qr=m("<option> </option>"),Hr=m("<option> </option>"),Kr=m('<p class="text-xs text-gray-500 mt-1"> </p>'),Vr=(s,t,u)=>t(e(u)),Yr=m('<button type="button"> </button>'),Jr=m('<fieldset><legend class="block text-sm font-medium text-gray-700 mb-2">References</legend> <div class="flex flex-wrap gap-2"></div></fieldset>'),Xr=m(`<div class="p-3 bg-gray-50 rounded-lg border border-gray-200 space-y-2"><div class="flex items-start justify-between gap-2"><input type="text" placeholder="Short name (e.g., 'Clique')" class="flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-red-600 hover:text-red-800 font-bold">Ã—</button></div> <input type="text" placeholder="Full name (e.g., 'Clique Detection Instances')" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <textarea placeholder="Description..." rows="2" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea></div>`),Gr=m('<div class="space-y-3"></div>'),Wr=m('<p class="text-sm text-gray-500 italic">No separating functions added yet.</p>'),Zr=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 sticky top-0 z-10"><h2 class="text-2xl font-bold text-white">Manage Relationship</h2> <p class="text-blue-100 mt-1">Add or update transformation relationships</p></div> <div class="p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="rel-source" class="block text-sm font-medium text-gray-700 mb-1">Source Language <span class="text-red-500">*</span></label> <select id="rel-source" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select source...</option><!></select></div> <div><label for="rel-target" class="block text-sm font-medium text-gray-700 mb-1">Target Language <span class="text-red-500">*</span></label> <select id="rel-target" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select target...</option><!></select></div></div> <div><label for="rel-status" class="block text-sm font-medium text-gray-700 mb-1">Classification <span class="text-red-500">*</span></label> <select id="rel-status" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>Select classification...</option><!></select> <!></div> <div><label for="rel-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="rel-description" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Describe this transformation relationship (optional)..."></textarea></div> <!> <fieldset class="border-t pt-4"><div class="flex items-center justify-between mb-3"><legend class="block text-sm font-medium text-gray-700">Separating Functions (optional)</legend> <button type="button" class="text-sm text-blue-600 hover:text-blue-700 font-medium">+ Add Function</button></div> <!></fieldset> <div class="flex gap-3 justify-end pt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Save Relationship</button></div></div></div></div>');function $r(s,t){Xe(t,!0);let u=Ne(t,"isOpen",15,!1),b=Ne(t,"availableRefs",19,()=>[]),f=Ne(t,"baselineRelations",19,()=>new Map),d=S(""),p=S(""),k=S(""),U=S(""),P=S(Me([])),A=S(Me([]));Ye(()=>{u()&&t.initialData&&(a(d,t.initialData.sourceId,!0),a(p,t.initialData.targetId,!0),a(k,t.initialData.status,!0),a(U,t.initialData.description||"",!0),a(P,[...t.initialData.refs],!0),a(A,t.initialData.separatingFunctions?t.initialData.separatingFunctions.map(R=>({...R})):[],!0))}),Ye(()=>{if(e(d)&&e(p)&&e(d)!==e(p)){const R=`${e(d)}->${e(p)}`,c=f().get(R);c&&(a(k,c.status,!0),a(P,[...c.refs],!0),a(A,c.separatingFunctions.map(_=>({..._})),!0))}});function y(){a(d,""),a(p,""),a(k,""),a(U,""),a(P,[],!0),a(A,[],!0)}function L(R){e(P).includes(R)?a(P,e(P).filter(c=>c!==R),!0):a(P,[...e(P),R],!0)}function N(R){a(A,e(A).filter((c,_)=>_!==R),!0)}var O=rt(),F=Ze(O);{var se=R=>{var c=Zr();c.__click=[Nt,y,t];var _=i(c);_.__click=[Br];var pe=n(i(_),2),ie=i(pe),ve=i(ie),de=n(i(ve),2),ge=i(de);ge.value=ge.__value="";var D=n(ge);me(D,17,()=>t.languages,ke,(I,j)=>{var Q=qr(),Y=i(Q);r(Q);var $={};M(()=>{E(Y,`${e(j).name??""} (${e(j).id??""})`),$!==($=e(j).id)&&(Q.value=(Q.__value=e(j).id)??"")}),g(I,Q)}),r(de),r(ve);var T=n(ve,2),C=n(i(T),2),Z=i(C);Z.value=Z.__value="";var oe=n(Z);me(oe,17,()=>t.languages,ke,(I,j)=>{var Q=Qr(),Y=i(Q);r(Q);var $={};M(()=>{Q.disabled=e(j).id===e(d),E(Y,`${e(j).name??""} (${e(j).id??""})`),$!==($=e(j).id)&&(Q.value=(Q.__value=e(j).id)??"")}),g(I,Q)}),r(C),r(T),r(ie);var be=n(ie,2),V=n(i(be),2),te=i(V);te.value=te.__value="";var ue=n(te);me(ue,17,()=>t.statusOptions,ke,(I,j)=>{var Q=Hr(),Y=i(Q,!0);r(Q);var $={};M(()=>{E(Y,e(j).label),$!==($=e(j).value)&&(Q.value=(Q.__value=e(j).value)??"")}),g(I,Q)}),r(V);var ye=n(V,2);{var he=I=>{const j=X(()=>t.statusOptions.find(ee=>ee.value===e(k)));var Q=rt(),Y=Ze(Q);{var $=ee=>{var J=Kr(),h=i(J,!0);r(J),M(()=>E(h,e(j).description)),g(ee,J)};H(Y,ee=>{e(j)&&ee($)})}g(I,Q)};H(ye,I=>{e(k)&&I(he)})}r(be);var z=n(be,2),K=n(i(z),2);ct(K),r(z);var Se=n(z,2);{var fe=I=>{var j=Jr(),Q=n(i(j),2);me(Q,21,b,ke,(Y,$)=>{var ee=Yr();ee.__click=[Vr,L,$];var J=i(ee,!0);r(ee),M(h=>{He(ee,1,h),E(J,e($))},[()=>`px-3 py-1 text-sm rounded-lg border-2 transition-colors ${e(P).includes(e($))?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`]),g(Y,ee)}),r(Q),r(j),g(I,j)};H(Se,I=>{b().length>0&&I(fe)})}var q=n(Se,2),B=i(q),re=n(i(B),2);re.__click=[zr,A],r(B);var ne=n(B,2);{var ce=I=>{var j=Gr();me(j,21,()=>e(A),ke,(Q,Y,$)=>{var ee=Xr(),J=i(ee),h=i(J);We(h);var w=n(h,2);w.__click=()=>N($),r(J);var ae=n(J,2);We(ae);var Fe=n(ae,2);ct(Fe),r(ee),ze(h,()=>e(Y).shortName,xe=>e(Y).shortName=xe),ze(ae,()=>e(Y).name,xe=>e(Y).name=xe),ze(Fe,()=>e(Y).description,xe=>e(Y).description=xe),g(Q,ee)}),r(j),g(I,j)},Oe=I=>{var j=Wr();g(I,j)};H(ne,I=>{e(A).length>0?I(ce):I(Oe,!1)})}r(q);var Ae=n(q,2),Re=i(Ae);Re.__click=[Nt,y,t];var G=n(Re,2);G.__click=[Ur,d,p,k,t,U,P,A,y,u],r(Ae),r(pe),r(_),r(c),M(()=>G.disabled=!e(d)||!e(p)||!e(k)||e(d)===e(p)),st(de,()=>e(d),I=>a(d,I)),st(C,()=>e(p),I=>a(p,I)),st(V,()=>e(k),I=>a(k,I)),ze(K,()=>e(U),I=>a(U,I)),g(R,c)};H(F,R=>{u()&&R(se)})}g(s,O),Ge()}Je(["click"]);var ea=(s,t)=>t.onToggleExpand(t.index),ta=(s,t)=>t.onEdit(t.index),ra=(s,t)=>t.onDelete(t.index),aa=m('<div class="text-gray-500 italic"> </div>'),ia=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),oa=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),na=m('<div class="text-gray-500 italic"> </div>'),la=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600"> </div> <!></div>'),sa=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="grid grid-cols-2 gap-2"></div></div>'),da=m('<span class="px-2 py-1 rounded text-white text-xs"> </span>'),ua=m('<div><div class="font-semibold text-gray-700 mb-1">Tags:</div> <div class="flex flex-wrap gap-1"></div></div>'),ca=m('<div><div><div class="font-semibold text-gray-700 mb-1">Full Name:</div> <div class="text-gray-900"> </div></div> <div><div class="font-semibold text-gray-700 mb-1">Description:</div> <div class="text-gray-900"> </div></div> <!> <!> <!></div>'),va=m('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Ft(s,t){Xe(t,!0);let u=Ne(t,"isExpanded",3,!1),b=Ne(t,"isEdit",3,!1);const f=b()?"border-yellow-300":"border-green-300",d=b()?"bg-yellow-50":"bg-green-50",p=b()?"text-yellow-800":"text-green-800",k=b()?"bg-yellow-100 hover:bg-yellow-200":"bg-green-100 hover:bg-green-200",U=b()?"text-yellow-800":"text-green-800",P=b()?"border-yellow-300":"border-green-300",A=b()?"border-yellow-200":"border-green-200";var y=va(),L=i(y),N=i(L),O=i(N),F=i(O,!0);r(O);var se=n(O,2),R=i(se,!0);r(se),r(N);var c=n(N,2),_=i(c);_.__click=[ea,t];var pe=i(_,!0);r(_);var ie=n(_,2);ie.__click=[ta,t];var ve=n(ie,2);ve.__click=[ra,t],r(c),r(L);var de=n(L,2);{var ge=D=>{var T=ca(),C=i(T),Z=n(i(C),2),oe=i(Z,!0);r(Z),r(C);var be=n(C,2),V=n(i(be),2),te=i(V,!0);r(V),r(be);var ue=n(be,2);{var ye=fe=>{var q=oa(),B=i(q),re=i(B);r(B);var ne=n(B,2);me(ne,21,()=>Object.entries(t.language.queries),ke,(ce,Oe)=>{var Ae=X(()=>Ot(e(Oe),2));let Re=()=>e(Ae)[0],G=()=>e(Ae)[1];var I=ia(),j=i(I),Q=i(j,!0);r(j);var Y=n(j,2),$=i(Y,!0);r(Y);var ee=n(Y,2);{var J=h=>{var w=aa(),ae=i(w,!0);r(w),M(()=>E(ae,G().note)),g(h,w)};H(ee,h=>{G().note&&h(J)})}r(I),M(()=>{E(Q,Re()),E($,G().polytime)}),g(ce,I)}),r(ne),r(q),M(ce=>E(re,`Query Support (${ce??""}):`),[()=>Object.keys(t.language.queries).length]),g(fe,q)};H(ue,fe=>{t.language.queries&&Object.keys(t.language.queries).length>0&&fe(ye)})}var he=n(ue,2);{var z=fe=>{var q=sa(),B=i(q),re=i(B);r(B);var ne=n(B,2);me(ne,21,()=>Object.entries(t.language.transformations),ke,(ce,Oe)=>{var Ae=X(()=>Ot(e(Oe),2));let Re=()=>e(Ae)[0],G=()=>e(Ae)[1];var I=la(),j=i(I),Q=i(j,!0);r(j);var Y=n(j,2),$=i(Y,!0);r(Y);var ee=n(Y,2);{var J=h=>{var w=na(),ae=i(w,!0);r(w),M(()=>E(ae,G().note)),g(h,w)};H(ee,h=>{G().note&&h(J)})}r(I),M(()=>{E(Q,Re()),E($,G().polytime)}),g(ce,I)}),r(ne),r(q),M(ce=>E(re,`Transformation Support (${ce??""}):`),[()=>Object.keys(t.language.transformations).length]),g(fe,q)};H(he,fe=>{t.language.transformations&&Object.keys(t.language.transformations).length>0&&fe(z)})}var K=n(he,2);{var Se=fe=>{var q=ua(),B=n(i(q),2);me(B,21,()=>t.language.tags,ke,(re,ne)=>{var ce=da(),Oe=i(ce,!0);r(ce),M(()=>{Pt(ce,`background-color: ${e(ne).color??""}`),E(Oe,e(ne).label)}),g(re,ce)}),r(B),r(q),g(fe,q)};H(K,fe=>{t.language.tags&&t.language.tags.length>0&&fe(Se)})}r(T),M(()=>{He(T,1,`mt-4 pt-4 border-t ${A} space-y-3 text-xs`),E(oe,t.language.fullName),E(te,t.language.description)}),g(D,T)};H(de,D=>{u()&&D(ge)})}r(y),M(()=>{He(y,1,`border-2 ${f} ${d} rounded-lg p-3`),He(O,1,`text-sm font-semibold ${p}`),E(F,b()?"Edit Language:":"New Language:"),E(R,t.language.name),He(_,1,`px-2 py-1 text-xs ${k} ${U} rounded border ${P}`),je(_,"aria-label",u()?"Collapse":"Expand"),E(pe,u()?"Collapse":"Expand")}),g(s,y),Ge()}Je(["click"]);var ga=(s,t)=>t.onToggleExpand(t.index),ba=(s,t)=>t.onEdit(t.index),fa=(s,t)=>t.onDelete(t.index),xa=m('<div class="mt-4 pt-4 border-t border-purple-200"><pre class="text-xs bg-white p-2 rounded border border-purple-200 overflow-x-auto"> </pre></div>'),_a=m('<div class="border-2 border-purple-300 bg-purple-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-purple-800">Reference</span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function ma(s,t){Xe(t,!0);let u=Ne(t,"isExpanded",3,!1);var b=_a(),f=i(b),d=n(i(f),2),p=i(d);p.__click=[ga,t];var k=i(p,!0);r(p);var U=n(p,2);U.__click=[ba,t];var P=n(U,2);P.__click=[fa,t],r(d),r(f);var A=n(f,2);{var y=L=>{var N=xa(),O=i(N),F=i(O,!0);r(O),r(N),M(()=>E(F,t.reference)),g(L,N)};H(A,L=>{u()&&L(y)})}r(b),M(()=>{je(p,"aria-label",u()?"Collapse":"Expand"),E(k,u()?"Collapse":"Expand")}),g(s,b),Ge()}Je(["click"]);var pa=(s,t)=>t.onToggleExpand(t.index),ya=(s,t)=>t.onEdit(t.index),ha=(s,t,u)=>t.onDelete(t.index,u),wa=m('<div class="text-gray-500 text-xs mt-1"> </div>'),ka=m('<div class="bg-white p-2 rounded border"><div class="font-medium"> </div> <div class="text-gray-600 text-xs"> </div> <div class="text-gray-500 italic text-xs"> </div> <!></div>'),Ea=m('<div><div class="font-semibold text-gray-700 mb-1"> </div> <div class="space-y-2"></div></div>'),Ra=m('<div><div class="font-semibold text-gray-700 mb-1">References:</div> <div class="text-gray-600"> </div></div>'),Ta=m('<div class="mt-4 pt-4 border-t border-blue-200 space-y-3 text-xs"><div><div class="font-semibold text-gray-700 mb-1">Transformation Status:</div> <div class="bg-white p-2 rounded border"><span class="font-mono text-gray-900"> </span></div></div> <!> <!></div>'),Da=m('<div class="border-2 border-blue-300 bg-blue-50 rounded-lg p-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm font-semibold text-blue-800">Relationship:</span> <span class="text-sm text-gray-900"> </span></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border border-blue-300"> </button> <button type="button" class="px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded border border-purple-300" aria-label="Edit">Edit</button> <button type="button" class="px-2 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-800 rounded border border-red-300" aria-label="Delete">Delete</button></div></div> <!></div>');function Sa(s,t){Xe(t,!0);let u=Ne(t,"isExpanded",3,!1),b=Ne(t,"isModified",3,!1);const f=tt(t.relationship.sourceId,t.relationship.targetId);var d=rt(),p=Ze(d);{var k=U=>{var P=Da(),A=i(P),y=i(A),L=n(i(y),2),N=i(L);r(L),r(y);var O=n(y,2),F=i(O);F.__click=[pa,t];var se=i(F,!0);r(F);var R=n(F,2);R.__click=[ya,t];var c=n(R,2);c.__click=[ha,t,f],r(O),r(A);var _=n(A,2);{var pe=ie=>{var ve=Ta(),de=i(ve),ge=n(i(de),2),D=i(ge),T=i(D,!0);r(D),r(ge),r(de);var C=n(de,2);{var Z=V=>{var te=Ea(),ue=i(te),ye=i(ue);r(ue);var he=n(ue,2);me(he,21,()=>t.relationship.separatingFunctions,ke,(z,K)=>{var Se=ka(),fe=i(Se),q=i(fe,!0);r(fe);var B=n(fe,2),re=i(B);r(B);var ne=n(B,2),ce=i(ne,!0);r(ne);var Oe=n(ne,2);{var Ae=Re=>{var G=wa(),I=i(G);r(G),M(j=>E(I,`Refs: [${j??""}]`),[()=>e(K).refs.join(", ")]),g(Re,G)};H(Oe,Re=>{e(K).refs&&e(K).refs.length>0&&Re(Ae)})}r(Se),M(()=>{E(q,e(K).name),E(re,`Short: ${e(K).shortName??""}`),E(ce,e(K).description)}),g(z,Se)}),r(he),r(te),M(()=>E(ye,`Separating Functions (${t.relationship.separatingFunctions.length??""}):`)),g(V,te)};H(C,V=>{t.relationship.separatingFunctions&&t.relationship.separatingFunctions.length>0&&V(Z)})}var oe=n(C,2);{var be=V=>{var te=Ra(),ue=n(i(te),2),ye=i(ue,!0);r(ue),r(te),M(he=>E(ye,he),[()=>t.relationship.refs.join(", ")]),g(V,te)};H(oe,V=>{t.relationship.refs&&t.relationship.refs.length>0&&V(be)})}r(ve),M(()=>E(T,t.relationship.status)),g(ie,ve)};H(_,ie=>{u()&&ie(pe)})}r(P),M(()=>{E(N,`${t.relationship.sourceId??""} â†’ ${t.relationship.targetId??""}`),je(F,"aria-label",u()?"Collapse":"Expand"),E(se,u()?"Collapse":"Expand")}),g(U,P)};H(p,U=>{b()&&U(k)})}g(s,d),Ge()}Je(["click"]);var Aa=m('<div class="text-center py-8 text-gray-500 italic">No changes queued yet. Use the buttons below to add items.</div>'),La=m(`<div class="space-y-3"><h2 class="text-lg font-bold text-gray-900">Queued Changes</h2> <p class="text-sm text-gray-600">Items you've added will appear here.</p> <div class="space-y-2"><!> <!> <!> <!> <!></div></div>`);function Ia(s,t){Xe(t,!0);const u=X(()=>t.languagesToAdd.length>0||t.languagesToEdit.length>0||t.newReferences.length>0||t.relationships.filter(y=>t.modifiedRelations.has(tt(y.sourceId,y.targetId))).length>0);var b=La(),f=n(i(b),4),d=i(f);me(d,17,()=>t.newReferences,ke,(y,L,N)=>{{let O=X(()=>t.expandedReferenceIndex===N);ma(y,{get reference(){return e(L)},index:N,get isExpanded(){return e(O)},get onToggleExpand(){return t.onToggleExpandReference},get onEdit(){return t.onEditReference},get onDelete(){return t.onDeleteReference}})}});var p=n(d,2);me(p,17,()=>t.languagesToAdd,ke,(y,L,N)=>{{let O=X(()=>t.expandedLanguageToAddIndex===N);Ft(y,{get language(){return e(L)},index:N,get isExpanded(){return e(O)},isEdit:!1,get onToggleExpand(){return t.onToggleExpandLanguageToAdd},get onEdit(){return t.onEditLanguageToAdd},get onDelete(){return t.onDeleteLanguageToAdd}})}});var k=n(p,2);me(k,17,()=>t.languagesToEdit,ke,(y,L,N)=>{{let O=X(()=>t.expandedLanguageToEditIndex===N);Ft(y,{get language(){return e(L)},index:N,get isExpanded(){return e(O)},isEdit:!0,get onToggleExpand(){return t.onToggleExpandLanguageToEdit},get onEdit(){return t.onEditLanguageToEdit},get onDelete(){return t.onDeleteLanguageToEdit}})}});var U=n(k,2);me(U,17,()=>t.relationships,ke,(y,L,N)=>{const O=X(()=>t.modifiedRelations.has(tt(e(L).sourceId,e(L).targetId)));{let F=X(()=>t.expandedRelationshipIndex===N);Sa(y,{get relationship(){return e(L)},index:N,get isModified(){return e(O)},get isExpanded(){return e(F)},get onToggleExpand(){return t.onToggleExpandRelationship},get onEdit(){return t.onEditRelationship},get onDelete(){return t.onDeleteRelationship}})}});var P=n(U,2);{var A=y=>{var L=Aa();g(y,L)};H(P,y=>{e(u)||y(A)})}r(f),r(b),g(s,b),Ge()}var Oa=m('<div class="grid grid-cols-2 md:grid-cols-4 gap-3"><button type="button" class="px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">+ New Language</button> <button type="button" class="px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors">âœŽ Edit Language</button> <button type="button" class="px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">ðŸ”— Manage Relationships</button> <button type="button" class="px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">+ New Reference</button></div>');function Ca(s,t){var u=Oa(),b=i(u);b.__click=function(...k){t.onAddLanguage?.apply(this,k)};var f=n(b,2);f.__click=function(...k){t.onEditLanguage?.apply(this,k)};var d=n(f,2);d.__click=function(...k){t.onManageRelationships?.apply(this,k)};var p=n(d,2);p.__click=function(...k){t.onAddReference?.apply(this,k)},r(u),g(s,u)}Je(["click"]);var ja=m('<div class="pt-6"><button type="submit" class="group relative w-full px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"><span class="flex items-center justify-center"><svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Preview Submission</span></button> <p class="text-center text-sm text-gray-500 mt-4">Preview your changes before submitting</p></div>');function Ma(s,t){let u=Ne(t,"disabled",3,!1);var b=ja(),f=i(b);bt(2),r(b),M(()=>f.disabled=u()),g(s,b)}var Na=m('<div class="p-8 text-center text-gray-500"><svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No contributions yet</p> <p class="text-sm">Your submission history will appear here</p></div>'),Fa=m('<span class="text-xs text-gray-500"> </span>'),Pa=m('<div class="mt-2 text-xs text-red-600 bg-red-50 px-2 py-1 rounded"> </div>'),Ua=(s,t,u)=>t.onLoad(e(u)),za=(s,t,u)=>t.onUpdate(e(u)),Ba=m('<button class="px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">Update PR</button>'),qa=m('<button disabled class="px-3 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed font-medium">Update PR</button>'),Qa=m('<a target="_blank" rel="noopener noreferrer" class="flex-1 px-3 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-center text-sm font-medium">View PR â†—</a>'),Ha=m('<a target="_blank" rel="noopener noreferrer" class="flex-1 px-3 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-center text-sm font-medium">Preview â†—</a>'),Ka=(s,t,u)=>t.onRefreshStatus(e(u).submissionId),Va=(s,t,u)=>{confirm("Delete this history entry? This cannot be undone.")&&t.onDelete(e(u).submissionId)},Ya=m('<div class="mt-4 pt-4 border-t border-gray-200 space-y-3"><div class="grid grid-cols-2 gap-2 text-sm"><button class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">Load into Queue</button> <!></div> <div class="flex gap-2"><!> <!></div> <div class="flex gap-2"><button class="flex-1 px-3 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium">Refresh Status</button> <button class="px-3 py-2 border-2 border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium">Delete</button></div></div>'),Ja=m('<div class="p-4 hover:bg-gray-50 transition-colors"><div class="flex items-start justify-between gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><span> </span> <!></div> <div class="text-sm text-gray-900 mb-1"><span class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded"> </span></div> <div class="text-xs text-gray-500"> </div> <!></div> <button class="flex-shrink-0 p-1 hover:bg-gray-200 rounded transition-colors"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!></div>'),Xa=m('<div class="divide-y divide-gray-200"></div>'),Ga=m('<div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"><div class="bg-gradient-to-r from-indigo-600 to-indigo-700 px-6 py-4"><h3 class="text-xl font-bold text-white">Contribution History</h3> <p class="text-indigo-100 text-sm mt-1"> </p></div> <div class="max-h-[600px] overflow-y-auto"><!></div></div>');function Wa(s,t){Xe(t,!0);function u(F){switch(F){case"open":return"bg-blue-100 text-blue-800 border-blue-200";case"merged":return"bg-purple-100 text-purple-800 border-purple-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}}function b(F){switch(F){case"open":return"Open";case"merged":return"Merged";case"closed":return"Closed";case"error":return"Error";default:return"Pending"}}function f(F){const se=new Date(F),c=Date.now()-F;if(c<6e4)return"Just now";if(c<36e5){const _=Math.floor(c/6e4);return`${_} ${_===1?"minute":"minutes"} ago`}if(c<864e5){const _=Math.floor(c/36e5);return`${_} ${_===1?"hour":"hours"} ago`}if(c<6048e5){const _=Math.floor(c/864e5);return`${_} ${_===1?"day":"days"} ago`}return se.toLocaleDateString()}let d=S(null);function p(F){a(d,e(d)===F?null:F,!0)}var k=Ga(),U=i(k),P=n(i(U),2),A=i(P);r(P),r(U);var y=n(U,2),L=i(y);{var N=F=>{var se=Na();g(F,se)},O=F=>{var se=Xa();me(se,23,()=>t.entries,R=>R.submissionId,(R,c,_)=>{var pe=Ja(),ie=i(pe),ve=i(ie),de=i(ve),ge=i(de),D=i(ge,!0);r(ge);var T=n(ge,2);{var C=q=>{var B=Fa(),re=i(B);r(B),M(()=>E(re,`PR #${e(c).prNumber??""}`)),g(q,B)};H(T,q=>{e(c).prNumber&&q(C)})}r(de);var Z=n(de,2),oe=i(Z),be=i(oe,!0);r(oe),r(Z);var V=n(Z,2),te=i(V,!0);r(V);var ue=n(V,2);{var ye=q=>{var B=Pa(),re=i(B,!0);r(B),M(()=>E(re,e(c).errorMessage)),g(q,B)};H(ue,q=>{e(c).errorMessage&&q(ye)})}r(ve);var he=n(ve,2);he.__click=()=>p(e(_));var z=i(he);let K;r(he),r(ie);var Se=n(ie,2);{var fe=q=>{var B=Ya(),re=i(B),ne=i(re);ne.__click=[Ua,t,c];var ce=n(ne,2);{var Oe=J=>{var h=Ba();h.__click=[za,t,c],g(J,h)},Ae=J=>{var h=qa();g(J,h)};H(ce,J=>{e(c).status==="open"||e(c).status==="error"?J(Oe):J(Ae,!1)})}r(re);var Re=n(re,2),G=i(Re);{var I=J=>{var h=Qa();M(w=>je(h,"href",w),[()=>dr(e(c).prNumber)]),g(J,h)};H(G,J=>{e(c).prNumber&&J(I)})}var j=n(G,2);{var Q=J=>{var h=Ha();M(()=>je(h,"href",e(c).previewUrl)),g(J,h)};H(j,J=>{e(c).previewUrl&&J(Q)})}r(Re);var Y=n(Re,2),$=i(Y);$.__click=[Ka,t,c];var ee=n($,2);ee.__click=[Va,t,c],r(Y),r(B),g(q,B)};H(Se,q=>{e(d)===e(_)&&q(fe)})}r(pe),M((q,B,re,ne,ce)=>{He(ge,1,q,"svelte-1ck6r5y"),E(D,B),E(be,re),E(te,ne),je(he,"aria-label",e(d)===e(_)?"Collapse":"Expand"),K=He(z,0,"w-5 h-5 text-gray-600 transition-transform svelte-1ck6r5y",null,K,ce)},[()=>`px-2 py-1 rounded-md text-xs font-medium border ${u(e(c).status)}`,()=>b(e(c).status),()=>sr(e(c).submissionId),()=>f(e(c).updatedAt),()=>({"rotate-180":e(d)===e(_)})]),g(R,pe)}),r(se),g(F,se)};H(L,F=>{t.entries.length===0?F(N):F(O,!1)})}r(y),r(k),M(()=>E(A,`${t.entries.length??""} ${t.entries.length===1?"submission":"submissions"}`)),g(s,k),Ge()}Je(["click"]);var Za=(s,t)=>a(t,!1),$a=s=>s.stopPropagation(),ei=m("<option> </option>"),ti=(s,t,u)=>{a(t,""),a(u,!1)},ri=(s,t,u,b)=>{e(t)&&(a(u,!1),a(b,!0))},ai=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4"><h2 class="text-2xl font-bold text-white">Select Language to Edit</h2> <p class="text-yellow-100 mt-1">Choose an existing language</p></div> <div class="p-6"><label for="language-selector" class="block text-sm font-medium text-gray-700 mb-2">Language <span class="text-red-500">*</span></label> <select id="language-selector" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"><option>Choose a language...</option><!></select> <div class="flex gap-3 justify-end pt-4 mt-4 border-t"><button type="button" class="px-4 py-2 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">Edit</button></div></div></div></div>'),ii=m('<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-7xl mx-auto"><div class="text-center mb-12"><h1 class="text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">Contribute to the KC Map</h1> <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">Help improve the Knowledge Compilation Map by adding new languages or updating existing ones.</p></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="lg:col-span-1 order-2 lg:order-1"><!></div> <div class="lg:col-span-2 order-1 lg:order-2"><div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100"><div class="bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6"><h2 class="text-2xl font-bold text-white">Submission Form</h2> <p class="text-blue-100 mt-1">Fill out the details below to contribute</p></div> <div class="p-8 sm:p-10"><form class="space-y-8"><div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"><h2 class="text-lg font-bold text-gray-900 mb-4">Contributor Information</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="contributor-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label> <input type="email" id="contributor-email" required class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="your.email@example.com"/></div> <div><label for="contributor-github" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username (optional)</label> <input type="text" id="contributor-github" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="@username"/></div></div> <div class="mt-4"><label for="contributor-note" class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label> <textarea id="contributor-note" rows="3" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" placeholder="Add any clarifications or additional context for your contribution..."></textarea> <p class="mt-1 text-xs text-gray-500">This note will be included in the pull request description.</p></div></div> <!>  <!> <!></form></div></div></div></div></div></div> <!> <!> <!> <!> <!>',1);function fi(s,t){Xe(t,!0);const u="kcm_contribute_queue_v1",b="kcm_contributor_info_v1",f=o=>typeof o=="string",d=o=>Array.isArray(o)?o.filter(f):[];function p(o){if(!o||typeof o!="object")return{};const x={};for(const[l,v]of Object.entries(o)){if(!v||typeof v!="object")continue;const W=f(v.polytime)?v.polytime:"unknown",Qe=f(v.note)?v.note:void 0,et=d(v.refs),le={polytime:W,refs:et};Qe&&(le.note=Qe),x[l]=le}return x}function k(o){if(!Array.isArray(o))return[];const x=[];for(const l of o){if(!l||typeof l!="object")continue;const v=l;!f(v.id)||!f(v.label)||x.push({id:v.id,label:v.label,color:f(v.color)?v.color:"#6366f1",description:f(v.description)?v.description:void 0,refs:d(v.refs)})}return x}function U(o){return Array.isArray(o)?o.map(x=>{if(!x||typeof x!="object")return null;const l=x;return!f(l.id)||!f(l.name)||!f(l.fullName)||!f(l.description)?null:{id:l.id,name:l.name,fullName:l.fullName,description:l.description,descriptionRefs:d(l.descriptionRefs),queries:p(l.queries),transformations:p(l.transformations),tags:k(l.tags),existingReferences:d(l.existingReferences)}}).filter(x=>x!==null):[]}function P(o){if(!Array.isArray(o))return[];const x=[];for(const l of o){if(!l||typeof l!="object")continue;const v=l;!f(v.shortName)||!f(v.name)||!f(v.description)||x.push({shortName:v.shortName,name:v.name,description:v.description,refs:d(v.refs)})}return x}function A(o){return Array.isArray(o)?o.map(x=>{if(!x||typeof x!="object")return null;const l=x;if(!f(l.sourceId)||!f(l.targetId)||!f(l.status))return null;const v=P(l.separatingFunctions),W={sourceId:l.sourceId,targetId:l.targetId,status:l.status,refs:d(l.refs)};return v.length>0&&(W.separatingFunctions=v),W}).filter(x=>x!==null):[]}const y=Object.values(t.data.polytimeOptions),L=t.data.relationTypes.map(o=>({value:o.id,label:o.name,description:o.description??""})),N=Jt(t.data.adjacencyMatrix);let O=S(""),F=S(""),se=S(""),R=S(Me([])),c=S(Me([])),_=S(Me([])),pe=S(null),ie=S(null),ve=S(null),de=S(null),ge=S(!1),D=S(!1),T=S(!1),C=S(""),Z=S(!1),oe=S(!1),be=S(null),V=S(null),te=S(null),ue=S(null),ye=S(Me(new Set)),he=S(!1),z=S(Me([])),K=S(Me([])),Se=S(Me([])),fe=S(null),q=S(!1);const B=X(()=>e(R).length>0||e(c).length>0||e(_).filter(o=>e(ye).has(tt(o.sourceId,o.targetId))).length>0||e(z).length>0||e(K).length>0);Wt(()=>{try{const o=localStorage.getItem(u);if(o){const l=JSON.parse(o);a(R,U(l?.languagesToAdd),!0),a(c,U(l?.languagesToEdit),!0),a(_,A(l?.relationships),!0),a(z,d(l?.newReferences),!0),a(K,k(l?.customTags),!0),a(ye,new Set(d(l?.modifiedRelations)),!0)}const x=localStorage.getItem(b);if(x){const l=JSON.parse(x);f(l?.email)&&a(O,l.email,!0),f(l?.github)&&a(F,l.github,!0),f(l?.note)&&a(se,l.note,!0)}a(Se,_t(),!0)}catch(o){console.warn("Failed to restore queued changes from storage",o)}finally{a(he,!0)}});function re(o){const x=o(e(ye));a(ye,new Set(x),!0)}function ne(o){const x=tt(o.sourceId,o.targetId);re(l=>{const v=new Set(l);return v.add(x),v})}function ce(o){re(x=>{if(!x.has(o))return x;const l=new Set(x);return l.delete(o),l})}Ye(()=>{if(!e(he)||!Lt)return;if(e(R).length===0&&e(c).length===0&&e(_).length===0&&e(z).length===0&&e(K).length===0&&e(ye).size===0){try{localStorage.removeItem(u)}catch(l){console.warn("Failed to clear queued changes from storage",l)}return}const x={languagesToAdd:e(R),languagesToEdit:e(c),relationships:e(_),newReferences:e(z),customTags:e(K),modifiedRelations:Array.from(e(ye))};try{localStorage.setItem(u,JSON.stringify(x))}catch(l){console.warn("Failed to persist queued changes",l)}}),Ye(()=>{if(!e(he)||!Lt)return;const o={email:e(O),github:e(F),note:e(se)};try{localStorage.setItem(b,JSON.stringify(o))}catch(x){console.warn("Failed to persist contributor info",x)}});function Oe(o){return a(R,[...e(R),o],!0),{success:!0}}function Ae(o){const x=e(c).findIndex(l=>l.id===o.id);return x>=0?(e(c)[x]=o,a(c,[...e(c)],!0)):a(c,[...e(c),o],!0),{success:!0}}function Re(o){a(z,[...e(z),o],!0)}let G=S(null);function I(o){a(G,{languages:e(R).slice(o+1),editedLanguages:e(c).slice(o+1),references:e(z).slice(o+1),relationships:e(_).filter((x,l)=>l>o),tags:e(K).slice(o+1)},!0),a(R,e(R).slice(0,o+1),!0),a(c,e(c).slice(0,o+1),!0),a(z,e(z).slice(0,o+1),!0),a(_,e(_).slice(0,o+1),!0),a(K,e(K).slice(0,o+1),!0),a(be,o,!0),a(Z,!0)}function j(o){e(be)!==null&&(e(z)[e(be)]=o,a(z,[...e(z)],!0),e(G)&&(a(R,[...e(R),...e(G).languages],!0),a(c,[...e(c),...e(G).editedLanguages],!0),a(z,[...e(z),...e(G).references],!0),a(_,[...e(_),...e(G).relationships],!0),a(K,[...e(K),...e(G).tags],!0)),a(be,null),a(G,null))}function Q(o){a(V,o,!0),a(ge,!0)}function Y(o){return e(V)!==null&&(e(R)[e(V)]=o,a(R,[...e(R)],!0),a(V,null)),{success:!0}}function $(o){a(te,o,!0),a(D,!0)}function ee(o){return e(te)!==null&&(e(c)[e(te)]=o,a(c,[...e(c)],!0),a(te,null)),{success:!0}}function J(o){a(ue,o,!0),a(oe,!0)}function h(o){e(ue)!==null&&(e(_)[e(ue)]=o,a(_,[...e(_)],!0),ne(o),a(ue,null))}function w(o){if(e(ue)!==null){h(o);return}const x=tt(o.sourceId,o.targetId),l=e(_).findIndex(v=>tt(v.sourceId,v.targetId)===x);l>=0?(e(_)[l]=o,a(_,[...e(_)],!0)):a(_,[...e(_),o],!0),ne(o)}function ae(o){const x=new Set(t.data.existingReferences.map(v=>v.id));for(let v=0;v<o;v++){const W=It(e(z)[v],x);x.add(W)}const l=It(e(z)[o],x);a(z,e(z).filter((v,W)=>W!==o),!0),e(R).forEach(v=>{v.descriptionRefs=v.descriptionRefs.filter(W=>W!==l)}),e(c).forEach(v=>{v.descriptionRefs=v.descriptionRefs.filter(W=>W!==l)}),e(_).forEach(v=>{v.refs=v.refs.filter(W=>W!==l),v.separatingFunctions?.forEach(W=>{W.refs=W.refs.filter(Qe=>Qe!==l)})}),e(K).forEach(v=>{v.refs=v.refs.filter(W=>W!==l)}),a(R,[...e(R)],!0),a(c,[...e(c)],!0),a(_,[...e(_)],!0),a(K,[...e(K)],!0)}function Fe(o){o.preventDefault(),window.location.href=`${lr}/`}function xe(o){if(e(B)&&!confirm("You have unsaved changes. Loading this contribution will discard them. Continue?"))return;const l=o.queueSnapshot;a(R,U(l.languagesToAdd),!0),a(c,U(l.languagesToEdit),!0),a(_,A(l.relationships),!0),a(z,d(l.newReferences),!0),a(K,k(l.customTags),!0),a(ye,new Set(d(l.modifiedRelations)),!0),a(O,o.contributor.email,!0),a(F,o.contributor.github||"",!0),a(fe,o.submissionId,!0),a(q,o.status==="open"||o.status==="error",!0)}function we(o){xe(o),a(q,!0)}function Pe(o){cr(o),a(Se,_t(),!0)}async function Ie(o){const x=e(Se).find(l=>l.submissionId===o);if(!(!x||!x.prNumber))try{const l=await fetch(`https://api.github.com/repos/dkahdian/kcm/pulls/${x.prNumber}`);if(l.ok){const v=await l.json(),W=v.merged?"merged":v.state==="closed"?"closed":"open";ur(o,{status:W}),a(Se,_t(),!0)}}catch(l){console.error("Failed to refresh PR status:",l)}}var Be=ii();or(o=>{nr.title="Contribute - Knowledge Compilation Map"});var Ue=Ze(Be),at=i(Ue),qe=n(i(at),2),Ve=i(qe),$e=i(Ve);Wa($e,{get entries(){return e(Se)},onLoad:xe,onUpdate:we,onDelete:Pe,onRefreshStatus:Ie}),r(Ve);var Ke=n(Ve,2),it=i(Ke),ot=n(i(it),2),_e=i(ot),Te=i(_e),De=n(i(Te),2),Ce=i(De),Ee=n(i(Ce),2);We(Ee),r(Ce);var nt=n(Ce,2),lt=n(i(nt),2);We(lt),r(nt),r(De);var yt=n(De,2),ht=n(i(yt),2);ct(ht),bt(2),r(yt),r(Te);var wt=n(Te,2);Ia(wt,{get languagesToAdd(){return e(R)},get languagesToEdit(){return e(c)},get newReferences(){return e(z)},get relationships(){return e(_)},get modifiedRelations(){return e(ye)},get expandedLanguageToAddIndex(){return e(pe)},get expandedLanguageToEditIndex(){return e(ie)},get expandedReferenceIndex(){return e(de)},get expandedRelationshipIndex(){return e(ve)},onToggleExpandLanguageToAdd:o=>a(pe,e(pe)===o?null:o,!0),onToggleExpandLanguageToEdit:o=>a(ie,e(ie)===o?null:o,!0),onToggleExpandReference:o=>a(de,e(de)===o?null:o,!0),onToggleExpandRelationship:o=>a(ve,e(ve)===o?null:o,!0),onEditLanguageToAdd:Q,onEditLanguageToEdit:$,onDeleteLanguageToAdd:o=>a(R,e(R).filter((x,l)=>l!==o),!0),onDeleteLanguageToEdit:o=>a(c,e(c).filter((x,l)=>l!==o),!0),onEditReference:I,onDeleteReference:ae,onEditRelationship:J,onDeleteRelationship:(o,x)=>{a(_,e(_).filter((l,v)=>v!==o),!0),ce(x)}});var kt=n(wt,2);Ca(kt,{onAddLanguage:()=>a(ge,!0),onEditLanguage:()=>a(T,!0),onManageRelationships:()=>a(oe,!0),onAddReference:()=>a(Z,!0)});var Ut=n(kt,2);{let o=X(()=>!e(B)||!e(O));Ma(Ut,{get disabled(){return e(o)}})}r(_e),r(ot),r(it),r(Ke),r(qe),r(at),r(Ue);var Et=n(Ue,2);{let o=X(()=>e(V)!==null?Y:Oe),x=X(()=>e(V)!==null),l=X(()=>e(V)!==null?e(R)[e(V)]:void 0),v=X(()=>Object.values(t.data.queries).map(Le=>({code:Le.code,name:Le.label}))),W=X(()=>Object.values(t.data.transformations).map(Le=>({code:Le.code,name:Le.label}))),Qe=X(()=>y.map(Le=>({value:Le.code,label:Le.label,description:Le.description||""}))),et=X(()=>[...t.data.existingTags,...e(K)].map(Le=>({id:Le.id,label:Le.label,color:Le.color||"#6366f1",description:"",refs:[]}))),le=X(()=>xt(t.data.existingReferences,e(z)));jt(Et,{onClose:()=>{a(ge,!1),a(V,null)},get onAdd(){return e(o)},get isEdit(){return e(x)},get initialData(){return e(l)},get queries(){return e(v)},get transformations(){return e(W)},get polytimeOptions(){return e(Qe)},get existingTags(){return e(et)},get availableRefs(){return e(le)},get isOpen(){return e(ge)},set isOpen(Le){a(ge,Le,!0)}})}var Rt=n(Et,2);{let o=X(()=>e(te)!==null?ee:Ae),x=X(()=>e(te)!==null?e(c)[e(te)]:e(C)?Xt(t.data.languages.find(le=>le.id===e(C))):void 0),l=X(()=>Object.values(t.data.queries).map(le=>({code:le.code,name:le.label}))),v=X(()=>Object.values(t.data.transformations).map(le=>({code:le.code,name:le.label}))),W=X(()=>y.map(le=>({value:le.code,label:le.label,description:le.description||""}))),Qe=X(()=>[...t.data.existingTags,...e(K)].map(le=>({id:le.id,label:le.label,color:le.color||"#6366f1",description:"",refs:[]}))),et=X(()=>xt(t.data.existingReferences,e(z)));jt(Rt,{onClose:()=>{a(D,!1),a(C,""),a(te,null)},get onAdd(){return e(o)},isEdit:!0,get initialData(){return e(x)},get queries(){return e(l)},get transformations(){return e(v)},get polytimeOptions(){return e(W)},get existingTags(){return e(Qe)},get availableRefs(){return e(et)},get isOpen(){return e(D)},set isOpen(le){a(D,le,!0)}})}var Tt=n(Rt,2);{var zt=o=>{var x=ai();x.__click=[Za,T];var l=i(x);l.__click=[$a];var v=n(i(l),2),W=n(i(v),2),Qe=i(W);Qe.value=Qe.__value="";var et=n(Qe);me(et,17,()=>t.data.languages,ke,(ft,vt)=>{var dt=ei(),qt=i(dt);r(dt);var At={};M(()=>{E(qt,`${e(vt).name??""} (${e(vt).id??""})`),At!==(At=e(vt).id)&&(dt.value=(dt.__value=e(vt).id)??"")}),g(ft,dt)}),r(W);var le=n(W,2),Le=i(le);Le.__click=[ti,C,T];var St=n(Le,2);St.__click=[ri,C,T,D],r(le),r(v),r(l),r(x),M(()=>St.disabled=!e(C)),st(W,()=>e(C),ft=>a(C,ft)),g(o,x)};H(Tt,o=>{e(T)&&o(zt)})}var Dt=n(Tt,2);{let o=X(()=>e(be)!==null?j:Re),x=X(()=>e(be)!==null?e(z)[e(be)]:""),l=X(()=>e(be)!==null);Pr(Dt,{onClose:()=>{a(Z,!1),a(be,null),a(G,null)},get onAdd(){return e(o)},get initialValue(){return e(x)},get isEditMode(){return e(l)},get isOpen(){return e(Z)},set isOpen(v){a(Z,v,!0)}})}var Bt=n(Dt,2);{let o=X(()=>e(ue)!==null?e(_)[e(ue)]:void 0),x=X(()=>Gt(t.data.languages,e(R),e(c))),l=X(()=>xt(t.data.existingReferences,e(z)));$r(Bt,{onClose:()=>{a(oe,!1),a(ue,null)},onSave:w,get initialData(){return e(o)},get languages(){return e(x)},get statusOptions(){return L},get availableRefs(){return e(l)},get baselineRelations(){return N},get isOpen(){return e(oe)},set isOpen(v){a(oe,v,!0)}})}Zt("submit",_e,Fe),ze(Ee,()=>e(O),o=>a(O,o)),ze(lt,()=>e(F),o=>a(F,o)),ze(ht,()=>e(se),o=>a(se,o)),g(s,Be),Ge()}Je(["click"]);export{fi as component,bi as universal};
